import{r as e,s as t,f as l,t as a,m as o,v as s,w as i}from"./index.eabbe37b.js";import{_ as r}from"./ConfirmDialogue.9510fbd6.js";import{C as n}from"./ckeditor.5faa1adb.js";import{o as d,c,b as p,q as m,u,J as b,d as g,F as h,n as f,s as x,f as y,t as v,r as w}from"./vendor.fe91043f.js";import"./PopupModal.5cad3434.js";const k={name:"Management",components:{ConfirmDialogue:r},data:()=>({errorMessage:null,status:"Idle",editor:n,editorData:"<h1>Write your content here...</h1>",editorConfig:{ckfinder:{uploadUrl:"https://example.com/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images&responseType=json",options:{resourceType:"Images"}}},ref:e.collection("Clients"),clientsData:null,document:{date:null,description:null,discipline:[],display_on_main:!1,display_on_services:!0,image_main:null,images:[],name:null,office:null,project_team:null,quote:null,tagline:null,time_input:null,type:[]},image:{tempImageUrl:[],imageData:[]},cover:{tempImageUrl:null,imageData:null}}),created(){this.clientsData=t(),console.log(this.clientsData)},methods:{checkdata(){console.log(this.editorData);var e=this.editorData.split("<p>-break-</p>");e.forEach((e=>{console.log(e)})),this.document.description=e,console.log(this.document)},previewImage(e){let t,l=e.target.files;for(console.log(l.length),t=0;t<l.length;t++)this.image.imageData.push(l[t]),this.image.tempImageUrl.push(URL.createObjectURL(this.image.imageData[t]))},previewImageMain(e){let t=e.target.files[0];this.cover.imageData=t,this.cover.tempImageUrl=URL.createObjectURL(t)},convertToSlug:e=>e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),async upload(){this.document.time_input=l.firestore.Timestamp.now(),this.status="Process";let e=this.editorData.split("<p>-break-</p>");this.document.description=e,console.log(this.document);let t=l.storage().ref("/Clients"),o=t.child(`${this.cover.imageData.name} in Content: ${this.document.name}`);await o.put(this.cover.imageData);let s=await o.getDownloadURL();this.document.image_main=s;var i=this.convertToSlug(this.document.name),r=this.image.imageData.length;this.image.imageData.forEach((async e=>{var l=t.child(`${e.name} in Content: ${this.document.name}`);await l.put(e);var o=await l.getDownloadURL();console.log(o),this.document.images.push(o),setTimeout((()=>{r-=1,console.log("not done"),0===r&&(console.log("done"),console.log(this.document),a(i,this.document),this.status="Success",setTimeout((()=>{this.status="Idle"}),5e3),this.reset())}),1)}))},reset(){this.resetContent(),this.resetContentMain(),document.getElementById("main-form").reset()},resetContent(){this.image.imageData=[],this.image.tempImageUrl=[],document.getElementById("input-file").value=""},resetContentMain(){this.cover.imageData=null,this.cover.tempImageUrl=null,document.getElementById("input-file-main").value=""},showData(e){e.target.classList.add("hidden"),e.target.previousSibling.classList.remove("hidden"),e.target.nextSibling.classList.remove("hidden")},hideData(e){e.target.classList.add("hidden"),e.target.nextSibling.classList.remove("hidden"),e.target.nextSibling.nextSibling.classList.add("hidden")},editClient(e){var t=e.target[0].value;this.$router.push(`/admin/client/${t}`)},setForm(e){this.document=e},async _delete(e){let t=e.target[0].value,l=e.target[0].getAttribute("data-name"),a=e.target[0].getAttribute("data-office"),r=e.target[0].getAttribute("data-type");console.log(t),console.log(l,a);if(await this.$refs.confirmDialogue.show({title:`Delete '${l}' by ${r}`,message:"Are you sure you want to delete this Content? It cannot be undone.",okButton:"Delete"})){const e=[];let l=await o(t);l=l.data;for(const t in l)l[t].includes("https://firebasestorage.googleapis.com")?e.push(l[t]):"images"==t&&l[t].forEach((t=>{e.push(t)}));e.forEach((async e=>{try{await s(e)}catch(t){console.log(t)}})),i(t)}},setHeightTextarea(e){e.target.style.height="200px",e.target.style.height=e.target.scrollHeight+"px"}}},D={class:"bg-black-1 lg:px-40 px-5 text-white "},C=p("div",{class:"grid grid-cols-1 gap-5 bg-black-1 border-b-2 border-black-2 "},[p("div",{class:"py-10 text-teal-2"},[p("h1",{class:"text-h3 font-medium"},"Client"),p("h1",{class:"text-sh3"},"The information put here will be displayed on public")])],-1),I={class:"grid lg:grid-cols-1 grid-cols-1 gap-5"},U={class:"h-auto flex flex-col "},T=p("h1",{class:"text-sh3 py-5 mx-auto text-teal-2"},"General Information",-1),_={class:"border-black-2 border-r-0 h-auto flex flex-col"},S=p("label",{class:"text-btn"},"Name:",-1),j=p("label",{class:"text-btn mt-6"},"Office:",-1),V=p("label",{class:"text-btn mt-6"},"Project Team:",-1),L=p("label",{class:"text-btn mt-6"},"Date:",-1),E={class:"flex w-full"},M={class:"w-1/2 flex flex-col"},P=p("label",{class:"text-btn mt-6"},"Type:",-1),q={class:"inline-flex items-center mt-3"},R=p("span",{class:"ml-2"},"Training & Workshops",-1),$={class:"inline-flex items-center mt-3"},A=p("span",{class:"ml-2"},"Consulting",-1),B={class:"w-1/2 flex flex-col"},O=p("label",{class:"text-btn mt-6"},"Discipline:",-1),N={class:"inline-flex items-center mt-3"},F=p("span",{class:"ml-2"},"Banking and Finance",-1),H={class:"inline-flex items-center mt-3"},W=p("span",{class:"ml-2"},"Education",-1),G={class:"inline-flex items-center mt-3"},J=p("span",{class:"ml-2"},"Government Agency",-1),Q=p("label",{class:"text-btn mt-6"},"Tagline:",-1),z=p("label",{class:"text-btn mt-6"},"Display:",-1),K={class:"inline-flex items-center mt-3"},X=p("span",{class:"ml-2"},"on Services",-1),Y={class:"inline-flex items-center mt-3"},Z=p("span",{class:"ml-2"},"on Homepage",-1),ee={class:"flex flex-col mt-10"},te=p("h1",{class:"text-sh3 py-5 mx-auto text-teal-2"},"Detailed Information",-1),le={class:"h-auto lg:ml-4 flex flex-col"},ae=p("label",{class:"text-btn"},"Content:",-1),oe={class:"py-6 flex flex-col space-y-2"},se=p("h1",null,"Upload Cover/Main Image",-1),ie={class:"mt-4 cursor-pointer px-2 py-2"},re={key:0,class:"flex"},ne={class:"py-6 text-black-1"},de=p("p",{class:"text-white"},"NB: Write -break- for section break",-1),ce={class:"py-6 flex flex-col space-y-2"},pe=p("h1",null,"Upload Content Image",-1),me={class:"mt-4 cursor-pointer px-2 py-2"},ue={key:0,class:"flex"},be={key:0,class:"h-auto flex flex-col px-5 py-10 space-y-5"},ge=p("input",{class:"bg-teal-2 w-grid px-10 rounded text-white hover:bg-teal-3 text-center",type:"submit",value:"Submit"},null,-1),he=p("label",null,null,-1),fe={key:1,class:"bg-black-1 border-t border-yellow-500 text-yellow-500 px-4 py-3",role:"alert"},xe=p("p",{class:"font-medium"},"Processing...",-1),ye=p("p",{class:"font-medium"},"Please don't terminate the progress or do anything else.",-1),ve={key:2,class:"bg-black-1 border-t border-teal-3 text-teal-3 px-4 py-3",role:"alert"},we=p("p",{class:"font-medium"},"Data saved!",-1),ke={key:3,class:"bg-black-1 border-t border-red-600 text-red-600 px-4 py-3",role:"alert"},De=p("p",{class:"font-medium"},"Saving data failed! Try again...",-1),Ce={class:"bg-black-2 rounded-lg h-auto py-10 w-100 mt-10"},Ie=p("h1",{class:"text-lg text-center font-bold m-5"},"Data Table",-1),Ue={class:"table-auto rounded-lg m-5 w-11/12 mx-auto bg-gray-800 text-gray-200"},Te=p("thead",null,[p("tr",null,[p("th",{class:"p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Name"),p("th",{class:"timeInputCol p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Input Time"),p("th",{class:"p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Office"),p("th",{class:"p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Type"),p("th",{class:"p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Project Team"),p("th",{class:"p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Description"),p("th",{class:"p-3 font-bold uppercase   border border-gray-300 hidden md:table-cell"},"Actions")])],-1),_e={class:"w-full md:w-auto p-3  text-left border border-b block md:table-cell relative md:static"},Se=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Name",-1),je={class:"timeInputCol w-full md:w-auto p-3  border border-b text-left block md:table-cell relative md:static"},Ve=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Input Time",-1),Le={class:"w-full md:w-auto p-3  border border-b text-left block md:table-cell relative md:static"},Ee=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Office",-1),Me={class:"w-full md:w-auto p-3  border border-b text-left block md:table-cell relative md:static"},Pe=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Type",-1),qe={class:"w-full md:w-auto p-3  border border-b text-left block md:table-cell relative md:static"},Re=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Project Team",-1),$e={class:"w-full md:w-auto p-3  border border-b text-left block md:table-cell relative md:static"},Ae=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Content",-1),Be={class:"dataCell hidden max-w-screen-sm"},Oe={class:"w-4/5"},Ne={class:"w-full md:w-auto p-3 flex border border-b text-left md:table-cell relative md:static"},Fe=p("span",{class:"md:hidden hover:hidden absolute top-0 right-0 bg-gray-700 px-2 py-1 text-xs font-bold uppercase"},"Actions",-1),He=p("input",{type:"submit",class:"editCell bg-yellow-600 w-grid px-2 mr-2 rounded text-white hover:bg-yellow-400",value:"Edit"},null,-1),We=p("input",{type:"submit",class:"deleteCell bg-red-600 w-grid mt-0 md:mt-2 px-2 rounded text-white hover:bg-red-400",value:"Delete"},null,-1);k.render=function(e,t,l,a,o,s){const i=w("ckeditor"),r=w("confirm-dialogue");return d(),c("main",D,[C,p("form",{id:"main-form",onSubmit:t[19]||(t[19]=x(((...e)=>s.upload&&s.upload(...e)),["prevent"]))},[p("div",I,[p("div",U,[T,p("div",_,[S,m(p("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>this.document.name=e),type:"text",id:"name",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Name",required:""},null,512),[[u,this.document.name]]),j,m(p("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>this.document.office=e),type:"text",id:"office",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Office",required:""},null,512),[[u,this.document.office]]),V,m(p("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>this.document.project_team=e),type:"text",id:"projectTeam",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Project Team",required:""},null,512),[[u,this.document.project_team]]),L,m(p("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>this.document.date=e),type:"date",id:"dateContent",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",required:""},null,512),[[u,this.document.date]]),p("div",E,[p("div",M,[P,p("label",q,[m(p("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>this.document.type=e),type:"checkbox",value:"Training & Workshops",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[b,this.document.type]]),R]),p("label",$,[m(p("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>this.document.type=e),type:"checkbox",value:"Consulting",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[b,this.document.type]]),A])]),p("div",B,[O,p("label",N,[m(p("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>this.document.discipline=e),type:"checkbox",value:"Banking and Finance",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[b,this.document.discipline]]),F]),p("label",H,[m(p("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>this.document.discipline=e),type:"checkbox",value:"Education",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[b,this.document.discipline]]),W]),p("label",G,[m(p("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>this.document.discipline=e),type:"checkbox",value:"Government Agency",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[b,this.document.discipline]]),J])])]),Q,m(p("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>this.document.tagline=e),type:"text",id:"tagline",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Tagline",required:""},null,512),[[u,this.document.tagline]]),z,p("label",K,[m(p("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>this.document.display_on_services=e),type:"checkbox",class:"form-checkbox h-5 w-5 text-teal-600",checked:""},null,512),[[b,this.document.display_on_services]]),X]),p("label",Y,[m(p("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>this.document.display_on_main=e),type:"checkbox",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[b,this.document.display_on_main]]),Z])])]),p("div",ee,[te,p("div",le,[ae,p("div",oe,[se,p("div",ie,[p("input",{onChange:t[13]||(t[13]=(...e)=>s.previewImageMain&&s.previewImageMain(...e)),type:"file",accept:"image/*",class:"input-file",id:"input-file-main",required:""},null,32),p("button",{type:"button",class:"bg-red-600 w-grid px-10 rounded text-white hover:bg-red-400",onClick:t[14]||(t[14]=(...e)=>s.resetContentMain&&s.resetContentMain(...e))},"Reset Image")]),this.cover.tempImageUrl?(d(),c("div",re,[p("img",{src:this.cover.tempImageUrl,style:{width:"20vw","margin-right":"20px"}},null,8,["src"])])):g("",!0)]),p("div",ne,[p(i,{editor:o.editor,modelValue:o.editorData,"onUpdate:modelValue":t[15]||(t[15]=e=>o.editorData=e),config:o.editorConfig},null,8,["editor","modelValue","config"]),de]),p("div",ce,[pe,p("div",me,[p("input",{onChange:t[16]||(t[16]=(...e)=>s.previewImage&&s.previewImage(...e)),type:"file",accept:"image/*",class:"input-file",id:"input-file",multiple:"",required:""},null,32),p("button",{type:"button",class:"bg-red-600 w-grid px-10 rounded text-white hover:bg-red-400",onClick:t[17]||(t[17]=(...e)=>s.resetContent&&s.resetContent(...e))},"Reset Image")]),this.image.tempImageUrl?(d(),c("div",ue,[(d(!0),c(h,null,f(this.image.tempImageUrl,(e=>(d(),c("div",{key:e},[p("img",{src:e,style:{width:"20vw","margin-right":"20px"}},null,8,["src"])])))),128))])):g("",!0)]),"Process"!=this.status?(d(),c("div",be,[ge,p("button",{type:"button",class:"bg-red-600 w-grid px-10 rounded text-white hover:bg-red-400",onClick:t[18]||(t[18]=(...e)=>s.reset&&s.reset(...e))},"Reset"),he])):g("",!0),"Process"===this.status?(d(),c("div",fe,[xe,ye])):g("",!0),"Success"===this.status?(d(),c("div",ve,[we])):g("",!0),"Error"===this.status?(d(),c("div",ke,[De])):g("",!0)])])])],32),p("div",null,[p(r,{ref:"confirmDialogue"},null,512)]),p("div",Ce,[Ie,p("table",Ue,[Te,p("tbody",null,[(d(!0),c(h,null,f(o.clientsData,(({id:l,name:a,time_input:o,office:i,type:r,project_team:n,description:m})=>(d(),c("tr",{key:o,class:"md:hover:bg-gray-700 align-top flex md:table-row flex-row md:flex-row flex-wrap md:flex-no-wrap mb-10 md:mb-0"},[p("td",_e,[Se,y(" "+v(a),1)]),p("td",je,[Ve,y(" "+v(o.toDate().toDateString())+", "+v(o.toDate().toLocaleTimeString("en-US")),1)]),p("td",Le,[Ee,y(" "+v(i),1)]),p("td",Me,[Pe,y(" "+v(r),1)]),p("td",qe,[Re,y(" "+v(n),1)]),p("td",$e,[Ae,p("button",{class:"hideDataCell hidden bg-green-600 w-grid px-2 rounded text-white hover:bg-green-400",onClick:t[20]||(t[20]=(...e)=>s.hideData&&s.hideData(...e))},"Hide"),p("button",{class:"showDataCell bg-green-600 w-grid px-2 rounded text-white hover:bg-green-400",onClick:t[21]||(t[21]=(...e)=>s.showData&&s.showData(...e))},"Preview"),p("div",Be,[p("p",Oe,v(m),1)])]),p("td",Ne,[Fe,p("form",{onSubmit:t[22]||(t[22]=x(((...e)=>s.editClient&&s.editClient(...e)),["prevent"]))},[p("input",{type:"text",class:"hidden",value:l},null,8,["value"]),He],32),p("form",{onSubmit:t[23]||(t[23]=x(((...e)=>s._delete&&s._delete(...e)),["prevent"]))},[p("input",{"data-name":a,"data-office":i,"data-type":r,"data-images":e.images,type:"text",class:"hidden",value:l},null,8,["data-name","data-office","data-type","data-images","value"]),We],32)])])))),128))])])])])};export default k;
