import{r as e,m as t,f as a,u as l}from"./index.eabbe37b.js";import{C as s}from"./ckeditor.5faa1adb.js";import"./ConfirmDialogue.9510fbd6.js";import{o as i,c as o,b as n,q as c,u as r,J as d,d as m,F as u,n as p,s as h,r as g}from"./vendor.fe91043f.js";import"./PopupModal.5cad3434.js";const b={data(){return{errorMessage:null,status:"Idle",editor:s,editorData:String,editorConfig:{ckfinder:{uploadUrl:"https://example.com/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images&responseType=json",options:{resourceType:"Images"}}},ref:e.collection("Clients"),clientsData:null,id:this.$route.params.id,document:{date:null,description:null,discipline:null,display_on_main:!1,display_on_services:!0,image_main:null,images:[],name:null,office:null,project_team:null,quote:null,tagline:null,time_input:null,type:null},image:{tempImageUrl:[],imageData:[]},cover:{tempImageUrl:null,imageData:null},oldAssets:[]}},created(){t(this.id).then((e=>{console.log(e),this.document=e,this.mapContents()}))},computed:{},methods:{mapContents(){const e=this.document.description;let t="";e.forEach((e=>{t+=e,t+="<p>-break-</p>"})),t=t.slice(0,-14),this.editorData=t;let a=this.document.images;this.image.tempImageUrl.push.apply(this.image.tempImageUrl,a);let l=this.document.image_main;this.cover.tempImageUrl=this.document.image_main,this.oldAssets.push.apply(this.oldAssets,a),this.oldAssets.push(l)},checkdata(){console.log(this.editorData);var e=this.editorData.split("<p>-break-</p>");e.forEach((e=>{console.log(e)})),this.document.description=e,console.log(this.document)},previewImage(e){let t,a=e.target.files;for(console.log(a.length),t=0;t<a.length;t++)this.image.imageData.push(a[t]),this.image.tempImageUrl.push(URL.createObjectURL(this.image.imageData[t]))},previewImageMain(e){let t=e.target.files[0];this.cover.imageData=t,this.cover.tempImageUrl=URL.createObjectURL(t)},convertToSlug:e=>e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),async upload(){this.document.time_input=a.firestore.Timestamp.now(),this.status="Process";let e=this.editorData.split("<p>-break-</p>");this.document.description=e,console.log(this.document);let t=a.storage().ref("/Clients"),l=t.child(`${this.cover.imageData.name} in Content: ${this.document.name}`);await l.put(this.cover.imageData);let s=await l.getDownloadURL();this.document.image_main=s;var i=this.convertToSlug(this.document.name),o=this.image.imageData.length;this.image.imageData.forEach((async e=>{var a=t.child(`${e.name} in Content: ${this.document.name}`);await a.put(e);var l=await a.getDownloadURL();console.log(l),this.document.images.push(l),setTimeout((()=>{o-=1,console.log("not done"),0===o&&(console.log("done"),console.log(this.document),createClient(i,this.document),this.status="Success",setTimeout((()=>{this.status="Idle"}),5e3),this.reset())}),1)}))},reset(){this.resetContent(),this.resetContentMain(),document.getElementById("main-form").reset(),this.editorData=""},resetContent(){this.image.imageData=[],this.image.tempImageUrl=[],document.getElementById("input-file").value="",document.getElementById("input-file").required=!0,this.document.images=[]},resetContentMain(){this.cover.imageData=null,this.cover.tempImageUrl=null,document.getElementById("input-file-main").value="",document.getElementById("input-file-main").required=!0,this.document.image_main=""},back(){this.$router.back()},async edit(){var e;console.log(this.document),console.log("oldasset",this.oldAssets),this.document.time_input=a.firestore.Timestamp.now(),this.status="Process";let t=this.editorData.split("<p>-break-</p>");this.document.description=t;var s=a.storage().ref("/Clients");if(null!==this.cover.imageData){var i=s.child(`${null!=(e=this.cover.imageData.name)?e:"Edited Image"} in Content: ${this.document.name}`);await i.put(this.cover.imageData);let t=await i.getDownloadURL();this.document.image_main=t}let o=this.image.imageData.length;0!==this.image.imageData.length?this.image.imageData.forEach((async e=>{var t=s.child(`${e.name} in Content: ${this.document.name}`);await t.put(e);var a=await t.getDownloadURL();console.log(a),this.document.images.push(a),setTimeout((async()=>{o-=1,console.log("not done"),0===o&&(console.log("done"),console.log(this.document),l(this.id,this.document),this.status="Success",setTimeout((()=>{this.status="Idle",this.$router.push("/admin/client")}),2e3))}),1)})):(l(this.id,this.document),this.status="Success",setTimeout((()=>{this.status="Idle",this.$router.push("/admin/client")}),2e3))}}},f={class:"bg-black-1 lg:px-40 px-5 text-white font-ibm"},x={class:"grid grid-cols-2 gap-5 bg-black-1 border-b-2 border-black-2 "},y=n("div",{class:"py-10 text-teal-2"},[n("h1",{class:"text-h3 font-medium"},"Edit Client"),n("h1",{class:"text-sh3"},"The information put here will be displayed on public")],-1),v={class:"py-10 text-teal-2 align-bottom flex items-end"},k={class:"grid lg:grid-cols-1 grid-cols-1 gap-5"},w={class:"h-auto flex flex-col "},U=n("h1",{class:"text-sh3 py-5 mx-auto text-teal-2"},"General Information",-1),D={class:"border-black-2 border-r-0 h-screen flex flex-col"},I=n("label",{class:"text-btn"},"Name:",-1),C=n("label",{class:"text-btn mt-6"},"Office:",-1),_=n("label",{class:"text-btn mt-6"},"Project Team:",-1),T=n("label",{class:"text-btn mt-6"},"Date:",-1),E={class:"flex w-full"},V={class:"w-1/2 flex flex-col"},j=n("label",{class:"text-btn mt-6"},"Type:",-1),$={class:"inline-flex items-center mt-3"},R=n("span",{class:"ml-2"},"Training & Workshops",-1),M={class:"inline-flex items-center mt-3"},S=n("span",{class:"ml-2"},"Consulting",-1),q={class:"w-1/2 flex flex-col"},B=n("label",{class:"text-btn mt-6"},"Discipline:",-1),L={class:"inline-flex items-center mt-3"},P=n("span",{class:"ml-2"},"Banking and Finance",-1),A={class:"inline-flex items-center mt-3"},O=n("span",{class:"ml-2"},"Education",-1),F={class:"inline-flex items-center mt-3"},G=n("span",{class:"ml-2"},"Government Agency",-1),N=n("label",{class:"text-btn mt-6"},"Tagline:",-1),W=n("label",{class:"text-btn mt-6"},"Display:",-1),H={class:"inline-flex items-center mt-3"},J=n("span",{class:"ml-2"},"on Services",-1),Q={class:"inline-flex items-center mt-3"},z=n("span",{class:"ml-2"},"on Homepage",-1),K={class:"flex flex-col"},X=n("h1",{class:"text-sh3 py-5 mx-auto text-teal-2"},"Detailed Information",-1),Y={class:"h-auto lg:ml-4 flex flex-col"},Z=n("label",{class:"text-btn"},"Content:",-1),ee={class:"py-6 flex flex-col space-y-2"},te=n("h1",null,"Upload Cover/Main Image",-1),ae={class:"mt-4 cursor-pointer px-2 py-2"},le={key:0,class:"flex"},se={class:"py-6 text-black-1"},ie=n("p",{class:"text-white"},"NB: Write -break- for section break",-1),oe={class:"py-6 flex flex-col space-y-2"},ne=n("h1",null,"Upload Content Image",-1),ce={class:"mt-4 cursor-pointer px-2 py-2"},re={key:0,class:"flex"},de={key:0,class:"h-auto flex flex-col px-5 py-10 space-y-5"},me=n("input",{class:"bg-teal-2 w-grid px-10 rounded text-white hover:bg-teal-3 text-center",type:"submit",value:"Edit"},null,-1),ue=n("label",null,null,-1),pe={key:1,class:"bg-black-1 border-t border-yellow-500 text-yellow-500 px-4 py-3",role:"alert"},he=n("p",{class:"font-medium"},"Processing...",-1),ge=n("p",{class:"font-medium"},"Please don't terminate the progress or do anything else.",-1),be={key:2,class:"bg-black-1 border-t border-teal-3 text-teal-3 px-4 py-3",role:"alert"},fe=n("p",{class:"font-medium"},"Data saved!",-1),xe={key:3,class:"bg-black-1 border-t border-red-600 text-red-600 px-4 py-3",role:"alert"},ye=n("p",{class:"font-medium"},"Saving data failed! Try again...",-1),ve=n("div",null,null,-1);b.render=function(e,t,a,l,s,b){const ke=g("ckeditor");return i(),o("main",f,[n("div",x,[y,n("div",v,[n("button",{class:"bg-black-2 w-grid px-5 rounded text-white hover:bg-black-3",onClick:t[1]||(t[1]=(...e)=>b.back&&b.back(...e))},"Back")])]),n("form",{onSubmit:t[20]||(t[20]=h(((...e)=>b.edit&&b.edit(...e)),["prevent"])),id:"main-form"},[n("div",k,[n("div",w,[U,n("div",D,[I,c(n("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>this.document.name=e),type:"text",id:"name",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Name",required:""},null,512),[[r,this.document.name]]),C,c(n("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>this.document.office=e),type:"text",id:"office",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Office",required:""},null,512),[[r,this.document.office]]),_,c(n("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>this.document.project_team=e),type:"text",id:"projectTeam",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Project Team",required:""},null,512),[[r,this.document.project_team]]),T,c(n("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>this.document.date=e),type:"date",id:"dateContent",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",required:""},null,512),[[r,this.document.date]]),n("div",E,[n("div",V,[j,n("label",$,[c(n("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>this.document.type=e),type:"checkbox",value:"Training & Workshops",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[d,this.document.type]]),R]),n("label",M,[c(n("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>this.document.type=e),type:"checkbox",value:"Consulting",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[d,this.document.type]]),S])]),n("div",q,[B,n("label",L,[c(n("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>this.document.discipline=e),type:"checkbox",value:"Banking and Finance",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[d,this.document.discipline]]),P]),n("label",A,[c(n("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>this.document.discipline=e),type:"checkbox",value:"Education",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[d,this.document.discipline]]),O]),n("label",F,[c(n("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>this.document.discipline=e),type:"checkbox",value:"Government Agency",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[d,this.document.discipline]]),G])])]),N,c(n("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>this.document.tagline=e),type:"text",id:"tagline",class:"block mt-2 lg:w-4/5 w-4/5 lg:h-11 h-6 lg:text-lg text-sm lg:pt-3 pt-1 bg-black-1 border-t-0 border-l-0 border-r-0 border-b-2 focus:ring-transparent focus:border-black-3 focus:border-opacity-80 hover:border-opacity-80 border-black-3 border-opacity-50 text-black-3",placeholder:"Tagline",required:""},null,512),[[r,this.document.tagline]]),W,n("label",H,[c(n("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>this.document.display_on_services=e),type:"checkbox",class:"form-checkbox h-5 w-5 text-teal-600",checked:""},null,512),[[d,this.document.display_on_services]]),J]),n("label",Q,[c(n("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>this.document.display_on_main=e),type:"checkbox",class:"form-checkbox h-5 w-5 text-teal-600"},null,512),[[d,this.document.display_on_main]]),z])])]),n("div",K,[X,n("div",Y,[Z,n("div",ee,[te,n("div",ae,[n("input",{onChange:t[14]||(t[14]=(...e)=>b.previewImageMain&&b.previewImageMain(...e)),type:"file",accept:"image/*",class:"input-file",id:"input-file-main"},null,32),n("button",{type:"button",class:"bg-red-600 w-grid px-10 rounded text-white hover:bg-red-400",onClick:t[15]||(t[15]=(...e)=>b.resetContentMain&&b.resetContentMain(...e))},"Reset Image")]),this.cover.tempImageUrl?(i(),o("div",le,[n("img",{src:this.cover.tempImageUrl,style:{width:"20vw","margin-right":"20px"}},null,8,["src"])])):m("",!0)]),n("div",se,[n(ke,{editor:s.editor,modelValue:s.editorData,"onUpdate:modelValue":t[16]||(t[16]=e=>s.editorData=e),config:s.editorConfig},null,8,["editor","modelValue","config"]),ie]),n("div",oe,[ne,n("div",ce,[n("input",{onChange:t[17]||(t[17]=(...e)=>b.previewImage&&b.previewImage(...e)),type:"file",accept:"image/*",class:"input-file",id:"input-file",multiple:""},null,32),n("button",{type:"button",class:"bg-red-600 w-grid px-10 rounded text-white hover:bg-red-400",onClick:t[18]||(t[18]=(...e)=>b.resetContent&&b.resetContent(...e))},"Reset Image")]),this.image.tempImageUrl?(i(),o("div",re,[(i(!0),o(u,null,p(this.image.tempImageUrl,(e=>(i(),o("div",{key:e},[n("img",{src:e,style:{width:"20vw","margin-right":"20px"}},null,8,["src"])])))),128))])):m("",!0)]),"Process"!=this.status?(i(),o("div",de,[me,n("button",{type:"button",class:"bg-red-600 w-grid px-10 rounded text-white hover:bg-red-400",onClick:t[19]||(t[19]=(...e)=>b.reset&&b.reset(...e))},"Reset"),ue])):m("",!0),"Process"===this.status?(i(),o("div",pe,[he,ge])):m("",!0),"Success"===this.status?(i(),o("div",be,[fe])):m("",!0),"Error"===this.status?(i(),o("div",xe,[ye])):m("",!0)])])])],32),ve])};export default b;
