var t=Object.assign;import{p as e,a as n,T as r,o as i,c as o,b as s,d as a,e as u,w as c,f as h,g as l,r as f,h as p,i as d,j as v,k as g,l as y,C as m,A as _}from"./vendor.fe91043f.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(n){const r=new URL(t,location),i=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((n,o)=>{const s=new URL(t,r);if(self[e].moduleMap[s])return n(self[e].moduleMap[s]);const a=new Blob([`import * as m from '${s}';`,`${e}.moduleMap['${s}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){o(new Error(`Failed to import: ${t}`)),i(u)},onload(){n(self[e].moduleMap[s]),i(u)}});document.head.appendChild(u)})),self[e].moduleMap={}}}("/assets/");const b={components:{},data:()=>({show_menu:!1}),methods:{showMenu(){1==this.show_menu?this.animateMenuClose():this.animateMenu(),this.show_menu=!this.show_menu},animateMenu(){let t=this.$refs.lineleft,e=this.$refs.lineright,n=new r;n.to(t,.5,{y:-2.5}),n.to(e,.5,{y:2.5},"-=.5")},animateMenuClose(){let t=this.$refs.lineleft,e=this.$refs.lineright,n=new r;n.to(t,.5,{y:0}),n.to(e,.5,{y:0},"-=.5")},is_reversed:t=>!1}},w=c("data-v-4c7f0dc0");e("data-v-4c7f0dc0");const I={class:"flex items-center justify-between flex-wrap mx-auto pt-4 px-6 md:px-8 lg:px-12"},E=s("a",{href:"/"},[s("img",{src:"/assets/portof_logo.4ac9ba0f.png",class:"h-5 md:h-16"})],-1),T={class:"lineleft",height:"10",width:"28",ref:"lineleft"},S=s("line",{class:"lineleft",x1:"0",y1:"0",x2:"28",y2:"0"},null,-1),C=h(" Sorry, your browser does not support inline SVG. "),N={class:"lineright",height:"10",width:"28",ref:"lineright"},k=s("line",{class:"lineright",x1:"0",y1:"0",x2:"28",y2:"0"},null,-1),A=h(" Sorry, your browser does not support inline SVG. "),P={key:0,class:"h-C-screen w-screen bg-black-1 px-6 bg1",style:{"margin-top":"-100px"}},O=l('<div class="text-white flex lg:flex-row flex-col lg:items-center lg:justify-start justify-end py-4 pb-44 lg:pb-32 w-3/4 h-full" data-v-4c7f0dc0><a href="/work" data-v-4c7f0dc0><h1 class="anchor hover:cursor-pointer hover:text-teal-3" data-v-4c7f0dc0>Work</h1></a><a href="/about" data-v-4c7f0dc0><h1 class="menu-item hover:cursor-pointer hover:text-teal-3" data-v-4c7f0dc0>About</h1></a><a href="/services" data-v-4c7f0dc0><h1 class="menu-item hover:cursor-pointer hover:text-teal-3" data-v-4c7f0dc0>Services</h1></a><a href="/insights" data-v-4c7f0dc0><h1 class="menu-item hover:cursor-pointer hover:text-teal-3" data-v-4c7f0dc0>Insights</h1></a></div>',1);n();const R=w(((t,e,n,r,c,h)=>(i(),o("main",{class:["z-30 h-auto",c.show_menu?"z-80":""]},[t.$route.meta.title?(i(),o("header",{key:0,class:[[h.is_reversed(t.$route.path)&&!c.show_menu?"bg-black-1 opacity-20":"bg-transparent"],"pb-4"]},[s("nav",I,[E,s("div",{onClick:e[1]||(e[1]=(...t)=>h.showMenu&&h.showMenu(...t)),class:"flex w-auto h-full cursor-pointer self-end"},[(i(),o("svg",T,[S,C],512)),(i(),o("svg",N,[k,A],512))])])],2)):a("",!0),s(u,{"enter-active-class":"transition-opacity duration-300 ease-linear","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300 ease-linear","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w((()=>[c.show_menu?(i(),o("div",P,[O])):a("",!0)])),_:1})],2))));b.render=R,b.__scopeId="data-v-4c7f0dc0";const D={data:()=>({}),components:{Navbar:b},methods:{showNavbar:t=>!t.includes("/login")&&!t.includes("/admin")}},x={class:"hideHorizontalOverflow h-screen"};let L;D.render=function(t,e,n,r,u,c){const h=f("Navbar"),l=f("router-view");return i(),o("main",x,[c.showNavbar(this.$route.path)?(i(),o(h,{key:0,class:"w-screen fixed bg-transparent"})):a("",!0),s(l)])};const M={},F=function(t,e){if(!e)return t();if(void 0===L){const t=document.createElement("link").relList;L=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in M)return;M[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const r=document.createElement("link");return r.rel=e?"stylesheet":L,e||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),e?new Promise(((t,e)=>{r.addEventListener("load",t),r.addEventListener("error",e)})):void 0}))).then((()=>t()))},U={},j={class:"bg-white shadow"},V=s("div",{class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},[s("h1",{class:"text-3xl font-bold leading-tight text-gray-900"},"Not Found")],-1);U.render=function(t,e){return i(),o("header",j,[V])};let q=[{path:"/",meta:{title:"Home"},component:()=>F((()=>__import__("./Home.e0400ddc.js")),["/assets/Home.e0400ddc.js","/assets/Home.a786cd37.css","/assets/ButtonRepo.777722bb.js","/assets/vendor.fe91043f.js","/assets/Footer.2fa131ce.js"])},{path:"/work",meta:{title:"Workpage"},component:()=>F((()=>__import__("./WorkPage.4bf83239.js")),["/assets/WorkPage.4bf83239.js","/assets/WorkPage.3fb48ed8.css","/assets/vendor.fe91043f.js"])},{path:"/work/:id",meta:{title:"Individual Workpage"},component:()=>F((()=>__import__("./WorkPageIndividual.2957561e.js")),["/assets/WorkPageIndividual.2957561e.js","/assets/WorkPageIndividual.3d18e4ed.css","/assets/ImageSlider.6c1e5172.js","/assets/ImageSlider.e45eb971.css","/assets/vendor.fe91043f.js","/assets/PopupModal.5cad3434.js","/assets/PopupModal.153ad960.css"])},{path:"/about",meta:{title:"About Us"},component:()=>F((()=>__import__("./About.9fe33597.js")),["/assets/About.9fe33597.js","/assets/About.c3801fea.css","/assets/Footer.2fa131ce.js","/assets/vendor.fe91043f.js"])},{path:"/insights",meta:{title:"Insights"},component:()=>F((()=>__import__("./Insights.2ec2c677.js")),["/assets/Insights.2ec2c677.js","/assets/WorkPage.3fb48ed8.css","/assets/vendor.fe91043f.js","/assets/PlayIcon.570b6d02.js"])},{path:"/insight/:id",meta:{title:"Individual Insight"},component:()=>F((()=>__import__("./InsightIndividual.015c0869.js")),["/assets/InsightIndividual.015c0869.js","/assets/InsightIndividual.94ef4559.css","/assets/ImageSlider.6c1e5172.js","/assets/ImageSlider.e45eb971.css","/assets/vendor.fe91043f.js","/assets/PopupModal.5cad3434.js","/assets/PopupModal.153ad960.css","/assets/PlayIcon.570b6d02.js"])},{path:"/services",meta:{title:"Services"},component:()=>F((()=>__import__("./Services.f314a8ce.js")),["/assets/Services.f314a8ce.js","/assets/Services.62c785c3.css","/assets/ButtonRepo.777722bb.js","/assets/vendor.fe91043f.js","/assets/Footer.2fa131ce.js"])},{path:"/login",name:"login",meta:{title:"Admin Login"},component:()=>F((()=>__import__("./Login.eb0f1f84.js")),["/assets/Login.eb0f1f84.js","/assets/vendor.fe91043f.js"])},{path:"/admin",meta:{title:"Admin Dashboard"},component:()=>F((()=>__import__("./Dashboard.7f941e18.js")),["/assets/Dashboard.7f941e18.js","/assets/vendor.fe91043f.js"])},{path:"/admin/client/:id",meta:{title:"Client Edit"},component:()=>F((()=>__import__("./ClientEdit.a9794fe9.js")),["/assets/ClientEdit.a9794fe9.js","/assets/ckeditor.5faa1adb.js","/assets/vendor.fe91043f.js","/assets/ConfirmDialogue.9510fbd6.js","/assets/ConfirmDialogue.15b262ab.css","/assets/PopupModal.5cad3434.js","/assets/PopupModal.153ad960.css"])},{path:"/admin/client",meta:{title:"Client"},component:()=>F((()=>__import__("./Client.3dceab5e.js")),["/assets/Client.3dceab5e.js","/assets/Client.ce1fe762.css","/assets/ConfirmDialogue.9510fbd6.js","/assets/ConfirmDialogue.15b262ab.css","/assets/PopupModal.5cad3434.js","/assets/PopupModal.153ad960.css","/assets/vendor.fe91043f.js","/assets/ckeditor.5faa1adb.js"])},{path:"/admin/insight/:id",meta:{title:"Insight Edit"},component:()=>F((()=>__import__("./InsightEdit.31d2cd35.js")),["/assets/InsightEdit.31d2cd35.js","/assets/ckeditor.5faa1adb.js","/assets/vendor.fe91043f.js"])},{path:"/admin/insight",meta:{title:"Insight"},component:()=>F((()=>__import__("./Insight.bc118014.js")),["/assets/Insight.bc118014.js","/assets/ConfirmDialogue.9510fbd6.js","/assets/ConfirmDialogue.15b262ab.css","/assets/PopupModal.5cad3434.js","/assets/PopupModal.153ad960.css","/assets/vendor.fe91043f.js","/assets/ckeditor.5faa1adb.js"])},{path:"/admin/contact",meta:{title:"Contact"},component:()=>F((()=>__import__("./Contact.326f0001.js")),["/assets/Contact.326f0001.js","/assets/vendor.fe91043f.js"])},{path:"/:path(.*)",component:U}];
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(t,e){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function H(t,e){function n(){this.constructor=t}B(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var z=function(){return(z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function W(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(W_){o(W_)}}function a(t){try{u(r.throw(t))}catch(W_){o(W_)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function K(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(W_){o=[6,W_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function G(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Q(arguments[e]));return t}function X(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=!1,$="${JSCORE_VERSION}",Z=function(t,e){if(!t)throw tt(e)},tt=function(t){return new Error("Firebase Database ("+$+") INTERNAL ASSERT FAILED: "+t)},et=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},nt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(et(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},rt=function(t){try{return nt.decodeString(t,!0)}catch(W_){console.error("base64Decode failed: ",W_)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function it(t){return ot(void 0,t)}function ot(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ot(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var st=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W_){return!1}}function ht(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ft(){return!0===J}function pt(){return"indexedDB"in self&&null!=indexedDB}function dt(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function vt(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,yt.prototype.create),o}return H(e,t),e}(Error),yt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?mt(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new gt(i,a,r);return u},t}();function mt(t,e){return t.replace(_t,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var _t=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return JSON.parse(t)}function wt(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=bt(rt(o[0])||""),n=bt(rt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(W_){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Et(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Tt(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function St(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ct(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nt=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function kt(t,e){var n=new At(t,e);return n.subscribe.bind(n)}var At=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Pt),void 0===r.error&&(r.error=Pt),void 0===r.complete&&(r.complete=Pt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(W_){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(W_){"undefined"!=typeof console&&console.error&&console.error(W_)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Pt(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Rt(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function Dt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Rt(t,e,r)+"must be a valid function.")}function xt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Rt(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Mt(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}var Ft=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Ut=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new st;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(W_){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=z({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(W_){if(r)return null;throw W_}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(W_){}try{for(var r=G(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Q(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(W_){}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return W(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Y(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Vt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ut(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function qt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ht,zt=[];(Ht=Bt||(Bt={}))[Ht.DEBUG=0]="DEBUG",Ht[Ht.VERBOSE=1]="VERBOSE",Ht[Ht.INFO=2]="INFO",Ht[Ht.WARN=3]="WARN",Ht[Ht.ERROR=4]="ERROR",Ht[Ht.SILENT=5]="SILENT";var Wt,Kt={debug:Bt.DEBUG,verbose:Bt.VERBOSE,info:Bt.INFO,warn:Bt.WARN,error:Bt.ERROR,silent:Bt.SILENT},Gt=Bt.INFO,Qt=((jt={})[Bt.DEBUG]="log",jt[Bt.VERBOSE]="log",jt[Bt.INFO]="info",jt[Bt.WARN]="warn",jt[Bt.ERROR]="error",jt),Yt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Qt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,qt(["["+i+"]  "+t.name+":"],n))}},Xt=function(){function t(t){this.name=t,this._logLevel=Gt,this._logHandler=Yt,this._userLogHandler=null,zt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Bt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Kt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,Bt.DEBUG],t)),this._logHandler.apply(this,qt([this,Bt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,Bt.VERBOSE],t)),this._logHandler.apply(this,qt([this,Bt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,Bt.INFO],t)),this._logHandler.apply(this,qt([this,Bt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,Bt.WARN],t)),this._logHandler.apply(this,qt([this,Bt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,qt([this,Bt.ERROR],t)),this._logHandler.apply(this,qt([this,Bt.ERROR],t))},t}();function Jt(t){zt.forEach((function(e){e.setLogLevel(t)}))}var $t,Zt=((Wt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Wt["bad-app-name"]="Illegal App name: '{$appName}",Wt["duplicate-app"]="Firebase App named '{$appName}' already exists",Wt["app-deleted"]="Firebase App named '{$appName}' already deleted",Wt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Wt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Wt),te=new yt("app","Firebase",Zt),ee="@firebase/app",ne=(($t={})[ee]="fire-core",$t["@firebase/analytics"]="fire-analytics",$t["@firebase/auth"]="fire-auth",$t["@firebase/database"]="fire-rtdb",$t["@firebase/functions"]="fire-fn",$t["@firebase/installations"]="fire-iid",$t["@firebase/messaging"]="fire-fcm",$t["@firebase/performance"]="fire-perf",$t["@firebase/remote-config"]="fire-rc",$t["@firebase/storage"]="fire-gcs",$t["@firebase/firestore"]="fire-fst",$t["fire-js"]="fire-js",$t["firebase-wrapper"]="fire-js-all",$t),re=new Xt("@firebase/app"),ie=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=it(t),this.container=new Vt(e.name),this._addComponent(new Ft("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(W_){re.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,W_)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw te.create("app-deleted",{appName:this.name_})},t}();ie.prototype.name&&ie.prototype.options||ie.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function oe(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw te.create("bad-app-name",{appName:String(s)});if(Et(e,s))throw te.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ne[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void re.warn(u.join(" "))}o(new Ft(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Jt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw te.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Kt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Bt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=zt;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Et(e,t=t||"[DEFAULT]"))throw te.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return re.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw te.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&ot(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se=function t(){var e=oe(ie);return e.INTERNAL=z(z({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ot(e,t)},createSubscribe:kt,ErrorFactory:yt,deepExtend:ot}),e}(),ae=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ue=self.firebase.SDK_VERSION;ue&&ue.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ce=se.initializeApp;se.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ct()&&re.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ce.apply(void 0,t)};var he,le,fe=se;(he=fe).INTERNAL.registerComponent(new Ft("platform-logger",(function(t){return new ae(t)}),"PRIVATE")),he.registerVersion(ee,"0.6.15",le),he.registerVersion("fire-js",""),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Qa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function T(t,e,n){this.code=N+t,this.message=e||k[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new T(e.substring(N.length),t.message,t.serverResponse):null}I(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var C,N="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function x(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,I(R,Error),R.prototype.name="CustomError",I(D,R),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new L((function(){return new V}),(function(t){t.reset()}));function j(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function V(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=q(t,e)}function G(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,$=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,tt=/</g,et=/>/g,nt=/"/g,rt=/'/g,it=/\x00/g,ot=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var ut=s.navigator;if(ut){var ct=ut.userAgent;if(ct){J=ct;break t}}J=""}function ht(t){return st(J,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ft(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===wt&&e||"",this.b=bt}function mt(t){return t instanceof yt&&t.constructor===yt&&t.b===bt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,bt={},wt={};function It(){if(void 0===_t){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){s.console&&s.console.error(n.message)}_t=t}else _t=t}return _t}function Et(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof Et&&t.constructor===Et?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=mt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Et(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?mt(t):encodeURIComponent(String(t))})))}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function At(t,e){this.a=e===Mt?t:""}function Pt(t){return t instanceof At&&t.constructor===At?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof At)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new At(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Ot.test(e[1])?new At(t,Mt):null}return t}function Lt(t){return t instanceof At?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new At(t,Mt))}var Mt={},Ft=new At("about:invalid#zClosurez",Mt);function Ut(t,e,n){this.a=n===jt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Vt(t,e,n,r){return t=t instanceof At?t:Lt(t),e=e||s,n=n instanceof yt?mt(n):n||"",e.open(Pt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(it,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=h;var zt,Wt,Kt=ht("Opera"),Gt=ht("Trident")||ht("MSIE"),Qt=ht("Edge"),Yt=Qt||Gt,Xt=ht("Gecko")&&!(st(J.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Jt=st(J.toLowerCase(),"webkit")&&!ht("Edge");function $t(){var t=s.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Wt=J,Xt?/rv:([^\);]+)(\)|;)/.exec(Wt):Qt?/Edge\/([\d\.]+)/.exec(Wt):Gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Jt?/WebKit\/(\S+)/.exec(Wt):Kt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(te&&(Zt=te?te[1]:""),Gt){var ee=$t();if(null!=ee&&ee>parseFloat(Zt)){zt=String(ee);break t}}zt=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=$(String(zt)).split("."),r=$(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=at(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||at(0==s[2].length,0==a[2].length)||at(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&Gt){var oe=$t();ne=oe||(parseInt(zt,10)||void 0)}else ne=void 0;var se=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var ae=!Gt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,le,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}B(s?X(o):o,r)}}}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){s.setTimeout((function(){throw t}),0)}function ye(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(be)}}else le=function(){var t=be;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),me||(le(),me=!0),_e.add(t,e)}var me=!1,_e=new F;function be(){for(var t;t=j();){try{t.a.call(t.b)}catch(e){ge(e)}M(U,t)}me=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Le(n,Ee,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(W_){}Le(n,Te,t)}))}catch(r){Le(this,Te,r)}}var Ie=0,Ee=2,Te=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new L((function(){return new Se}),(function(t){t.reset()}));function Ne(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof we)return t;var e=new we(h);return Le(e,Ee,t),e}function Ae(t){return new we((function(e,n){n(t)}))}function Pe(t,e,n){Me(t,e,n,null)||ye(b(e,t))}function Oe(t){return new we((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Pe(t[o],b(i,o,!0),b(i,o,!1));else e(r)}))}function Re(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ie&&1==r?Re(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),je(n,i,Te,e)))}t.c=null}else Le(t,Te,e)}function De(t,e){t.b||t.a!=Ee&&t.a!=Te||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Ne(null,null,null);return i.a=new we((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,De(t,i),i.a}function Le(t,e,n){t.a==Ie&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Te||n instanceof Be||function(t,e){t.g=!0,ye((function(){t.g&&qe.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof we)return De(t,Ne(e||h,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Fe(t){t.h||(t.h=!0,ye(t.gc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(W_){qe.call(null,W_)}M(Ce,e)}function Ve(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return xe(this,p(t)?t:null,p(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,De(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new Be(t);ye((function(){Re(this,e)}),this)}},t.$c=function(t){this.a=Ie,Le(this,Ee,t)},t.ad=function(t){this.a=Ie,Le(this,Te,t)},t.gc=function(){for(var t;t=Ue(this);)je(this,t,this.a,this.i);this.h=!1};var qe=ge;function Be(t){R.call(this,t)}function He(){this.xa=this.xa,this.pa=this.pa}I(Be,R),Be.prototype.name="cancel";function ze(t){!t.xa&&(t.xa=!0,t.Da(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t)}He.prototype.xa=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ke=!Gt||9<=Number(se),Ge=Gt&&!ie("9"),Qe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Xe,Ye);var Je=We({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var $e="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=_n(n),t&&t[$e]?wn(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=yn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=gn,e=Ke?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=_n(n),t&&t[$e]?In(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=_n(n),t&&t[$e]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[$e])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function gn(t,e){if(t.va)return!0;if(!Ke){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function yn(t){return(t=t[sn])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function bn(){He.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Sn(t){var e=null;return new we((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Cn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(bn,He),bn.prototype[$e]=!0,bn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;vt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=kn.prototype).W=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,xn(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),xn(this,n[4]),this.f=Vn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Dn(t,e,n){t.c=n?Vn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Kn)),t.b=new Qn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function jn(t,e,n,r){var i=new Rn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&xn(i,n),r&&(i.f=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Gn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)xn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Kn=/[#\?@]/g,Gn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Jn(t,e){Yn(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function $n(t,e){return Yn(t),e=er(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Yn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach((function(n,r){B(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Yn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Yn(this);var e=[];if("string"==typeof t)$n(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,$n(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return Gt&&!!se&&11==se||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(xt(t)||Ft)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||s.window;try{t.close()}catch(e){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Sr(kr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof At?n:xt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(gt(s=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof At?e:Lt(e),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Vt("",r,n,s),t=Pt(e),s&&(Yt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Ut(t=(r=It())?r.createHTML(t):t,null,jt),r=s.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Vt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new we((function(e){"complete"==s.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function mr(t){return t=t||kr(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function br(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return fe.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":fe.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function Ir(){var t=wr();return"ReactNative"===t||"Node"===t}var Er="Firefox",Tr="Chrome";function Sr(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?Er:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=kr()):"Worker"===r&&(r=Sr(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=s.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(n){return br()&&!!s.indexedDB}return!1}function Or(){return(Rr()||"chrome-extension:"===Dr()||mr())&&!Ir()&&Pr()&&!br()}function Rr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return s.location&&s.location.protocol||null}function xr(t){return!fr(t=t||kr())&&Sr(t)!=Er}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Hr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!Ar("fireauth.oauthhelper",s)&&!Ar("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Kr={};function Gr(t){Kr[t]||(Kr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(Wt){Wr=!1}function Yr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Jr(t){var e={};return Xr(e,t),e}function $r(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,$r(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ri]),Yr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Yr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[yi]=n||null,e[di]=r):(e[vi]=r||null,e[yi]=r||null,e[di]=n||null),e[gi]=t||null,Yr(this,_i,i),Yr(this,mi,$r(e))}I(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",gi="multiFactorInfo",yi="previousEmail",mi="data",_i="operation";function bi(t){var e=Fn(t=Un(t),wi)||null,n=Fn(t,Ii)||null,r=Fn(t,Si)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ii+"and "+Si+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ei)||null,languageCode:Fn(t,Ti)||null,tenantId:Fn(t,Ci)||null})}var wi="apiKey",Ii="oobCode",Ei="continueUrl",Ti="languageCode",Si="mode",Ci="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new bi(t)}catch(e){return null}}function Ai(t){var e=t[xi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",xi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Bi(t)}catch(e){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ki=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Ki},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Ki},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Ki},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Qi(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Yi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Ji];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Xi])return new $i(t)}catch(r){}return null}var Xi="idToken",Ji="providerId";function $i(t){var e=t[Ji];if(!e&&t[Xi]){var n=Hi(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){$i.call(this,t),Yr(this,"profile",$r((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}I(Zi,$i),I(to,Zi),I(eo,Zi),I(no,Zi),I(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[$s]){var n=Hi(t[$s]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new T("user-mismatch"):t}))}function ho(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function yo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Qi(t)||{}).Ja||null,this.ob=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function _o(t){yo.call(this,t,Ki),this.a=[]}function bo(){_o.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function Io(){_o.call(this,"github.com")}function Eo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function To(){_o.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){yo.call(this,"twitter.com",Wi)}function No(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Po(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Ro(e)))throw new T("argument-error","Invalid email link!");return new ko(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=ki(t=io(t)))&&t.operation===ui?t:null}function Do(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new T("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function xo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||fe.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Do({eb:t,cb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return Eo(n);case"twitter.com":return No(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?ke(this.a):ke(this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return ba(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,wa(t,n)},ho.prototype.c=function(t,e){return co(Ia(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ba(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,wa(t,n)},po.prototype.c=function(t,e){return co(Ia(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Ib=pt(t),this},I(mo,yo),I(_o,yo),_o.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},_o.prototype.Qb=function(){return X(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},I(bo,_o),Yr(bo,"PROVIDER_ID","facebook.com"),Yr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(Io,_o),Yr(Io,"PROVIDER_ID","github.com"),Yr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),I(To,_o),Yr(To,"PROVIDER_ID","google.com"),Yr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Co,yo),Yr(Co,"PROVIDER_ID","twitter.com"),Yr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Pa,{email:this.a,oobCode:this.f}):ru(t,$a,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,za,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Po,{PROVIDER_ID:"password"}),Xr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ka=function(t){return t.fb(Lo(this))},Do.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Do.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then((function(t){return function(t,e){return ru(t,Ka,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(e){return function(t,e){return ru(t,Ga,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Ko(t,e,n){T.call(this,t,n),(t=e||{}).Jb&&Yr(this,"email",t.Jb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Zb&&Yr(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Uo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Ko(e,n,t.message)}return null}function Qo(){}function Yo(t){return t.c||(t.c=t.b())}function Xo(){}function Jo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(W_){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function $o(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}I(Wo,T),I(Ko,T),Ko.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Ko.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,I(Xo,Qo),Xo.prototype.a=function(){var t=Jo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Jo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Xo,I($o,Qo),$o.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(x("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function ls(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(ps,Qo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),I(ds,bn);var vs=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ys(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _s(t){bn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ys(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ys(this):ms(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ys(this))},t.sc=function(t){this.a&&(this.response=t,ys(this))},t.Ua=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ys(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(_s,bn);var bs="";_s.prototype.b=ls("goog.net.XhrIo");var ws=/^https?$/i,Is=["POST","PUT"];function Es(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=t.D?Yo(t.D):Yo(Ho),t.a.onreadystatechange=_(t.Vb,t);try{fs(t.b,Rs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return fs(t.b,Rs(t,"Error opening Xhr: "+a.message)),void Ss(t,a)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)B(t,e,void 0);else for(var n=Nn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!K(Is,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{As(t),0<t.g&&(t.u=function(t){return Gt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,Rs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),fs(t.b,Rs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){fs(t.b,Rs(t,"Send error: "+a.message)),Ss(t,a)}}function Ts(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Cs(t),ks(t)}function Cs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ps(t)&&2==Os(t))fs(t.b,Rs(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))Tn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){fs(t.b,Rs(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(On)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ws.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ps(t)?t.a.statusText:""}catch(h){fs(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Os(t)+"]",Cs(t)}}finally{ks(t)}}}function ks(t,e){if(t.a){As(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(W_){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+W_.message,void 0)}}}function As(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ps(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Ps(t)?t.a.status:-1}catch(e){return-1}}function Rs(t,e){return e+" ["+t.R+" "+t.l+" "+Os(t)+"]"}function Ds(t){var e=zs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function xs(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ls(t){if(t.a){if(!t.v)throw new js(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function Fs(t){return W(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Ds?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),Bs[e.a]=e,t.h=e.a)}function js(){R.call(this)}function Vs(){R.call(this)}function qs(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=_s.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,Rs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,Rs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ks(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ks(this,!0)),_s.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ns(this):this.Jc())},t.Jc=function(){Ns(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fs(this.b,"Can not get response: "+e.message),null}},Ds.prototype.cancel=function(t){if(this.a)this.c instanceof Ds&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Vs(this),Ls(this),xs(this,!1,t))}},Ds.prototype.m=function(t,e){this.i=!1,xs(this,t,e)},Ds.prototype.then=function(t,e,n){var r,i,o=new we((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof Vs?o.cancel():i(t)})),o.then(t,e,n)},Ds.prototype.$goog_Thenable=!0,I(js,R),js.prototype.message="Deferred has already fired",js.prototype.name="AlreadyCalledError",I(Vs,R),Vs.prototype.message="Deferred was canceled",Vs.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Hs(t){var e,n=document,r=Tt(t).toString(),i=ve(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Ds(o);return e=window.setTimeout((function(){Ws(i,!0);var t=new Qs(Gs,"Timeout reached for loading script "+r);Ls(a),xs(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ws(i,!1,e),Ls(a),xs(a,!0,null))},i.onerror=function(){Ws(i,!0,e);var t=new Qs(Ks,"Error while loading script "+r);Ls(a),xs(a,!1,t)},vt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){gt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function zs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ws(t,!0,this.Ma)}}function Ws(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ks=0,Gs=1;function Qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Ys(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=pt(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=pt(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&fe.INTERNAL.node&&fe.INTERNAL.node.XMLHttpRequest)&&!br())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new ps(self):Ir()?this.f=new Ys(n):this.f=new $o,this.b=null}I(Qs,R),I(Ys,Qo),Ys.prototype.a=function(){return new this.f},Ys.prototype.b=function(){return{}};var Js,$s="idToken",Zs=new qr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new qr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,xn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=Sr(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Gt&&se&&!(9<se))})()||br()?t=_(t.u,t):(Js||(Js=new we((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Hs(St(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _s(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}wn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),In(a,"ready",(function(){u&&clearTimeout(u),ze(this)})),In(a,"timeout",(function(){u&&clearTimeout(u),ze(this),e&&e(null)})),Es(a,t,n,r,i)};var ua=new yt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t,e,n,r,i,o,s){var a=Un(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new we((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function la(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&la(t)}function pa(t){if(!t[$s]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,pt(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Js.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.zb=function(){return ru(this,Wa,{})},Xs.prototype.Bb=function(t,e){return ru(this,Ha,{idToken:t,email:e})},Xs.prototype.Cb=function(t,e){return ru(this,za,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ya(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ma(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&($n(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function _a(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function ba(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Xa,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ya,e)}function Ea(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Xs.prototype).Db=function(t,e){var n={idToken:t},r=[];return lt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ha,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Ua,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.fb=function(t){return ru(this,Za,t)},t.nb=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Sa,{oobCode:t})},t.jb=function(t){return ru(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:Ea,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ea,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},Na={endpoint:"createAuthUri",B:!0},ka={endpoint:"deleteAccount",N:["idToken"]},Aa={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Pa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:la,G:pa,V:!0,B:!0},Oa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:la,G:pa,V:!0},Ra={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},xa={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",B:!0},ja={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Va={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},qa={endpoint:"resetPassword",A:Ea,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ha={endpoint:"setAccountInfo",N:["idToken"],A:fa,V:!0},za={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0},Wa={endpoint:"signupNewUser",G:pa,V:!0,B:!0},Ka={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ga={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:ya,Ya:ma,G:_a,V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:ya,Ya:ma,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ya(t),!t.idToken)throw new T("internal-error")},Ya:ma,G:_a,V:!0},Ja={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},$a={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);pa(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[$s]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ae(new T("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return ke(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ha(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new we((function(t,e){function n(){Vr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:uu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},ke(Hs(r=St(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new we((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new yt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=jn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return fe.app(t).auth().Ga()}catch(e){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(cr())}))}function gu(t){return t.m||(t.m=yr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.m}function yu(t){return t.l||(t.C=t.c?Nr(t.c,pu(t.b)):null,t.l=new Xs(t.g,P(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=pt(u||null),t.f=c,t.yb(h).toString()}function _u(t){if(this.a=t||fe.INTERNAL.reactNative&&fe.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=_(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=jn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=fe.app(this.c).auth().la()}catch(a){n=null}for(var r in e.ob=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ft(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Jn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):Jn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Jn(t.b,"eid"),(s=pu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new we((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new we((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Sn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=kr();return!xr(t)&&!jr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new T("popup-blocked"));if(s&&!xr())return this.ma().o((function(e){pr(t),i(e)})),r(),ke();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(jo(n),s)||hr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){jo(e),hr(mu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Q(this.h,(function(e){return e==t}))},(t=_u.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return ke(this.a.setItem(t,Lr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Eu(t,e,n){ft(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Q(t.a,(function(t){return t==e}))}}function ku(){if(!Ru())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(B(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Iu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&B(t.a,(function(t){t(e)})),{keyProcessed:K(e,n.key)}}))})),Eu(this.v,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Tu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Au(t){return new we((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Au(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=Au(t)),t.i}function Ou(t,e){var n=0;return new we((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!s.indexedDB}catch(Wt){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new we((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Fu(t){return Pu(t).then((function(t){var e=Du(xu(t,!1));return e.getAll?Lu(e.getAll()):new we((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Ru()){var t=Ur(),r="__sak"+t;return wu||(wu=new ku),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){B(e.a,(function(e){e(t)}))})),t}))}function Vu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==wr();if(!(t=Bu()||t&&fe.INTERNAL.node&&fe.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||fe.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){this.type="nullStorage"}function zu(){if(!function(){var t="Node"==wr();if(!(t=Wu()||t&&fe.INTERNAL.node&&fe.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Wu()||fe.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var t=s.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ku(){var t={};t.Browser=Yu,t.Node=Xu,t.ReactNative=Ju,t.Worker=$u,this.a=t[wr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];B(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),B(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Du(xu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Du(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Du(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Du(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&B(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t}))},(t=Vu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return ke().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&ln(s.window,"storage",t)},(t=Hu.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=zu.prototype).get=function(t){var e=this;return ke().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Qu,Yu={F:qu,bb:zu},Xu={F:qu,bb:zu},Ju={F:_u,bb:Hu},$u={F:qu,bb:Hu},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(jr(kr())||!_r()),e=xr(),n=Pr();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new Ku),t=Gu;try{this.g=!ur()&&zr()||!s.indexedDB?new t.a.F:new ju(br()?new Vu:new t.a.F)}catch(r){this.g=new Vu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Vu}this.v=new Vu,this.f=_(this.Yb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ft(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!zr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(Q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ft(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Gt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&B(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(mc):mc),this.reset()}I(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Y(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _c(){hc.call(this,8,bc)}I(_c,hc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Ec(t){var e=new _c;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new we((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?S(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new Vo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Sn(500).then((function(){return Cc(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},zo||(zo=new Bo),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?yr().then((function(){return new we((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Ob=function(t,e){return e(new T("operation-not-supported-in-this-environment")),ke()},t.Mb=function(){return Ae(new T("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ae(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=ke().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Vo(e,r,null,o,new T("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",s),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!kr().toLowerCase().match(/android/))return Ae(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ec(o),h.sessionId=o;var l=mu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=kr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new we((function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Sn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Sa=function(t){Q(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Ac(t){return ic(t.b,kc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Wc,this.C=new Xc,this.g=new Nc(Hc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,C,this.J)}function Oc(t,e,n,r,i){var o=fe.SDK_VERSION||null;return mr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Dc(t){t.a.Xb()&&Rc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Tb()||Kc(t.b)}function xc(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){Rc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Dc(t)})).o((function(){Dc(t)}))}function Lc(t,e){Q(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=w()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=w())),e=!0;break}}return Kc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new we((function(){})):Ac(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Pc.prototype.qa=function(){return this.b.qa()};var Bc={};function Hc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function zc(t,e,n,r){var i=Hc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Wc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Kc(t){t.g||(t.g=!0,Yc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Yc(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Jc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function $c(t,e){this.a=e,Yr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).fb(e,n).then((function(t){return new $c(t,r)}))}function th(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Hr(1e3*e.exp),authTime:Hr(1e3*e.auth_time),issuedAtTime:Hr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;B(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}Wc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Wc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Yc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Yc(t,a,e,null)})).o((function(e){Yc(t,a,null,e)}))}(this,t,e):Ae(new T("invalid-auth-event")):(Yc(this,!1,null,null),ke())}else Ae(new T("invalid-auth-event"))},Wc.prototype.qa=function(){var t=this;return new we((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Sn(Fc.get()).then((function(){t.b||(t.g=!0,Yc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ae(new T("invalid-auth-event"))}else Ae(new T("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Yr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(r){}return null}function sh(){}function ah(t){Yr(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Br()||!t?ke():new we((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gh(t,e){t.b=Hi(e[$s]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function yh(t,e){return function(t,e){return new we((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function mh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Hr(e||null),creationTime:Hr(t||null)})}function _h(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=fe.SDK_VERSION?Nr(fe.SDK_VERSION):null;this.a=new Xs(this.l,P(C),r),t.emulatorConfig&&ia(this.a,t.emulatorConfig),this.b=new dh(this.a),kh(this,e[$s]),gh(this.b,e),Yr(this,"refreshToken",this.b.a),Oh(this,n||{}),bn.call(this),this.R=!1,this.s&&Or()&&(this.i=zc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ia(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Eh(i,t.f)},this.ba=null,this.O=new hh(this,n),Yr(this,"multiFactor",this.O)}function wh(t,e){t.ja&&ln(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function Ih(t,e){t.X&&ln(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function Eh(t,e){t.$=e,sa(t.a,fe.SDK_VERSION?Nr(fe.SDK_VERSION,t.$):null)}function Th(t,e){t.ba&&ln(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function Sh(t){try{return fe.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ch(t){t.D||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function Nh(t){ln(t,"tokenChanged",t.aa),t.u.stop()}function kh(t,e){t.za=e,Yr(t,"_lat",e)}function Ah(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Oe(e).then((function(){return t}))}function Ph(t){t.i&&!t.R&&(t.R=!0,xc(t.i,t))}function Oh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rh(){}function Dh(t){return ke().then((function(){if(t.D)throw new T("app-deleted")}))}function xh(t){return z(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){Q(t.providerData,(function(t){return t.providerId==e}))}function Fh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Uh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Yr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Yr(t,"metadata",new mh),B(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Yr(t,"refreshToken",t.b.a),lh(t.O,e.O.b))}function jh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xa,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Fh(t,"isAnonymous",!1),e}))}))}function Vh(t,e){e[$s]&&t.za!=e[$s]&&(gh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),kh(t,e[$s]),Fh(t,"refreshToken",t.b.a))}function qh(t,e){return jh(t).then((function(){if(K(xh(t),e))return Ah(t).then((function(){throw new T("provider-already-linked")}))}))}function Bh(t,e,n){return Jr({user:t,credential:Uo(e),additionalUserInfo:e=Yi(e),operationType:n})}function Hh(t,e){return Vh(t,e),t.reload().then((function(){return t}))}function zh(t,e,n,r,i){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=Qi(n.providerId),s=Ur(t.uid+":::"),a=null;(!xr()||_r())&&t.s&&n.isOAuthProvider&&(a=mu(t.s,t.l,t.m,e,n,null,s,fe.SDK_VERSION||null,null,null,t.tenantId));var u=dr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Kh(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new we((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=qc(t.i,t,e,u,s)}))})).then((function(t){return u&&pr(u),t?Jr(t):null})).o((function(t){throw u&&pr(u),t})),Gh(t,r,i)}function Wh(t,e,n,r,i){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=null,s=Ur(t.uid+":::");return r=r().then((function(){if(Kh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Ah(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jh(t.ha);throw o})).then((function(){if(o)throw o})),Gh(t,r,i)}function Kh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Gh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ae(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ch("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){G(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Sh(t),_(t.jc,t))),n||e}))}function Qh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[$s]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bh(e,n,t);return t.providerData&&B(t.providerData,(function(t){t&&Lh(i,Jr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Yh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[nh],delete n[rh],vt(n,t),e.g(n)}))},I(ih,T),sh.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Ra,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Da,n)}))}(this,t,e)},I(ah,sh),I(uh,ah),I(ch,Ye),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return B(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Vh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return lh(e,r),Vh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?yh(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(bh,bn),bh.prototype.wa=function(t){this.ya=t,ra(this.a,t)},bh.prototype.la=function(){return this.ya},bh.prototype.Ga=function(){return X(this.$)},bh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(bh.prototype,"providerId","firebase"),(t=bh.prototype).reload=function(){var t=this;return Gh(this,Dh(this).then((function(){return jh(t).then((function(){return Ah(t)})).then(Rh)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return Gh(this,Dh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.za&&(kh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Fh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new _h(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Fh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Gh(this,t.c(this.a,this.uid).then((function(t){return Vh(e,t),n=Bh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Gh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Hh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Gh(this,qh(this,"phone").then((function(){return Zc(Sh(n),t,e,_(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Gh(this,ke().then((function(){return Zc(Sh(n),t,e,_(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Gh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Gh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Gh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dh(this);var e=this;return Gh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vh(e,t),Fh(e,"displayName",t.displayName||null),Fh(e,"photoURL",t.photoUrl||null),B(e.providerData,(function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))})),Ah(e)})).then(Rh))},t.cd=function(t){var e=this;return Gh(this,jh(this).then((function(n){return K(xh(e),t)?function(t,e,n){return ru(t,Aa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return B(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),B(xh(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),Ah(e)})):Ah(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Gh(this,this.I().then((function(e){return ru(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");wh(t,null),Ih(t,null),Th(t,null),t.J=[],t.D=!0,Nh(t),Yr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return zh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return Ah(e)}))}),!1)},t.Nc=function(t){return zh(this,"reauthViaPopup",t,(function(){return ke()}),!0)},t.Fc=function(t){var e=this;return Wh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Oc=function(t){return Wh(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Gh(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Hh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Gh(this,ke().then((function(){return co(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),Vh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Gh(this,this.I().then((function(e){return n=e,void 0===t||ft(t)?{}:ji(new Ai(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Gh(this,this.I().then((function(t){return r=t,void 0===e||ft(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Gh(this,t=co(ke(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),Vh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),B(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Jh(t){return ic(t.b,Xh,t.a)}function $h(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=el("local"),n=el("session"),r=el("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Fr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tl,t.a).then((function(t){return t?el(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(el("local"),this.a,_(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,el(Zu[n]),t.a));return r.push(ic(t.b,tl,t.a)),function(t){return new we((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Pe(t[a],b(o,a),s);else e(i)}))}(r)}$h.prototype.g=function(){var t=this,e=el("local");ol(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tl={name:"persistence",F:"session"};function el(t){return{name:"authUser",F:t}}function nl(t,e){return ol(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rl(t){return ol(t,(function(){return ic(t.b,t.c,t.a)}))}function il(t,e,n){return ol(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Qh(t||{})}))}))}function ol(t,e){return t.f=t.f.then(e,e),t.f}function sl(t){if(this.l=!1,Yr(this,"settings",new Jc),Yr(this,"app",t),!vl(this).options||!vl(this).options.apiKey)throw new T("invalid-api-key");t=fe.SDK_VERSION?Nr(fe.SDK_VERSION):null,this.a=new Xs(vl(this).options&&vl(this).options.apiKey,P(C),t),this.R=[],this.s=[],this.O=[],this.hb=fe.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=fe.INTERNAL.createSubscribe(_(this.Ac,this)),pl(this,null),this.i=new $h(vl(this).options.apiKey+":"+vl(this).name),this.D=new Yh(vl(this).options.apiKey+":"+vl(this).name),this.$=_l(this,function(t){var e=vl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Qh(t||{})}))}(t.D,vl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jh(t.D)}));return _l(t,e)}(t).then((function(){return il(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rl(t.i)}))):null})).then((function(e){pl(t,e||null)}));return _l(t,n)}(this)),this.h=_l(this,function(t){return t.$.then((function(){return ll(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(el("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=vl(t).options.authDomain,n=vl(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=zc(e,n,vl(t).name,t.P),xc(t.b,t),gl(t)&&Ph(gl(t)),t.m){Ph(t.m);var r=t.m;r.wa(t.la()),wh(r,t),Eh(r=t.m,t.J),Th(r,t),ia((r=t.m).a,t.P),Ih(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Un(this.P.url);t=Jr({protocol:t.c,host:t.a,port:t.g,options:Jr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function al(t){Ye.call(this,"languageCodeChanged"),this.h=t}function ul(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function cl(t){Ye.call(this,"frameworkChanged"),this.f=t}function hl(t){return t.Oa||Ae(new T("auth-domain-config-required"))}function ll(t){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));var e=hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Jr(t):null}));return _l(t,e)}function fl(t,e){var n={};return n.apiKey=vl(t).options.apiKey,n.authDomain=vl(t).options.authDomain,n.appName=vl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new bh(t,e);return n&&(i.ha=n),r&&Eh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return gl(t)&&e.uid==gl(t).uid?(Uh(gl(t),e),t.da(e)):(pl(t,e),Ph(e),t.da(e))})).then((function(){ml(t)}))}function pl(t,e){gl(t)&&(function(t,e){Q(t.S,(function(t){return t==e}))}(gl(t),t.Ba),ln(gl(t),"tokenChanged",t.ya),ln(gl(t),"userDeleted",t.za),ln(gl(t),"userInvalidated",t.Aa),Nh(gl(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Ch(e)),Yr(t,"currentUser",e),e&&(e.wa(t.la()),wh(e,t),Eh(e,t.J),Th(e,t),ia(e.a,t.P),Ih(e,t))}function dl(t,e){var n=null,r=null;return _l(t,e.then((function(e){return n=Uo(e),r=Yi(e),fl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return Jr({user:gl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vl(t){return t.app}function gl(t){return t.currentUser}function yl(t){return gl(t)&&gl(t)._lat||null}function ml(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](yl(t))}}function _l(t,e){return t.R.push(e),e.oa((function(){G(t.R,e)})),e}function bl(){}function wl(){this.a={},this.b=1e12}$h.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),ol(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=el(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},I(sl,bn),I(al,Ye),I(ul,Ye),I(cl,Ye),(t=sl.prototype).xb=function(t){return _l(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new al(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&yr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ia(this.a,this.P),this.dispatchEvent(new ul(this.P))}},t.Gc=function(t){this.J.push(t),sa(this.a,fe.SDK_VERSION?Nr(fe.SDK_VERSION,this.J):null),this.dispatchEvent(new cl(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:vl(this).options.apiKey,authDomain:vl(this).options.authDomain,appName:vl(this).name,currentUser:gl(this)&&gl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return dl(i,ba(i.a,o))}))},t.Xc=function(t){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),r=Ur(),i=null;(!xr()||_r())&&vl(this).options.authDomain&&t.isOAuthProvider&&(i=mu(vl(this).options.authDomain,vl(this).options.apiKey,vl(this).name,"signInViaPopup",t,null,r,fe.SDK_VERSION||null,null,null,this.T(),this.P));var o=dr(i,n&&n.ua,n&&n.ta);return _l(this,n=hl(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new we((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Jr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));var e=this;return _l(this,hl(this).then((function(){return function(t){return ol(t,(function(){return t.b.set(tl,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return ll(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},t.dd=function(t){if(!t)return Ae(new T("null-user"));if(this.S!=t.tenantId)return Ae(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=vl(this).options.apiKey,n.authDomain=vl(this).options.authDomain,n.appName=vl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[$s]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new bh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Eh(e,r),Uh(e,t),e}(t,n,e.D,e.Ga());return _l(this,this.h.then((function(){if(vl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return gl(e)&&t.uid==gl(e).uid?(Uh(gl(e),t),e.da(t)):(pl(e,r),Ph(r),e.da(r))})).then((function(){ml(e)})))},t.Ab=function(){var t=this;return _l(this,this.h.then((function(){return t.b&&Gc(t.b.b),gl(t)?(pl(t,null),rl(t.i).then((function(){ml(t)}))):ke()})))},t.Zc=function(){var t=this;return il(this.i,vl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=gl(t)&&e){n=gl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uh(gl(t),e),gl(t).I();(gl(t)||e)&&(pl(t,e),e&&(Ph(e),e.ha=t.D),t.b&&xc(t.b,t),ml(t))}}))},t.da=function(t){return nl(this.i,t)},t.mc=function(){ml(this),this.da(gl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return dl(e,ke(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(gl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),_l(t,t.h.then((function(){!t.l&&K(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(yl(t)))})))}(this,(function(){t.next(gl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(gl(r)):"function"==typeof t.next&&t.next(gl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(gl(r)):"function"==typeof t.next&&t.next(gl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return _l(this,this.h.then((function(){return gl(e)?gl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return dl(e,ru(e.a,Ja,{token:t}))})).then((function(t){var n=t.user;return Fh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return dl(n,ru(n.a,$a,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return dl(n,ru(n.a,Ca,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return dl(e,t.ka(e.a))}))},t.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=gl(t);if(e&&e.isAnonymous){var n=Jr({providerId:null,isNewUser:!1});return Jr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return dl(t,t.a.zb()).then((function(e){var n=e.user;return Fh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return gl(this)&&gl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&gl(this)&&Ch(gl(this))},t.Pc=function(t){var e=this;B(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&gl(this)&&Nh(gl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),_l(this,this.h.then((function(){e.l||K(e.s,t)&&t(yl(e))})))},t.removeAuthTokenListener=function(t){Q(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(el("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return _l(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.wb=function(t,e){var n=this;return _l(this,ke().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return ji(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return _l(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return _l(this,this.a.Ra(t).then((function(t){return new si(t)})))},t.jb=function(t){return _l(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return _l(this,ke().then((function(){return void 0===e||ft(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return _l(this,Zc(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return _l(this,ke().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=Ro(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.$a(i)})))},bl.prototype.render=function(){},bl.prototype.reset=function(){},bl.prototype.getResponse=function(){},bl.prototype.execute=function(){};var Il=null;function El(t,e){return(e=Tl(e))&&t.a[e]||null}function Tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function kl(){}wl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},wl.prototype.reset=function(t){var e=El(this,t);t=Tl(t),e&&t&&(e.delete(),delete this.a[t])},wl.prototype.getResponse=function(t){return(t=El(this,t))?t.getResponse():null},wl.prototype.execute=function(t){(t=El(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Cl(this),this.b},Sl.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Yr(Nl,"FACTOR_ID","phone"),kl.prototype.g=function(){return Il||(Il=new wl),ke(Il)},kl.prototype.c=function(){};var Al=null;function Pl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new yt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rl=new qr(3e4,6e4);Pl.prototype.g=function(t){var e=this;return new we((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Rl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},ke(Hs(St(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Dl=null;function xl(t,e,n,r,i,o,a){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Al||(Al=new kl),a=Al):(Dl||(Dl=new Pl),a=Dl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fl])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ul],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ll];this.a[Ll]=function(t){if(jl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,s);"function"==typeof e&&e(t)}};var h=this.a[Ml];this.a[Ml]=function(){if(jl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ar(h,s);"function"==typeof t&&t()}}}var Ll="callback",Ml="expired-callback",Fl="sitekey",Ul="size";function jl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Vl(t,e){return t.h.push(e),e.oa((function(){G(t.h,e)})),e}function ql(t){if(t.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||fe.app()}catch(s){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=fe.SDK_VERSION?Nr(fe.SDK_VERSION,o):null,xl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,P(C),r)}function Hl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=zl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=zl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=xl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vl(this,ke().then((function(){if(Rr()&&!br())return yr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Va,{})})).then((function(e){t.a[Fl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return Vl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ve(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return Vl(this,this.render().then((function(e){return new we((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Bl,xl);var zl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Wl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Ql(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Yl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function $l(t){return d(t)&&"string"==typeof t.uid}function Zl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function tf(t,e){for(var n in e){var r=e[n].name;t[r]=rf(r,t[n],e[n].j)}}function ef(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b((function(t){return this[t]}),n),set:b((function(t,e,n,r){Hl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function nf(t,e,n,r){t[e]=rf(e,n,r)}function rf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Hl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}tf(sl.prototype,{jb:{name:"applyActionCode",j:[Wl("code")]},Ra:{name:"checkActionCode",j:[Wl("code")]},nb:{name:"confirmPasswordReset",j:[Wl("code"),Wl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Wl("email"),Wl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Wl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Wl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zl(Gl(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zl(Gl(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Wl("email"),Zl(Gl("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Wl("email"),Gl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Wl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Xl()]},Tc:{name:"signInWithCustomToken",j:[Wl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Wl("email"),Wl("password")]},Vc:{name:"signInWithEmailLink",j:[Wl("email"),Wl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Wl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Zl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof bh)}},Yl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Wl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Wl("url"),Gl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Wl("code")]}}),ef(sl.prototype,{lc:{name:"languageCode",kb:Zl(Wl(),Yl(),"languageCode")},ti:{name:"tenantId",kb:Zl(Wl(),Yl(),"tenantId")}}),sl.Persistence=Zu,sl.Persistence.LOCAL="local",sl.Persistence.SESSION="session",sl.Persistence.NONE="none",tf(bh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xl()]},qb:{name:"linkWithCredential",j:[Xl()]},Dc:{name:"linkWithPhoneNumber",j:[Wl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xl()]},tb:{name:"reauthenticateWithCredential",j:[Xl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Wl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Zl(Gl("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Wl(null,!0)]},cd:{name:"unlink",j:[Wl("provider")]},Bb:{name:"updateEmail",j:[Wl("email")]},Cb:{name:"updatePassword",j:[Wl("password")]},ed:{name:"updatePhoneNumber",j:[Xl("phone")]},Db:{name:"updateProfile",j:[Gl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Wl("email"),Zl(Gl("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]}}),tf(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(bl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ef(Jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Kl("appVerificationDisabledForTesting")}}),tf($c.prototype,{confirm:{name:"confirm",j:[Wl("verificationCode")]}}),nf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Ao,xo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zl(Wl(),Gl(),"json")]),nf(Po,"credential",(function(t,e){return new ko(t,e)}),[Wl("email"),Wl("password")]),tf(ko.prototype,{w:{name:"toJSON",j:[Wl(null,!0)]}}),tf(bo.prototype,{Ca:{name:"addScope",j:[Wl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),nf(bo,"credential",wo,[Zl(Wl(),Gl(),"token")]),nf(Po,"credentialWithLink",Oo,[Wl("email"),Wl("emailLink")]),tf(Io.prototype,{Ca:{name:"addScope",j:[Wl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),nf(Io,"credential",Eo,[Zl(Wl(),Gl(),"token")]),tf(To.prototype,{Ca:{name:"addScope",j:[Wl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),nf(To,"credential",So,[Zl(Wl(),Zl(Gl(),Yl()),"idToken"),Zl(Wl(),Yl(),"accessToken",!0)]),tf(Co.prototype,{Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),nf(Co,"credential",No,[Zl(Wl(),Gl(),"token"),Wl("secret",!0)]),tf(_o.prototype,{Ca:{name:"addScope",j:[Wl("scope")]},credential:{name:"credential",j:[Zl(Wl(),Zl(Gl(),Yl()),"optionsOrIdToken"),Zl(Wl(),Yl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),tf(po.prototype,{w:{name:"toJSON",j:[Wl(null,!0)]}}),tf(ho.prototype,{w:{name:"toJSON",j:[Wl(null,!0)]}}),nf(Mo,"credential",Fo,[Wl("verificationId"),Wl("verificationCode")]),tf(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Zl(Wl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jl(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jl(t.session,ao)&&$l(t.multiFactorHint):t.session&&t.multiFactorUid?Jl(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),tf(Do.prototype,{w:{name:"toJSON",j:[Wl(null,!0)]}}),tf(T.prototype,{toJSON:{name:"toJSON",j:[Wl(null,!0)]}}),tf(Ko.prototype,{toJSON:{name:"toJSON",j:[Wl(null,!0)]}}),tf(Wo.prototype,{toJSON:{name:"toJSON",j:[Wl(null,!0)]}}),tf(ih.prototype,{toJSON:{name:"toJSON",j:[Wl(null,!0)]}}),tf(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),tf(hh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Wl("displayName",!0)]},bd:{name:"unenroll",j:[Zl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:$l},Wl(),"multiFactorInfoIdentifier")]}}),tf(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(bi,"parseLink",ki,[Wl("link")]),nf(Nl,"assertion",(function(t){return new uh(t)}),[Xl("phone")]),function(){if(void 0===fe||!fe.INTERNAL||!fe.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:sl,AuthCredential:uo,Error:T};nf(t,"EmailAuthProvider",Po,[]),nf(t,"FacebookAuthProvider",bo,[]),nf(t,"GithubAuthProvider",Io,[]),nf(t,"GoogleAuthProvider",To,[]),nf(t,"TwitterAuthProvider",Co,[]),nf(t,"OAuthProvider",_o,[Wl("providerId")]),nf(t,"SAMLAuthProvider",mo,[Wl("providerId")]),nf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof sl)}}]),nf(t,"RecaptchaVerifier",Bl,[Zl(Wl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof fe.app.App)}}]),nf(t,"ActionCodeURL",bi,[]),nf(t,"PhoneMultiFactorGenerator",Nl,[]),fe.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new sl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),fe.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),fe.registerVersion("@firebase/auth","0.16.4"),fe.INTERNAL.extendNamespace({User:bh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pe,de=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),wt(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:bt(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),ve=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Et(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),ge=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new de(e)}}catch(W_){}return new ve},ye=ge("localStorage"),me=ge("sessionStorage"),_e=new Xt("@firebase/database"),be=(pe=1,function(){return pe++}),we=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,Z(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Nt;n.update(e);var r=n.digest();return nt.encodeByteArray(r)},Ie=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Ie.apply(null,i):n+="object"==typeof i?wt(i):i,n+=" "}return n},Ee=null,Te=!0,Se=function(t,e){Z(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(_e.logLevel=Bt.VERBOSE,Ee=_e.log.bind(_e),e&&me.set("logging_enabled",!0)):"function"==typeof t?Ee=t:(Ee=null,me.remove("logging_enabled"))},Ce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Te&&(Te=!1,null===Ee&&!0===me.get("logging_enabled")&&Se(!0)),Ee){var n=Ie.apply(null,t);Ee(n)}},Ne=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ce.apply(void 0,Y([t],e))}},ke=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ie.apply(void 0,Y(t));_e.error(n)},Ae=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ie.apply(void 0,Y(t));throw _e.error(n),new Error(n)},Pe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ie.apply(void 0,Y(t));_e.warn(n)},Oe=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Re="[MIN_NAME]",De="[MAX_NAME]",xe=function(t,e){if(t===e)return 0;if(t===Re||e===De)return-1;if(e===Re||t===De)return 1;var n=Be(t),r=Be(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Le=function(t,e){return t===e?0:t<e?-1:1},Me=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wt(e))},Fe=function(t){if("object"!=typeof t||null===t)return wt(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=wt(e[i]),r+=":",r+=Fe(t[e[i]]);return r+="}"},Ue=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Ve=function(t){Z(!Oe(t),"Invalid JSON number");var e,n,r,i,o,s=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),s))+s,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},qe=new RegExp("^-?(0*)\\d{1,10}$"),Be=function(t){if(qe.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},He=function(t){try{t()}catch(W_){setTimeout((function(){var e=W_.stack||"";throw Pe("Exception was thrown by user callback.",e),W_}),Math.floor(0))}},ze=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},We=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function Ke(){return new We("")}function Ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qe(t){return t.pieces_.length-t.pieceNum_}function Ye(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new We(t.pieces_,e)}function Xe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Je(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function $e(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Ze(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new We(e,0)}function tn(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof We)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new We(n,0)}function en(t){return t.pieceNum_>=t.pieces_.length}function nn(t,e){var n=Ge(t),r=Ge(e);if(null===n)return e;if(n===r)return nn(Ye(t),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rn(t,e){for(var n=$e(t,0),r=$e(e,0),i=0;i<n.length&&i<r.length;i++){var o=xe(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function on(t,e){if(Qe(t)!==Qe(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function sn(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Qe(t)>Qe(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var an=function(){function t(t,e){this.errorPrefix_=e,this.parts_=$e(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Lt(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Lt(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Lt(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),un=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cn=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ye.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ye.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Z("string"==typeof t,"typeof type must == string"),Z("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return je(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,ln,fn,pn,dn=function(t,e){var n=vn(t),r=n.namespace;"firebase.com"===n.domain&&Ae(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ae("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new cn(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new We(n.pathString)}},vn=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(W_){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=G(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Pe("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},gn=/[\[\].#$\/\u0000-\u001F\u007F]/,yn=/[\[\].#$\u0000-\u001F\u007F]/,mn=function(t){return"string"==typeof t&&0!==t.length&&!gn.test(t)},_n=function(t){return"string"==typeof t&&0!==t.length&&!yn.test(t)},bn=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Oe(t)||t&&"object"==typeof t&&Et(t,".sv")},wn=function(t,e,n,r,i){i&&void 0===n||In(Rt(t,e,i),n,r)},In=function(t,e,n){var r=n instanceof We?new an(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Oe(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Lt(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(je(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!mn(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),In(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},En=function(t,e,n,r,i){if(!i||void 0!==n){var o=Rt(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];je(n,(function(t,e){var n=new We(t);if(In(o,e,tn(r,n)),".priority"===Xe(n)&&!bn(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=$e(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!mn(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(rn);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&sn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Tn=function(t,e,n,r){if(!r||void 0!==n){if(Oe(n))throw new Error(Rt(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!bn(n))throw new Error(Rt(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Sn=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Rt(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Cn=function(t,e,n,r){if(!(r&&void 0===n||mn(n)))throw new Error(Rt(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nn=function(t,e,n,r){if(!(r&&void 0===n||_n(n)))throw new Error(Rt(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kn=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Nn(t,e,n,r)},An=function(t,e){if(".info"===Ge(e))throw new Error(t+" failed = Can't modify data under /.info/")},Pn=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!mn(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_n(t)}(r))throw new Error(Rt(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},On=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Rt(t,e,r)+"must be a boolean.")},Rn=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Ot("OnDisconnect.cancel",0,1,arguments.length),Dt("OnDisconnect.cancel",1,t,!0);var e=new st;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Ot("OnDisconnect.remove",0,1,arguments.length),An("OnDisconnect.remove",this.path_),Dt("OnDisconnect.remove",1,t,!0);var e=new st;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Ot("OnDisconnect.set",1,2,arguments.length),An("OnDisconnect.set",this.path_),wn("OnDisconnect.set",1,t,this.path_,!1),Dt("OnDisconnect.set",2,e,!0);var n=new st;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Ot("OnDisconnect.setWithPriority",2,3,arguments.length),An("OnDisconnect.setWithPriority",this.path_),wn("OnDisconnect.setWithPriority",1,t,this.path_,!1),Tn("OnDisconnect.setWithPriority",2,e,!1),Dt("OnDisconnect.setWithPriority",3,n,!0);var r=new st;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Ot("OnDisconnect.update",1,2,arguments.length),An("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Pe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}En("OnDisconnect.update",1,t,this.path_,!1),Dt("OnDisconnect.update",2,e,!0);var i=new st;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Dn=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Ot("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),xn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ln=(hn=0,ln=[],function(t){var e,n=t===hn;hn=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=xn.charAt(t%64),t=Math.floor(t/64);Z(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ln[e];e--)ln[e]=0;ln[e]++}else for(e=0;e<12;e++)ln[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=xn.charAt(ln[e]);return Z(20===i.length,"nextPushId: Length should be 20."),i}),Mn=function(t){if("2147483647"===t)return"-";var e=Be(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return De;var o=n[i],s=xn.charAt(xn.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},Fn=function(t){if("-2147483648"===t)return Re;var e=Be(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=xn.charAt(xn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Un=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),jn=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Un(Re,t),r=new Un(Re,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Un.MIN},t}(),Vn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return fn},set:function(t){fn=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return xe(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw tt("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Un.MIN},e.prototype.maxPost=function(){return new Un(De,fn)},e.prototype.makePost=function(t,e){return Z("string"==typeof t,"KeyIndex indexValue must always be a string."),new Un(t,fn)},e.prototype.toString=function(){return".key"},e}(jn),qn=new Vn;var Bn,Hn,zn,Wn=function(t){return"number"==typeof t?"number:"+Ve(t):"string:"+t},Kn=function(t){if(t.isLeafNode()){var e=t.val();Z("string"==typeof e||"number"==typeof e||"object"==typeof e&&Et(e,".sv"),"Priority must be a string or number.")}else Z(t===pn||t.isEmpty(),"priority of unexpected type.");Z(t===pn||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gn=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Z(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Kn(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Bn},set:function(t){Bn=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return en(e)?this:".priority"===Ge(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=Ge(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Z(".priority"!==r||1===Qe(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Wn(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Ve(this.value_):this.value_,this.lazyHash_=we(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return Z(i>=0,"Unknown leaf type: "+n),Z(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Qn,Yn,Xn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?xe(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Un.MIN},e.prototype.maxPost=function(){return new Un(De,new Gn("[PRIORITY-POST]",zn))},e.prototype.makePost=function(t,e){var n=Hn(t);return new Un(e,new Gn("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(jn)),Jn=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),$n=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:tr.EMPTY_NODE,this.right=null!=o?o:tr.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return tr.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return tr.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Zn=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new $n(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),tr=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$n.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$n.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Jn(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Jn(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Jn(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Jn(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Zn,t}(),er=Math.log(2),nr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/er,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),rr=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new $n(s,o.node,$n.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],s=n?n(o):o,new $n(s,o.node,$n.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new $n(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,$n.BLACK):(a(l,$n.BLACK),a(l,$n.RED))}return o}(new nr(t.length));return new tr(r||e,o)},ir={},or=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Z(ir&&Xn,"ChildrenNode.ts has not been loaded"),Qn=Qn||new t({".priority":ir},{".priority":Xn})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Tt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof tr?e:null},t.prototype.hasIndex=function(t){return Et(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Z(e!==qn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(Un.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?rr(i,e.getCompare()):ir;var u=e.toString(),c=z({},this.indexSet_);c[u]=e;var h=z({},this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Ct(this.indexes_,(function(t,i){var o=Tt(r.indexSet_,i);if(Z(o,"Missing index implementation for "+i),t===ir){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(Un.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),rr(s,o.getCompare())}return ir}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Un(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Ct(this.indexes_,(function(t){if(t===ir)return t;var r=n.get(e.name);return r?t.remove(new Un(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sr(t,e){return xe(t.name,e.name)}function ar(t,e){return xe(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ur=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Kn(this.priorityNode_),this.children_.isEmpty()&&Z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Yn||(Yn=new t(new tr(ar),null,or.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Yn},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Yn:e},t.prototype.getChild=function(t){var e=Ge(t);return null===e?this:this.getImmediateChild(e).getChild(Ye(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Z(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Un(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Yn:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=Ge(t);if(null===n)return e;Z(".priority"!==Ge(t)||1===Qe(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ye(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xn,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Wn(this.getPriority().val())+":"),this.forEachChild(Xn,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":we(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Un(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Un(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Un(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Un.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Un.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cr?-1:0},t.prototype.withIndex=function(e){if(e===qn||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===qn||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xn),r=e.getIterator(Xn),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===qn?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),cr=new(function(t){function e(){return t.call(this,new tr(ar),ur.EMPTY_NODE,or.Default)||this}return H(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ur.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ur));Object.defineProperties(Un,{MIN:{value:new Un(Re,ur.EMPTY_NODE)},MAX:{value:new Un(De,cr)}}),Vn.__EMPTY_NODE=ur.EMPTY_NODE,Gn.__childrenNodeConstructor=ur,pn=cr,function(t){zn=t}(cr);function hr(t,e){if(void 0===e&&(e=null),null===t)return ur.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Z(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Gn(t,hr(e));if(t instanceof Array){var n=ur.EMPTY_NODE;return je(t,(function(e,r){if(Et(t,e)&&"."!==e.substring(0,1)){var i=hr(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(hr(e))}var r=[],i=!1;if(je(t,(function(t,e){if("."!==t.substring(0,1)){var n=hr(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Un(t,n)))}})),0===r.length)return ur.EMPTY_NODE;var o=rr(r,sr,(function(t){return t.name}),ar);if(i){var s=rr(r,Xn.getCompare());return new ur(o,hr(e),new or({".priority":s},{".priority":Xn}))}return new ur(o,hr(e),or.Default)}!function(t){Hn=t}(hr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?xe(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Un.MIN},e.prototype.maxPost=function(){return Un.MAX},e.prototype.makePost=function(t,e){var n=hr(t);return new Un(e,n)},e.prototype.toString=function(){return".value"},e}(jn)),fr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Z(!en(e)&&".priority"!==Ge(e),"Can't create PathIndex with empty path or .priority key"),n}return H(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?xe(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=hr(t),r=ur.EMPTY_NODE.updateChild(this.indexPath_,n);return new Un(e,r)},e.prototype.maxPost=function(){var t=ur.EMPTY_NODE.updateChild(this.indexPath_,cr);return new Un(De,t)},e.prototype.toString=function(){return $e(this.indexPath_,0).join("/")},e}(jn),pr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Ot("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Ot("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Ot("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Ot("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Ot("DataSnapshot.child",0,1,arguments.length),e=String(e),Nn("DataSnapshot.child",1,e,!1);var n=new We(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Xn)},t.prototype.hasChild=function(t){Ot("DataSnapshot.hasChild",1,1,arguments.length),Nn("DataSnapshot.hasChild",1,t,!1);var e=new We(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Ot("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Ot("DataSnapshot.forEach",1,1,arguments.length),Dt("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Xn))}))},t.prototype.hasChildren=function(){return Ot("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Ot("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Ot("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),dr=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+wt(this.snapshot.exportVal())},t}(),vr=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),gr=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new dr("value",this,new pr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Z(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new vr(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),yr=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Et(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new vr(this,t,e):null},t.prototype.createEvent=function(t,e){Z(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new dr(t.type,this,new pr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Z(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mr(t){return{type:"value",snapshotNode:t}}function _r(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function br(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ir,Er=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){Z(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(br(e,s)):Z(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(_r(e,n)):o.trackChildChange(wr(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xn,(function(t,r){e.hasChild(t)||n.trackChildChange(br(t,r))})),e.isLeafNode()||e.forEachChild(Xn,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(wr(e,r,i))}else n.trackChildChange(_r(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ur.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Tr=function(){function t(e){this.indexedFilter_=new Er(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Un(e,n))||(n=ur.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ur.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ur.EMPTY_NODE);var i=this;return e.forEachChild(Xn,(function(t,e){i.matches(new Un(t,e))||(r=r.updateImmediateChild(t,ur.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Sr=function(){function t(t){this.rangedFilter_=new Tr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Un(e,n))||(n=ur.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ur.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ur.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ur.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){s=i.getNext();!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ur.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;Z(a.numChildren()===this.limit_,"");var u=new Un(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(wr(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(br(e,l));var d=a.updateImmediateChild(e,ur.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(_r(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(br(c.name,c.node)),i.trackChildChange(_r(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,ur.EMPTY_NODE)):t},t}(),Cr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Re},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:De},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Z(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xn},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function kr(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ar(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Pr(t,e,n){var r;if(t.index_===qn)"string"==typeof e&&(e=Mn(e)),r=Ar(t,e,n);else{r=Ar(t,e,null==n?De:Mn(n))}return r.startAfterSet_=!0,r}function Or(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Rr(t,e,n){var r;return t.index_===qn?("string"==typeof e&&(e=Fn(e)),r=Or(t,e,n)):r=Or(t,e,null==n?Re:Fn(n)),r.endBeforeSet_=!0,r}function Dr(t,e){var n=t.copy();return n.index_=e,n}function xr(t){var e,n={};return t.isDefault()||(t.index_===Xn?e="$priority":t.index_===lr?e="$value":t.index_===qn?e="$key":(Z(t.index_ instanceof fr,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=wt(e),t.startSet_&&(n.startAt=wt(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+wt(t.indexStartName_))),t.endSet_&&(n.endAt=wt(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+wt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Lr=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Z(Ir,"Reference.ts has not been loaded"),Ir},set:function(t){Ir=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===qn){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Re)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==De)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Xn){if(null!=e&&!bn(e)||null!=n&&!bn(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Z(t.getIndex()instanceof fr||t.getIndex()===lr,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Ot("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Ot("Query.on",2,4,arguments.length),Sn("Query.on",1,e,!1),Dt("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new gr(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new yr(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Ot("Query.off",0,3,arguments.length),Sn("Query.off",1,t,!0),Dt("Query.off",2,e,!0),xt("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new gr(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new yr(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var o=this;Ot("Query.once",1,4,arguments.length),Sn("Query.once",1,e,!1),Dt("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new st;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Ot("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Nr(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Ot("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,kr(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Ot("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Nn("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new We(e);if(en(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new fr(n),i=Dr(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Ot("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Dr(this.queryParams_,qn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Ot("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Dr(this.queryParams_,Xn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Ot("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Dr(this.queryParams_,lr);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Ot("Query.startAt",0,2,arguments.length),wn("Query.startAt",1,e,this.path,!0),Cn("Query.startAt",2,n,!0);var r=Ar(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Ot("Query.startAfter",0,2,arguments.length),wn("Query.startAfter",1,e,this.path,!1),Cn("Query.startAfter",2,n,!0);var r=Pr(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Ot("Query.endAt",0,2,arguments.length),wn("Query.endAt",1,e,this.path,!0),Cn("Query.endAt",2,n,!0);var r=Or(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Ot("Query.endBefore",0,2,arguments.length),wn("Query.endBefore",1,e,this.path,!1),Cn("Query.endBefore",2,n,!0);var r=Rr(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Ot("Query.equalTo",1,2,arguments.length),wn("Query.equalTo",1,t,this.path,!1),Cn("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Ot("Query.toString",0,0,arguments.length),this.repo.toString()+Je(this.path)},t.prototype.toJSON=function(){return Ot("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xn&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Fe(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Ot("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=on(this.path,e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Dt(t,3,r.cancel,!0),r.context=n,xt(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Rt(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Mr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=tn(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Ur=function(t,e,n){return t&&"object"==typeof t?(Z(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?jr(t[".sv"],e,n):"object"==typeof t[".sv"]?Vr(t[".sv"],e):void Z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},jr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Z(!1,"Unexpected server value: "+t)}},Vr=function(t,e,n){t.hasOwnProperty("increment")||Z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Z(!1,"Unexpected increment value: "+r);var i=e.node();if(Z(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},qr=function(t,e,n,r){return Hr(e,new Fr(n,t),r)},Br=function(t,e,n){return Hr(t,new Mr(e),n)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e,n){var r,i=t.getPriority().val(),o=Ur(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Ur(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Gn(a,hr(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Gn(o))),u.forEachChild(Xn,(function(t,i){var o=Hr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr,Wr,Kr=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!en(t)&&this.children.size>0){var e=Ge(t);return t=Ye(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(en(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=Ge(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=Ye(e),i.remember(e,n)}},t.prototype.forget=function(t){if(en(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Xn,(function(t,e){n.remember(new We(t),e)})),this.forget(t)}if(this.children.size>0){var r=Ge(t);if(t=Ye(t),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new We(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Wr=zr||(zr={}))[Wr.OVERWRITE=0]="OVERWRITE",Wr[Wr.MERGE=1]="MERGE",Wr[Wr.ACK_USER_WRITE=2]="ACK_USER_WRITE",Wr[Wr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Qr,Yr=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=zr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(en(this.path)){if(null!=this.affectedTree.value)return Z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new We(e));return new t(Ke(),n,this.revert)}return Z(Ge(this.path)===e,"operationForChild called for unrelated child."),new t(Ye(this.path),this.affectedTree,this.revert)},t}(),Xr=function(){function t(t,e){void 0===e&&(Qr||(Qr=new tr(Le)),e=Qr),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return je(e,(function(t,e){n=n.set(new We(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ke(),value:this.value};if(en(t))return null;var n=Ge(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ye(t),e);return null!=i?{path:tn(new We(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(en(e))return this;var n=Ge(e),r=this.children.get(n);return null!==r?r.subtree(Ye(e)):new t(null)},t.prototype.set=function(e,n){if(en(e))return new t(n,this.children);var r=Ge(e),i=(this.children.get(r)||new t(null)).set(Ye(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(en(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=Ge(e),r=this.children.get(n);if(r){var i=r.remove(Ye(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(en(t))return this.value;var e=Ge(t),n=this.children.get(e);return n?n.get(Ye(t)):null},t.prototype.setTree=function(e,n){if(en(e))return n;var r=Ge(e),i=(this.children.get(r)||new t(null)).setTree(Ye(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Ke(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(tn(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ke(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(en(t))return null;var i=Ge(t),o=this.children.get(i);return o?o.findOnPath_(Ye(t),tn(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ke(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(en(e))return this;this.value&&r(n,this.value);var i=Ge(e),o=this.children.get(i);return o?o.foreachOnPath_(Ye(e),tn(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Ke(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(tn(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Jr=function(){function t(t,e){this.source=t,this.path=e,this.type=zr.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return en(this.path)?new t(this.source,Ke()):new t(this.source,Ye(this.path))},t}(),$r=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=zr.OVERWRITE}return t.prototype.operationForChild=function(e){return en(this.path)?new t(this.source,Ke(),this.snap.getImmediateChild(e)):new t(this.source,Ye(this.path),this.snap)},t}(),Zr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=zr.MERGE}return t.prototype.operationForChild=function(e){if(en(this.path)){var n=this.children.subtree(new We(e));return n.isEmpty()?null:n.value?new $r(this.source,Ke(),n.value):new t(this.source,Ke(),n)}return Z(Ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ye(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ti=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(en(t))return this.isFullyInitialized()&&!this.filtered_;var e=Ge(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ei=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ti(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ti(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),ni=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Z("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Z(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,wr(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,br(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,_r(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw tt("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,wr(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ri=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ii=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ti(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),oi=function(t,e){this.viewCache=t,this.changes=e},si=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Z(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Z(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new ni;if(n.type===zr.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(Z(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!en(u.path),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===zr.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(Z(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===zr.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,a):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,a)}else{if(n.type!==zr.LISTEN_COMPLETE)throw tt("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var l=a.getChanges();return t.maybeAddValueEvent_(e,o,l),new oi(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(mr(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(en(e))if(Z(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof ur?u:ur.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=Ge(e);if(".priority"===f){Z(1===Qe(e),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=Ye(e),g=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);g=null!=y?o.getNode().getImmediateChild(f).updateChild(v,y):o.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());s=null!=g?this.filter_.updateChild(o.getNode(),f,g,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||en(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(en(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=Ge(e);if(!u.isCompleteForPath(e)&&Qe(e)>1)return t;var f=Ye(e),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,ri,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||en(e),c.filtersNodes()),v=new ii(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new ii(r,t,i);if(en(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=Ge(e);if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=Ye(e),f=u.getNode().getImmediateChild(h),p=void 0;if(en(l))p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===Xe(l)&&d.getChild(Ze(l)).isEmpty()?d:d.updateChild(l,n):ur.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=tn(n,r);t.cacheHasChild_(e,Ge(h))&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=tn(n,r);t.cacheHasChild_(e,Ge(h))||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=en(e)?n:new Xr(null).setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new We(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new We(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(en(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(en(e)){var u=new Xr(null);return a.getNode().forEachChild(qn,(function(t,e){u=u.set(new We(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new Xr(null);return n.foreach((function(t,n){var r=tn(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||en(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ri,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new ii(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(en(e)||".priority"===Ge(e)){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Z(h instanceof ur,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=Ge(e),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,Ye(e),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,ur.EMPTY_NODE,Ye(e),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Ke()),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),ai=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e,n,r,i,o){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw tt("Should only compare child_ events.");var r=new Un(e.childName,e.snapshotNode),i=new Un(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}var ci,hi=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new Er(r.getIndex()),o=(n=r).loadsAllData()?new Er(n.getIndex()):n.hasLimit()?new Sr(n):new Tr(n);this.processor_=new si(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ur.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ur.EMPTY_NODE,a.getNode(),null),h=new ti(u,s.isFullyInitialized(),i.filtersNodes()),l=new ti(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new ei(l,h),this.eventGenerator_=new ai(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!en(t)&&!e.getImmediateChild(Ge(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Z(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===zr.MERGE&&null!==t.source.queryId&&(Z(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Z(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Z(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Xn,(function(t,e){n.push(_r(t,e))}));return e.isFullyInitialized()&&n.push(mr(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),ui(t,i,"child_removed",e,r,n),ui(t,i,"child_added",e,r,n),ui(t,i,"child_moved",o,r,n),ui(t,i,"child_changed",e,r,n),ui(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,r)},t}(),li=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Z(ci,"Reference.ts has not been loaded"),ci},set:function(t){Z(!ci,"__referenceConstructor has already been defined"),ci=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Z(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=G(this.views.values()),c=u.next();!c.done;c=u.next()){s=c.value;a=a.concat(s.applyOperation(t,e,n))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ur?(s=e.calcCompleteEventChildren(n),a=!1):(s=ur.EMPTY_NODE,a=!1);var u=new ei(new ti(s,a,!1),new ti(n,r,!1));return new hi(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=this.hasCompleteView();if("default"===s)try{for(var h=G(this.views.entries()),l=h.next();!l.done;l=h.next()){var f=Q(l.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(v){i={error:v}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=G(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=G(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=G(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),fi=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Xr(null))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e,n){if(en(e))return new fi(new Xr(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=nn(i,e);return o=o.updateChild(s,n),new fi(t.writeTree_.set(i,o))}var a=new Xr(n),u=t.writeTree_.setTree(e,a);return new fi(u)}function di(t,e,n){var r=t;return je(n,(function(t,n){r=pi(r,tn(e,t),n)})),r}function vi(t,e){if(en(e))return fi.empty();var n=t.writeTree_.setTree(e,new Xr(null));return new fi(n)}function gi(t,e){return null!=yi(t,e)}function yi(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(nn(n.path,e)):null}function mi(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xn,(function(t,n){e.push(new Un(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Un(t,n.value))})),e}function _i(t,e){if(en(e))return t;var n=yi(t,e);return new fi(null!=n?new Xr(n):t.writeTree_.subtree(e))}function bi(t){return t.writeTree_.isEmpty()}function wi(t,e){return Ii(Ke(),t.writeTree_,e)}function Ii(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(Z(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ii(tn(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(tn(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ei=function(){function t(){this.visibleWrites_=fi.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ti(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Z(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=pi(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Z(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=di(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Z(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:sn(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=vi(this.visibleWrites_,r.path):je(r.children,(function(t){e.visibleWrites_=vi(e.visibleWrites_,tn(r.path,t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return yi(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=_i(this.visibleWrites_,e);if(!i&&bi(o))return n;if(i||null!=n||gi(o,Ke())){return wi(t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(sn(t.path,e)||sn(e,t.path))}),e),n||ur.EMPTY_NODE)}return null}var s=yi(this.visibleWrites_,e);if(null!=s)return s;var a=_i(this.visibleWrites_,e);return bi(a)?n:null!=n||gi(a,Ke())?wi(a,n||ur.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ur.EMPTY_NODE,r=yi(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Xn,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=_i(this.visibleWrites_,t);return e.forEachChild(Xn,(function(t,e){var r=wi(_i(i,new We(t)),e);n=n.updateImmediateChild(t,r)})),mi(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return mi(_i(this.visibleWrites_,t)).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Z(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=tn(t,e);if(gi(this.visibleWrites_,i))return null;var o=_i(this.visibleWrites_,i);return bi(o)?r.getChild(e):wi(o,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=tn(t,e),i=yi(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?wi(_i(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return yi(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=_i(this.visibleWrites_,t),u=yi(a,Ke());if(null!=u)s=u;else{if(null==e)return[];s=wi(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return sn(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&sn(tn(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Ke()),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=fi.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)sn(n,s)?r=pi(r,a=nn(n,s),o.snap):sn(s,n)&&(a=nn(s,n),r=pi(r,Ke(),o.snap.getChild(a)));else{if(!o.children)throw tt("WriteRecord should have .snap or .children");if(sn(n,s))r=di(r,a=nn(n,s),o.children);else if(sn(s,n))if(en(a=nn(s,n)))r=di(r,Ke(),o.children);else{var u=Tt(o.children,Ge(a));if(u){var c=u.getChild(Ye(a));r=pi(r,Ke(),c)}}}}}return r},t}(),Ti=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(tn(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(tn(this.treePath_,e),this.writeTree_)},t}(),Si=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Xr(null),this.pendingWriteTree_=new Ei,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new $r({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Xr.fromObject(e);return this.applyOperationToSyncPoints_(new Zr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new Xr(null);return null!=n.snap?r=r.set(Ke(),!0):je(n.children,(function(t){r=r.set(new We(t),!0)})),this.applyOperationToSyncPoints_(new Yr(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new $r({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=Xr.fromObject(e);return this.applyOperationToSyncPoints_(new Zr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Jr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=nn(s,e),c=new $r(Gr(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=nn(s,e),c=Xr.fromObject(n),h=new Zr(Gr(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=nn(o,e),u=new Jr(Gr(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=nn(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(Ke())):(a=new li,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=ur.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Ke());n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);Z(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var l=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,l,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],g=v.getQuery(),y=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}if(!l&&c.length>0&&!r)if(h){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=nn(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=nn(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(Ke()):(r=new li,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new ti(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ur.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),je(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)Z(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!en(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),je(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ur.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Z(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new We(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Z(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Ke()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(en(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Ke());null==n&&null!=i&&(n=i.getCompleteServerCache(Ke()));var o=[],s=Ge(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Ke());null==n&&null!=o&&(n=o.getCompleteServerCache(Ke()));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Ci=function(){function t(){this.rootNode_=ur.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ni=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Et(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return it(this.counters_)},t}(),ki=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ni),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ai=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=z({},t);return this.last_&&je(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Pi=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ai(t);var n=1e4+2e4*Math.random();ze(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;je(e,(function(e,i){i>0&&Et(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),ze(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Oi=function(){this.eventLists_=[],this.recursionDepth_=0};function Ri(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||on(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Di(t,e,n){Ri(t,n),Li(t,(function(t){return on(t,e)}))}function xi(t,e,n){Ri(t,n),Li(t,(function(t){return sn(t,e)||sn(e,t)}))}function Li(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(Mi(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mi(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();Ee&&Ce("event: "+n.toString()),He(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fi=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Z(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Y(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Z(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Ui=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return H(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Z("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Fi),ji=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ut()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return H(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Z("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Fi),Vi=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&He((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),qi=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ne(t),this.stats_=ki.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Vi(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Bi((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Q(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Q(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&un.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=wt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=et(e),nt.encodeByteArray(n,!0)),i=Ue(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=wt(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Bi=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=be(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(W_){Ce("frame writing exception"),W_.stack&&Ce(W_.stack),Ce(W_)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ce("No IE domain setting required")}catch(W_){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ce("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(W_){}}),Math.floor(1))},t}(),Hi="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){Hi=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi=null;"undefined"!=typeof MozWebSocket?Wi=MozWebSocket:"undefined"!=typeof WebSocket&&(Wi=WebSocket);var Ki,Gi,Qi=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ne(this.connId),this.stats_=ki.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&un.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ye.set("previous_websocket_failure",!0);try{if(ft());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Wi(this.connURL,[],r)}}catch(W_){this.log_("Error instantiating WebSocket.");var i=W_.message||W_.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Wi&&!t.forceDisallow_},t.previouslyFailed=function(){return ye.isInMemoryStorage||!0===ye.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){ye.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=bt(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Z(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=wt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Ue(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(W_){this.log_("Exception thrown from WebSocket.send():",W_.message||W_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Yi=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[qi,Qi]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Qi&&Qi.isAvailable(),o=i&&!Qi.previouslyFailed();if(e.webSocketOnly&&(i||Pe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Qi];else{var s=this.transports_=[];try{for(var a=G(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Xi=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ne("c:"+this.id+":"),this.transportManager_=new Yi(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ze((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Me("t",t),n=Me("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Me("t",t),n=Me("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Me("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?ke("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ke("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Pe("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ze((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ze((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ye.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ji=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),$i=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Ne("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!ft())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Ui.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&ji.getInstance().on("online",c.onOnline_,c),c}return H(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(wt(i)),Z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new st,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Z(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Z(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Et(t,"w")){var n=Tt(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Pe("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=It(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=It(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Z(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+wt(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):ke("Unrecognized action received from server: "+wt(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())};this.realtime_={close:h,sendRequest:function(t){Z(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(t){u?Ce("getToken() completed but was canceled"):(Ce("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,c=new Xi(o,s.repoInfo_,s.applicationId_,n,r,i,(function(t){Pe(t+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),a))})).then(null,(function(e){s.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&Pe(e),h())}))}},e.prototype.interrupt=function(t){Ce("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Ce("Resuming connection for reason: "+t),delete this.interruptReasons_[t],St(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Fe(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new We(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Ce("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=G(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,G(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Hi.replace(/\./g,"-")]=1,ut()?t["framework.cordova"]=1:lt()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ji.getInstance().currentlyOnline();return St(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ji),Zi=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Ne("p:rest:"),i.listens_={},i}return H(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Z(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=xr(t.getQueryParams());this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),Tt(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=xr(t.getQueryParams()),r=t.path.toString(),i=new st;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=bt(a.responseText)}catch(W_){Pe("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Pe("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(Ji),to=function(){this.children={},this.childCount=0,this.value=null},eo=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new to),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof We?e:new We(e),r=this,i=Ge(n);null!==i;){r=new t(i,r,Tt(r.node_.children,i)||new to),i=Ge(n=Ye(n))}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Z(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;je(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new We(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Et(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Gi=Ki||(Ki={}))[Gi.RUN=0]="RUN",Gi[Gi.SENT=1]="SENT",Gi[Gi.COMPLETED=2]="COMPLETED",Gi[Gi.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Gi[Gi.NEEDS_ABORT=4]="NEEDS_ABORT";var no=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Oi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Kr,this.transactionQueueTree_=new eo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=ki.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Zi(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wt(e)}catch(W_){throw new Error("Invalid authOverride provided: "+W_)}}this.persistentConnection_=new $i(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=ki.getOrCreateReporter(this.repoInfo_,(function(){return new Pi(t.stats_,t.server_)})),this.infoData_=new Ci,this.infoSyncTree_=new Si({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Si({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);xi(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new We(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new We(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Ct(e,(function(t){return hr(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=hr(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Ct(e,(function(t){return hr(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=hr(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),xi(this.eventQueue_,h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;je(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new We("/.info/"+t),r=hr(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);xi(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new pr(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=hr(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Di(e.eventQueue_,t.path,i),Promise.resolve(new pr(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+wt(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=hr(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=Br(s,a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);Ri(this.eventQueue_,h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Pe("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);xi(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),xi(this.eventQueue_,l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(je(e,(function(e,n){i=!1,s[e]=qr(tn(t,e),hr(n),r.serverSyncTree_,o)})),i)Ce("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);Ri(this.eventQueue_,u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Pe("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;xi(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)})),je(e,(function(e){var n=r.abortTransactions_(tn(t,e));r.rerunTransactions_(n)})),xi(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Kr;this.onDisconnect_.forEachTree(Ke(),(function(r,i){var o=qr(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Ke(),(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Kr,xi(this.eventQueue_,Ke(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=hr(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=hr(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(St(e))return Ce("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&je(e,(function(e,n){var i=hr(n);r.onDisconnect_.remember(tn(t,e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===Ge(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Di(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===Ge(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Di(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ai(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);je(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Ce.apply(void 0,Y([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&He((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new uo(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new ro(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:be(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new pr(s.currentInputSnapshot,new ro(this,s.path),Xn);s.onComplete(null,!1,c)}}else{In("transaction failed: Data returned ",u,s.path),s.status=Ki.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&Et(u,".priority"))f=Tt(u,".priority"),Z(bn(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||ur.EMPTY_NODE).getPriority().val();var p=this.generateServerValues(),d=hr(u,f),v=Br(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);xi(this.eventQueue_,t,g),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ur.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Z(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Ki.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];Z(u.status===Ki.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Ki.SENT,u.retryCount++;var c=nn(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,(function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Ki.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new ro(n,e[s].path),c=new pr(a,u,Xn);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),xi(n.eventQueue_,t,i);for(s=0;s<o.length;s++)He(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Ki.SENT_NEEDS_ABORT?e[s].status=Ki.NEEDS_ABORT:e[s].status=Ki.RUN;else{Pe("transaction at "+l.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=Ki.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Ki.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=nn(e,a.path),c=!1,h=void 0;if(Z(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Ki.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Ki.RUN)if(a.retryCount>=25)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){In("transaction failed: Data returned ",f,a.path);var p=hr(f);"object"==typeof f&&null!=f&&Et(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),g=Br(p,l,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(xi(this.eventQueue_,e,i),i=[],c&&(t[s].status=Ki.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var y=new ro(this,t[s].path),m=t[s].currentInputSnapshot,_=new pr(m,y,Xn);r.push(t[s].onComplete.bind(null,null,!1,_))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)He(r[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=Ge(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=Ge(t=Ye(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Ki.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Ki.SENT_NEEDS_ABORT);else if(e[o].status===Ki.SENT)Z(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Ki.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Z(e[o].status===Ki.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,xi(this.eventQueue_,t.path(),r);for(o=0;o<n.length;o++)He(n[o])}},t}(),ro=function(t){function e(e,n){if(!(e instanceof no))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Cr,!1)||this}return H(e,t),e.prototype.getKey=function(){return Ot("Reference.key",0,0,arguments.length),en(this.path)?null:Xe(this.path)},e.prototype.child=function(t){return Ot("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof We||(null===Ge(this.path)?kn("Reference.child",1,t,!1):Nn("Reference.child",1,t,!1)),new e(this.repo,tn(this.path,t))},e.prototype.getParent=function(){Ot("Reference.parent",0,0,arguments.length);var t=Ze(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Ot("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Ot("Reference.set",1,2,arguments.length),An("Reference.set",this.path),wn("Reference.set",1,t,this.path,!1),Dt("Reference.set",2,e,!0);var n=new st;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Ot("Reference.update",1,2,arguments.length),An("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Pe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}En("Reference.update",1,t,this.path,!1),Dt("Reference.update",2,e,!0);var i=new st;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Ot("Reference.setWithPriority",2,3,arguments.length),An("Reference.setWithPriority",this.path),wn("Reference.setWithPriority",1,t,this.path,!1),Tn("Reference.setWithPriority",2,e,!1),Dt("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new st;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Ot("Reference.remove",0,1,arguments.length),An("Reference.remove",this.path),Dt("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Ot("Reference.transaction",1,3,arguments.length),An("Reference.transaction",this.path),Dt("Reference.transaction",1,t,!1),Dt("Reference.transaction",2,e,!0),On("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new st;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Dn(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Ot("Reference.setPriority",1,2,arguments.length),An("Reference.setPriority",this.path),Tn("Reference.setPriority",1,t,!1),Dt("Reference.setPriority",2,e,!0);var n=new st;return this.repo.setWithPriority(tn(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Ot("Reference.push",0,2,arguments.length),An("Reference.push",this.path),wn("Reference.push",1,t,this.path,!0),Dt("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ln(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return An("Reference.onDisconnect",this.path),new Rn(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Lr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr.__referenceConstructor=ro,li.__referenceConstructor=ro;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var io,oo=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pe(t)},t}(),so=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),ao=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return io||(io=new t),io},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=G(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,G(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=G(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,G(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new cn(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new so)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Ae("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ce("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=dn(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+a.namespace,a=(s=dn(i,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new so:new oo(t,e);return Pn("Invalid Firebase Database URL",1,s),en(s.path)||Ae("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Tt(this.repos_,t.app.name);e&&Tt(e,t.key)===t||Ae("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Tt(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Tt(r,t.toURLString());return i&&Ae("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new no(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),uo=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return W(e,void 0,void 0,(function(){return K(this,(function(t){return this.checkDeleted_("delete"),ao.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof no||Ae("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new ro(this.repo_,Ke())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?Ae("Cannot call useEmulator() after instance has already been initialized."):ao.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Ot("database.ref",0,1,arguments.length),t instanceof ro?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Ot(e,1,1,arguments.length);var n=dn(t,this.repo_.repoInfo_.nodeAdmin);Pn(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||Ae(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Ae("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Ot("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Ot("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}();var co=Object.freeze({__proto__:null,forceLongPolling:function(){Qi.forceDisallow(),qi.forceAllow()},forceWebSockets:function(){qi.forceDisallow()},isWebSocketsAvailable:function(){return Qi.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;zi(r);var u=new Ut("auth-internal",new Vt("database-standalone"));return u.setComponent(new Ft("auth-internal",(function(){return i}),"PRIVATE")),{instance:ao.getInstance().databaseFromApp(e,u,n,a),namespace:o}}}),ho=$i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},$i.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var lo,fo=Xi,po=cn,vo=Object.freeze({__proto__:null,DataConnection:ho,RealTimeConnection:fo,hijackHash:function(t){var e=$i.prototype.put;return $i.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){$i.prototype.put=e}},ConnectionTarget:po,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ao.getInstance().forceRestClient(t)}}),go=uo.ServerValue;zi((lo=fe).SDK_VERSION),lo.INTERNAL.registerComponent(new Ft("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return ao.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:ro,Query:Lr,Database:uo,DataSnapshot:pr,enableLogging:Se,INTERNAL:co,ServerValue:go,TEST_ACCESS:vo}).setMultipleInstances(!0)),lo.registerVersion("@firebase/database","0.9.4");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function mo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var _o,bo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wo=wo||{},Io=bo||self;function Eo(){}function To(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function So(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Co="closure_uid_"+(1e9*Math.random()>>>0),No=0;function ko(t,e,n){return t.call.apply(t.bind,arguments)}function Ao(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Po(t,e,n){return(Po=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ko:Ao).apply(null,arguments)}function Oo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ro(){return Date.now()}function Do(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function xo(){this.j=this.j,this.i=this.i}xo.prototype.j=!1,xo.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Co)&&t[Co]||(t[Co]=++No))},xo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Lo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Mo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Fo(t){return Array.prototype.concat.apply([],arguments)}function Uo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function jo(t){return/^[\s\xa0]*$/.test(t)}var Vo,qo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Bo(t,e){return-1!=t.indexOf(e)}function Ho(t,e){return t<e?-1:t>e?1:0}t:{var zo=Io.navigator;if(zo){var Wo=zo.userAgent;if(Wo){Vo=Wo;break t}}Vo=""}function Ko(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Go(t){var e={};for(var n in t)e[n]=t[n];return e}var Qo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Qo.length;o++)n=Qo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xo(t){return Xo[" "](t),t}Xo[" "]=Eo;var Jo,$o,Zo=Bo(Vo,"Opera"),ts=Bo(Vo,"Trident")||Bo(Vo,"MSIE"),es=Bo(Vo,"Edge"),ns=es||ts,rs=Bo(Vo,"Gecko")&&!(Bo(Vo.toLowerCase(),"webkit")&&!Bo(Vo,"Edge"))&&!(Bo(Vo,"Trident")||Bo(Vo,"MSIE"))&&!Bo(Vo,"Edge"),is=Bo(Vo.toLowerCase(),"webkit")&&!Bo(Vo,"Edge");function os(){var t=Io.document;return t?t.documentMode:void 0}t:{var ss="",as=($o=Vo,rs?/rv:([^\);]+)(\)|;)/.exec($o):es?/Edge\/([\d\.]+)/.exec($o):ts?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($o):is?/WebKit\/(\S+)/.exec($o):Zo?/(?:Version)[ \/]?(\S+)/.exec($o):void 0);if(as&&(ss=as?as[1]:""),ts){var us=os();if(null!=us&&us>parseFloat(ss)){Jo=String(us);break t}}Jo=ss}var cs,hs={};function ls(t){return function(t,e){var n=hs;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=qo(String(Jo)).split("."),r=qo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ho(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ho(0==s[2].length,0==a[2].length)||Ho(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(Io.document&&ts){var fs=os();cs=fs||(parseInt(Jo,10)||void 0)}else cs=void 0;var ps=cs,ds=!ts||9<=Number(ps),vs=ts&&!ls("9"),gs=function(){if(!Io.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Io.addEventListener("test",Eo,e),Io.removeEventListener("test",Eo,e)}catch(n){}return t}();function ys(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ms(t,e){if(ys.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(rs){t:{try{Xo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_s[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ys.prototype.b=function(){this.defaultPrevented=!0},Do(ms,ys);var _s={2:"touch",3:"pen",4:"mouse"};ms.prototype.b=function(){ms.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,vs)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var bs="closure_listenable_"+(1e6*Math.random()|0),ws=0;function Is(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ws,this.Y=this.Z=!1}function Es(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ts(t){this.src=t,this.a={},this.b=0}function Ss(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Lo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Es(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Cs(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ts.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Cs(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Is(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ns="closure_lm_"+(1e6*Math.random()|0),ks={};function As(t,e,n,r,i){if(r&&r.once)return Os(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)As(t,e[o],n,r,i);return null}return n=js(n),t&&t[bs]?t.va(e,n,So(r)?!!r.capture:!!r,i):Ps(t,e,n,!1,r,i)}function Ps(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=So(i)?!!i.capture:!!i;if(s&&!ds)return null;var a=Fs(t);if(a||(t[Ns]=a=new Ts(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ms,e=ds?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)gs||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Os(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Os(t,e[o],n,r,i);return null}return n=js(n),t&&t[bs]?t.wa(e,n,So(r)?!!r.capture:!!r,i):Ps(t,e,n,!0,r,i)}function Rs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Rs(t,e[o],n,r,i);else r=So(r)?!!r.capture:!!r,n=js(n),t&&t[bs]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Cs(o=t.a[e],n,r,i))&&(Es(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Fs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Cs(e,n,r,i)),(n=-1<t?e[t]:null)&&Ds(n))}function Ds(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[bs])Ss(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fs(e))?(Ss(n,t),0==n.b&&(n.src=null,e[Ns]=null)):Es(t)}}}function xs(t){return t in ks?ks[t]:ks[t]="on"+t}function Ls(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ds(t),n.call(r,e)}function Ms(t,e){if(t.Y)return!0;if(!ds){if(!e)t:{e=["window","event"];for(var n=Io,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ls(t,e=new ms(e,this))}return Ls(t,new ms(e,this))}function Fs(t){return(t=t[Ns])instanceof Ts?t:null}var Us="__closure_events_fn_"+(1e9*Math.random()>>>0);function js(t){return"function"==typeof t?t:(t[Us]||(t[Us]=function(e){return t.handleEvent(e)}),t[Us])}function Vs(){xo.call(this),this.c=new Ts(this),this.J=this,this.C=null}function qs(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ys(e,t);else if(e instanceof ys)e.target=e.target||t;else{var i=e;Yo(e=new ys(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Bs(s,r,!0,e)&&i}if(i=Bs(s=e.a=t,r,!0,e)&&i,i=Bs(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Bs(s=e.a=n[o],r,!1,e)&&i}function Bs(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ss(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Do(Vs,xo),Vs.prototype[bs]=!0,(_o=Vs.prototype).addEventListener=function(t,e,n,r){As(this,t,e,n,r)},_o.removeEventListener=function(t,e,n,r){Rs(this,t,e,n,r)},_o.G=function(){if(Vs.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Es(n[r]);delete e.a[t],e.b--}}this.C=null},_o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},_o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Hs=Io.JSON.stringify;function zs(){this.b=this.a=null}var Ws,Ks=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Qs}),(function(t){t.reset()}));function Gs(){var t=$s,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Qs(){this.next=this.b=this.a=null}function Ys(t){Io.setTimeout((function(){throw t}),0)}function Xs(t,e){Ws||function(){var t=Io.Promise.resolve(void 0);Ws=function(){t.then(Zs)}}(),Js||(Ws(),Js=!0),$s.add(t,e)}zs.prototype.add=function(t,e){var n=Ks.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Qs.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Qs.prototype.reset=function(){this.next=this.b=this.a=null};var Js=!1,$s=new zs;function Zs(){for(var t;t=Gs();){try{t.a.call(t.b)}catch(n){Ys(n)}var e=Ks;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Js=!1}function ta(t,e){Vs.call(this),this.b=t||1,this.a=e||Io,this.f=Po(this.Za,this),this.g=Ro()}function ea(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function na(t,e,n){if("function"==typeof t)n&&(t=Po(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Po(t.handleEvent,t)}return 2147483647<Number(e)?-1:Io.setTimeout(t,e||0)}function ra(t){t.a=na((function(){t.a=null,t.c&&(t.c=!1,ra(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Do(ta,Vs),(_o=ta.prototype).aa=!1,_o.M=null,_o.Za=function(){if(this.aa){var t=Ro()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),qs(this,"tick"),this.aa&&(ea(this),this.start()))}},_o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ro())},_o.G=function(){ta.X.G.call(this),ea(this),delete this.a};var ia=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ra(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Io.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(xo);function oa(t){xo.call(this),this.b=t,this.a={}}Do(oa,xo);var sa=[];function aa(t,e,n,r){Array.isArray(n)||(n&&(sa[0]=n.toString()),n=sa);for(var i=0;i<n.length;i++){var o=As(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ua(t){Ko(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ds(t)}),t),t.a={}}function ca(){this.a=!0}function ha(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Hs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}oa.prototype.G=function(){oa.X.G.call(this),ua(this)},oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ca.prototype.info=function(){};var la={},fa=null;function pa(){return fa=fa||new Vs}function da(t){ys.call(this,la.Fa,t)}function va(t){var e=pa();qs(e,new da(e,t))}function ga(t,e){ys.call(this,la.STAT_EVENT,t),this.stat=e}function ya(t){var e=pa();qs(e,new ga(e,t))}function ma(t){ys.call(this,la.Ga,t)}function _a(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Io.setTimeout((function(){t()}),e)}la.Fa="serverreachability",Do(da,ys),la.STAT_EVENT="statevent",Do(ga,ys),la.Ga="timingevent",Do(ma,ys);var ba={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},wa={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ia(){}function Ea(t){var e;return(e=t.a)||(e=t.a={}),e}function Ta(){}Ia.prototype.a=null;var Sa,Ca={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Na(){ys.call(this,"d")}function ka(){ys.call(this,"c")}function Aa(){}function Pa(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new oa(this),this.P=Oa,t=ns?125:void 0,this.R=new ta(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Do(Na,ys),Do(ka,ys),Do(Aa,Ia),Sa=new Aa;var Oa=45e3,Ra={},Da={};function xa(t,e,n){t.H=1,t.i=nu(Xa(e)),t.j=n,t.I=!0,La(t,null)}function La(t,e){t.u=Ro(),Ua(t),t.l=Xa(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),vu(n.b,"t",r),t.D=0,t.a=cc(t.g,t.g.C?e:null),0<t.O&&(t.F=new ia(Po(t.Ca,t,t.a),t.O)),aa(t.J,t.a,"readystatechange",t.Xa),e=t.B?Go(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),va(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ma(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Fa(t,n);if(i==Da){4==e&&(t.h=4,ya(14),r=!1),ha(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ra){t.h=4,ya(15),ha(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ha(t.c,t.f,i,null),Ha(t,i)}4==e&&0==n.length&&(t.h=1,ya(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ec(e),e.F=!0,ya(11))):(ha(t.c,t.f,n,"[Invalid Chunked Response]"),Ba(t),qa(t))}function Fa(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Da:(n=Number(e.substring(n,r)),isNaN(n)?Ra:(r+=1)+n>e.length?Da:(e=e.substr(r,n),t.D=r+n,e))}function Ua(t){t.T=Ro()+t.P,ja(t,t.P)}function ja(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=_a(Po(t.Va,t),e)}function Va(t){t.o&&(Io.clearTimeout(t.o),t.o=null)}function qa(t){0==t.g.v||t.A||ic(t.g,t)}function Ba(t){Va(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ea(t.R),ua(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ha(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Iu(n.b,t)))if(n.I=t.N,!t.C&&Iu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;rc(n),Ku(n)}tc(n),ya(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=_a(Po(n.Sa,n),6e3));if(1>=wu(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else sc(n,11)}else if((t.C||n.a==t)&&rc(n),!jo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(Bo(h,"spdy")||Bo(h,"quic")||Bo(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Eu(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,eu(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ro()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=uc(u,u.C?u.ga:null,u.fa),p.C){Tu(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Va(d),Ua(d)),u.a=p}else Zu(u);0<n.g.length&&Yu(n)}else"stop"!=i[0]&&"close"!=i[0]||sc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?sc(n,7):Wu(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);va(4)}catch(g){}}function za(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(To(t)||"string"==typeof t)Mo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(To(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(To(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Wa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Wa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ka(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ga(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ga(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ga(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(_o=Pa.prototype).setTimeout=function(t){this.P=t},_o.Xa=function(t){t=t.target;var e=this.F;e&&3==qu(t)?e.f():this.Ca(t)},_o.Ca=function(t){try{if(t==this.a)t:{var e=qu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!ns&&!this.a.$())){this.A||4!=e||7==n||va(8==n||0>=r?3:2),Va(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ya(12),Ba(this),qa(this);break t}ha(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ha(this,u)}this.I?(Ma(this,e,o),ns&&this.b&&3==e&&(aa(this.J,this.R,"tick",this.Wa),this.R.start())):(ha(this.c,this.f,o,null),Ha(this,o)),4==e&&Ba(this),this.b&&!this.A&&(4==e?ic(this.g,this):(this.b=!1,Ua(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ya(12)):(this.h=0,ya(13)),Ba(this),qa(this)}}}catch(c){}},_o.Wa=function(){if(this.a){var t=qu(this.a),e=this.a.$();this.D<e.length&&(Va(this),Ma(this,t,e),this.b&&4!=t&&Ua(this))}},_o.cancel=function(){this.A=!0,Ba(this)},_o.Va=function(){this.o=null;var t=Ro();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(va(3),ya(17)),Ba(this),this.h=2,qa(this)):ja(this,this.T-t)},(_o=Wa.prototype).K=function(){Ka(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},_o.L=function(){return Ka(this),this.a.concat()},_o.get=function(t,e){return Ga(this.b,t)?this.b[t]:e},_o.set=function(t,e){Ga(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},_o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ya(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ya){this.a=void 0!==e?e:t.a,Ja(this,t.f),this.j=t.j,$a(this,t.c),Za(this,t.h),this.g=t.g,e=t.b;var n=new lu;n.c=e.c,e.a&&(n.a=new Wa(e.a),n.b=e.b),tu(this,n),this.i=t.i}else t&&(n=String(t).match(Qa))?(this.a=!!e,Ja(this,n[1]||"",!0),this.j=ru(n[2]||""),$a(this,n[3]||"",!0),Za(this,n[4]),this.g=ru(n[5]||"",!0),tu(this,n[6]||"",!0),this.i=ru(n[7]||"")):(this.a=!!e,this.b=new lu(null,this.a))}function Xa(t){return new Ya(t)}function Ja(t,e,n){t.f=n?ru(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function $a(t,e,n){t.c=n?ru(e,!0):e}function Za(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tu(t,e,n){e instanceof lu?(t.b=e,function(t,e){e&&!t.f&&(fu(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(pu(this,e),vu(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=iu(e,cu)),t.b=new lu(e,t.a))}function eu(t,e,n){t.b.set(e,n)}function nu(t){return eu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ro()).toString(36)),t}function ru(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function iu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ou),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ou(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ya.prototype.toString=function(){var t=[],e=this.f;e&&t.push(iu(e,su,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(iu(e,su,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(iu(n,"/"==n.charAt(0)?uu:au,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",iu(n,hu)),t.join("")};var su=/[#\/\?@]/g,au=/[#\?:]/g,uu=/[#\?]/g,cu=/[#\?@]/g,hu=/#/g;function lu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fu(t){t.a||(t.a=new Wa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function pu(t,e){fu(t),e=gu(t,e),Ga(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ga((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ka(t)))}function du(t,e){return fu(t),e=gu(t,e),Ga(t.a.b,e)}function vu(t,e,n){pu(t,e),0<n.length&&(t.c=null,t.a.set(gu(t,e),Uo(n)),t.b+=n.length)}function gu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(_o=lu.prototype).add=function(t,e){fu(this),this.c=null,t=gu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},_o.forEach=function(t,e){fu(this),this.a.forEach((function(n,r){Mo(n,(function(n){t.call(e,n,r,this)}),this)}),this)},_o.L=function(){fu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},_o.K=function(t){fu(this);var e=[];if("string"==typeof t)du(this,t)&&(e=Fo(e,this.a.get(gu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Fo(e,t[n])}return e},_o.set=function(t,e){return fu(this),this.c=null,du(this,t=gu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},_o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},_o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var yu=function(t,e){this.b=t,this.a=e};function mu(t){this.g=t||_u,Io.PerformanceNavigationTiming?t=0<(t=Io.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Io.ia&&Io.ia.ya&&Io.ia.ya()&&Io.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var _u=10;function bu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wu(t){return t.b?1:t.a?t.a.size:0}function Iu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Eu(t,e){t.a?t.a.add(e):t.b=e}function Tu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Su(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=mo(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Uo(t.c)}function Cu(){}function Nu(){this.a=new Cu}function ku(t,e,n){var r=n||"";try{za(t,(function(t,n){var i=t;So(t)&&(i=Hs(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(W_){throw e.push(r+"type="+encodeURIComponent("_badmap")),W_}}function Au(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}mu.prototype.cancel=function(){var t,e;if(this.c=Su(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=mo(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Cu.prototype.stringify=function(t){return Io.JSON.stringify(t,void 0)},Cu.prototype.parse=function(t){return Io.JSON.parse(t,void 0)};var Pu=Io.JSON.parse;function Ou(t){Vs.call(this),this.headers=new Wa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ru,this.D=this.F=!1}Do(Ou,Vs);var Ru="",Du=/^https?$/i,xu=["POST","PUT"];function Lu(t){return"content-type"==t.toLowerCase()}function Mu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Fu(t),ju(t)}function Fu(t){t.u||(t.u=!0,qs(t,"complete"),qs(t,"error"))}function Uu(t){if(t.b&&void 0!==wo&&(!t.s[1]||4!=qu(t)||2!=t.W()))if(t.l&&4==qu(t))na(t.za,0,t);else if(qs(t,"readystatechange"),4==qu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Qa)[1]||null;if(!o&&Io.self&&Io.self.location){var s=Io.self.location.protocol;o=s.substr(0,s.length-1)}i=!Du.test(o?o.toLowerCase():"")}e=i}if(e)qs(t,"complete"),qs(t,"success");else{t.h=6;try{var a=2<qu(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.W()+"]",Fu(t)}}finally{ju(t)}}}function ju(t,e){if(t.a){Vu(t);var n=t.a,r=t.s[0]?Eo:null;t.a=null,t.s=null,e||qs(t,"ready");try{n.onreadystatechange=r}catch(W_){}}}function Vu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Io.clearTimeout(t.m),t.m=null)}function qu(t){return t.a?t.a.readyState:0}function Bu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ko(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):eu(t,e,n))}function Hu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zu(t){this.pa=0,this.g=[],this.c=new ca,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Hu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Hu("baseRetryDelayMs",5e3,t),this.Ra=Hu("retryDelaySeedMs",1e4,t),this.Ma=Hu("forwardChannelMaxRetries",2,t),this.ma=Hu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new mu(t&&t.concurrentRequestLimit),this.ka=new Nu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Wu(t){if(Gu(t),3==t.v){var e=t.R++,n=Xa(t.B);eu(n,"SID",t.J),eu(n,"RID",e),eu(n,"TYPE","terminate"),Ju(t,n),(e=new Pa(t,t.c,e,void 0)).H=2,e.i=nu(Xa(n)),n=!1,Io.navigator&&Io.navigator.sendBeacon&&(n=Io.navigator.sendBeacon(e.i.toString(),"")),!n&&Io.Image&&((new Image).src=e.i,n=!0),n||(e.a=cc(e.g,null),e.a.ba(e.i)),e.u=Ro(),Ua(e)}ac(t)}function Ku(t){t.a&&(ec(t),t.a.cancel(),t.a=null)}function Gu(t){Ku(t),t.j&&(Io.clearTimeout(t.j),t.j=null),rc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Io.clearTimeout(t.h),t.h=null)}function Qu(t,e){t.g.push(new yu(t.Oa++,e)),3==t.v&&Yu(t)}function Yu(t){bu(t.b)||t.h||(t.h=!0,Xs(t.Ba,t),t.u=0)}function Xu(t,e){var n;n=e?e.f:t.R++;var r=Xa(t.B);eu(r,"SID",t.J),eu(r,"RID",n),eu(r,"AID",t.P),Ju(t,r),t.i&&t.l&&Bu(r,t.i,t.l),n=new Pa(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=$u(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Eu(t.b,n),xa(n,r,e)}function Ju(t,e){t.f&&za({},(function(t,n){eu(e,n,t)}))}function $u(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Po(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ku(h,s,"req"+c+"_")}catch(l){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Zu(t){t.a||t.j||(t.T=1,Xs(t.Aa,t),t.o=0)}function tc(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=_a(Po(t.Aa,t),oc(t,t.o)),t.o++,!0)}function ec(t){null!=t.s&&(Io.clearTimeout(t.s),t.s=null)}function nc(t){t.a=new Pa(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Xa(t.la);eu(e,"RID","rpc"),eu(e,"SID",t.J),eu(e,"CI",t.H?"0":"1"),eu(e,"AID",t.P),Ju(t,e),eu(e,"TYPE","xmlhttp"),t.i&&t.l&&Bu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=nu(Xa(e)),n.j=null,n.I=!0,La(n,t)}function rc(t){null!=t.m&&(Io.clearTimeout(t.m),t.m=null)}function ic(t,e){var n=null;if(t.a==e){rc(t),ec(t),t.a=null;var r=2}else{if(!Iu(t.b,e))return;n=e.s,Tu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ro()-e.u;var i=t.u;qs(r=pa(),new ma(r,n,e,i)),Yu(t)}else Zu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=_a(Po(t.Ba,t,e),oc(t,t.u)),t.u++,0)))}(t,e)||2==r&&tc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:sc(t,5);break;case 4:sc(t,10);break;case 3:sc(t,6);break;default:sc(t,2)}}function oc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function sc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Po(t.Ya,t);n||(n=new Ya("//www.google.com/images/cleardot.gif"),Io.location&&"http"==Io.location.protocol||Ja(n,"https"),nu(n)),function(t,e){var n=new ca;if(Io.Image){var r=new Image;r.onload=Oo(Au,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Oo(Au,n,r,"TestLoadImage: error",!1,e),r.onabort=Oo(Au,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oo(Au,n,r,"TestLoadImage: timeout",!1,e),Io.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ya(2);t.v=0,t.f&&t.f.ra(e),ac(t),Gu(t)}function ac(t){t.v=0,t.I=-1,t.f&&(0==Su(t.b).length&&0==t.g.length||(t.b.c.length=0,Uo(t.g),t.g.length=0),t.f.qa())}function uc(t,e,n){var r=function(t){return t instanceof Ya?Xa(t):new Ya(t,void 0)}(n);if(""!=r.c)e&&$a(r,e+"."+r.c),Za(r,r.h);else{var i=Io.location;r=function(t,e,n,r){var i=new Ya(null,void 0);return t&&Ja(i,t),e&&$a(i,e),n&&Za(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ko(t.V,(function(t,e){eu(r,e,t)})),e=t.A,n=t.na,e&&n&&eu(r,e,n),eu(r,"VER",t.ha),Ju(t,r),r}function cc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ou(t.Na)).F=t.C,e}function hc(){}function lc(){if(ts&&!(10<=Number(ps)))throw Error("Environmental error: no available transport.")}function fc(t,e){Vs.call(this),this.a=new zu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!jo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new vc(this)}function pc(t){Na.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function dc(){ka.call(this),this.status=1}function vc(t){this.a=t}(_o=Ou.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ea(this.H):Ea(Sa),this.a.onreadystatechange=Po(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Mu(this,o)}t=n||"";var i=new Wa(this.headers);r&&za(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Lu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Io.FormData&&t instanceof Io.FormData,!(0<=Lo(xu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Vu(this),0<this.o&&((this.D=function(t){return ts&&ls(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Po(this.xa,this)):this.m=na(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Mu(this,o)}},_o.xa=function(){void 0!==wo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,qs(this,"timeout"),this.abort(8))},_o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,qs(this,"complete"),qs(this,"abort"),ju(this))},_o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ju(this,!0)),Ou.X.G.call(this)},_o.za=function(){this.j||(this.A||this.l||this.g?Uu(this):this.Ua())},_o.Ua=function(){Uu(this)},_o.W=function(){try{return 2<qu(this)?this.a.status:-1}catch($o){return-1}},_o.$=function(){try{return this.a?this.a.responseText:""}catch($o){return""}},_o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Pu(e)}},_o.ua=function(){return this.h},_o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(_o=zu.prototype).ha=8,_o.v=1,_o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Pa(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Yo(r=Go(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=$u(this,n,e),eu(i=Xa(this.B),"RID",t),eu(i,"CVER",22),this.A&&eu(i,"X-HTTP-Session-Id",this.A),Ju(this,i),this.i&&r&&Bu(i,this.i,r),Eu(this.b,n),this.Ia&&eu(i,"TYPE","init"),this.da?(eu(i,"$req",e),eu(i,"SID","null"),n.U=!0,xa(n,i,null)):xa(n,i,e),this.v=2}}else 3==this.v&&(t?Xu(this,t):0==this.g.length||bu(this.b)||Xu(this))},_o.Aa=function(){if(this.j=null,nc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=_a(Po(this.Ta,this),t)}},_o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ya(10),Ku(this),nc(this))},_o.Sa=function(){null!=this.m&&(this.m=null,Ku(this),tc(this),ya(19))},_o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ya(2)):(this.c.info("Failed to ping google.com"),ya(1))},(_o=hc.prototype).ta=function(){},_o.sa=function(){},_o.ra=function(){},_o.qa=function(){},_o.Ja=function(){},lc.prototype.a=function(t,e){return new fc(t,e)},Do(fc,Vs),fc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ya(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=uc(t,null,t.fa),Yu(t)},fc.prototype.close=function(){Wu(this.a)},fc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Qu(this.a,e)}else this.l?((e={}).__data__=Hs(t),Qu(this.a,e)):Qu(this.a,t)},fc.prototype.G=function(){this.a.f=null,delete this.f,Wu(this.a),delete this.a,fc.X.G.call(this)},Do(pc,Na),Do(dc,ka),Do(vc,hc),vc.prototype.ta=function(){qs(this.a,"a")},vc.prototype.sa=function(t){qs(this.a,new pc(t))},vc.prototype.ra=function(t){qs(this.a,new dc(t))},vc.prototype.qa=function(){qs(this.a,"b")},lc.prototype.createWebChannel=lc.prototype.a,fc.prototype.send=fc.prototype.h,fc.prototype.open=fc.prototype.g,fc.prototype.close=fc.prototype.close,ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,wa.COMPLETE="complete",Ta.EventType=Ca,Ca.OPEN="a",Ca.CLOSE="b",Ca.ERROR="c",Ca.MESSAGE="d",Vs.prototype.listen=Vs.prototype.va,Ou.prototype.listenOnce=Ou.prototype.wa,Ou.prototype.getLastError=Ou.prototype.Qa,Ou.prototype.getLastErrorCode=Ou.prototype.ua,Ou.prototype.getStatus=Ou.prototype.W,Ou.prototype.getResponseJson=Ou.prototype.Pa,Ou.prototype.getResponseText=Ou.prototype.$,Ou.prototype.send=Ou.prototype.ba;var gc=ba,yc=wa,mc=la,_c=10,bc=11,wc=Ta,Ic=Ou,Ec=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Tc=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Sc=new Xt("@firebase/firestore");function Cc(){return Sc.logLevel}function Nc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Sc.logLevel<=Bt.DEBUG){var r=e.map(Pc);Sc.debug.apply(Sc,X(["Firestore (8.2.9): "+t],r))}}function kc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Sc.logLevel<=Bt.ERROR){var r=e.map(Pc);Sc.error.apply(Sc,X(["Firestore (8.2.9): "+t],r))}}function Ac(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Sc.logLevel<=Bt.WARN){var r=e.map(Pc);Sc.warn.apply(Sc,X(["Firestore (8.2.9): "+t],r))}}function Pc(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw kc(e),new Error(e)}function Rc(t,e){t||Oc()}function Dc(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=xc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Mc(t,e){return t<e?-1:t>e?1:0}function Fc(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Uc(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jc=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Mc(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();jc.T=new jc("");var Vc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return H(e,t),e}(Error),Bc=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(jc.fromBase64String(e))}catch(n){throw new qc(Vc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(jc.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Hc=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Hc.UNAUTHENTICATED=new Hc(null),Hc.R=new Hc("google-credentials-uid"),Hc.P=new Hc("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zc=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Wc=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Hc.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Kc=function(){function t(t){var e=this;this.D=null,this.currentUser=Hc.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(Nc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Rc("string"==typeof n.accessToken),new zc(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Rc(null===t||"string"==typeof t),new Hc(t)},t}(),Gc=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Hc.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Qc=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Gc(this.F,this.O))},t.prototype.v=function(t){t(Hc.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Yc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Yc.q=-1;var Xc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new qc(Vc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new qc(Vc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qc(Vc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qc(Vc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Mc(this.nanoseconds,t.nanoseconds):Mc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Jc=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Xc(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),$c=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Oc(),void 0===n?n=t.length-e:n>t.length-e&&Oc(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Zc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new qc(Vc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}($c),th=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return th.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new qc(Vc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new qc(Vc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new qc(Vc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new qc(Vc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}($c),nh=function(){function t(t){this.path=t}return t._t=function(e){return new t(Zc.ot(e))},t.ft=function(e){return new t(Zc.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Zc.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Zc.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Zc(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ih(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sh=function(){function t(t){this.fields=t,t.sort(eh.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Fc(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ah=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){if(Rc(!!t),"string"==typeof t){var e=0,n=ah.exec(t);if(Rc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ch(t.seconds),nanos:ch(t.nanos)}}function ch(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function hh(t){return"string"==typeof t?jc.fromBase64String(t):jc.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fh(t){var e=t.mapValue.fields.__previous_value__;return lh(e)?fh(e):e}function ph(t){var e=uh(t.mapValue.fields.__local_write_time__.timestampValue);return new Xc(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){return null==t}function vh(t){return 0===t&&1/t==-1/0}function gh(t){return"number"==typeof t&&Number.isInteger(t)&&!vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lh(t)?4:10:Oc()}function mh(t,e){var n,r=yh(t);if(r!==yh(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ph(t).isEqual(ph(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=uh(t.timestampValue),r=uh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,hh(t.bytesValue).isEqual(hh(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ch(t.geoPointValue.latitude)===ch(e.geoPointValue.latitude)&&ch(t.geoPointValue.longitude)===ch(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ch(t.integerValue)===ch(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ch(t.doubleValue),r=ch(e.doubleValue);return n===r?vh(n)===vh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Fc(t.arrayValue.values||[],e.arrayValue.values||[],mh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(rh(n)!==rh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!mh(n[i],r[i])))return!1;return!0}(t,e);default:return Oc()}}function _h(t,e){return void 0!==(t.values||[]).find((function(t){return mh(t,e)}))}function bh(t,e){var n,r,i,o,s=yh(t),a=yh(e);if(s!==a)return Mc(s,a);switch(s){case 0:return 0;case 1:return Mc(t.booleanValue,e.booleanValue);case 2:return r=e,i=ch((n=t).integerValue||n.doubleValue),o=ch(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return wh(t.timestampValue,e.timestampValue);case 4:return wh(ph(t),ph(e));case 5:return Mc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=hh(t),r=hh(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Mc(n[i],r[i]);if(0!==o)return o}return Mc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Mc(ch(t.latitude),ch(e.latitude));return 0!==n?n:Mc(ch(t.longitude),ch(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=bh(n[i],r[i]);if(o)return o}return Mc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Mc(r[s],o[s]);if(0!==a)return a;var u=bh(n[r[s]],i[o[s]]);if(0!==u)return u}return Mc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Oc()}}function wh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Mc(t,e);var n=uh(t),r=uh(e),i=Mc(n.seconds,r.seconds);return 0!==i?i:Mc(n.nanos,r.nanos)}function Ih(t){return Eh(t)}function Eh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=uh(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?hh(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,nh.ft(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Eh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Eh(t.fields[o])}return e+"}"}(t.mapValue):Oc();var e,n,r,i}function Th(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Sh(t){return!!t&&"integerValue"in t}function Ch(t){return!!t&&"arrayValue"in t}function Nh(t){return!!t&&"nullValue"in t}function kh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ah(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ph=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ah(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return mh(this.proto,t.proto)},t}(),Oh=function(){function t(t){void 0===t&&(t=Ph.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===yh(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(eh.ct(),this.At);return null!=t?new Ph(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Ah(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Rh(t){var e=[];return ih(t.fields||{},(function(t,n){var r=new eh([t]);if(Ah(n)){var i=Rh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new sh(e)}var Dh=function(t,e){this.key=t,this.version=e},xh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return H(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Dh),Lh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return H(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Dh),Mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Dh),Fh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Uh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Fh(t,e,n,r,i,o,s)}function jh(t){var e=Dc(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.rt()+e.op.toString()+Ih(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.rt()+e.dir;var e})).join(","),dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=$h(e.startAt)),e.endAt&&(n+="|ub:",n+=$h(e.endAt)),e.vt=n}return e.vt}function Vh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!tl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!mh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nl(t.startAt,e.startAt)&&nl(t.endAt,e.endAt)}function qh(t){return nh.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return H(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Hh(t,n,r):"array-contains"===n?new Gh(t,r):"in"===n?new Qh(t,r):"not-in"===n?new Yh(t,r):"array-contains-any"===n?new Xh(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new zh(t,n):new Wh(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(bh(e,this.value)):null!==e&&yh(this.value)===yh(e)&&this.Dt(bh(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Oc()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Hh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=nh.ft(r.referenceValue),i}return H(e,t),e.prototype.matches=function(t){var e=nh.H(t.key,this.key);return this.Dt(e)},e}(Bh),zh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Kh("in",n),r}return H(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Bh),Wh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Kh("not-in",n),r}return H(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Bh);function Kh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return nh.ft(t.referenceValue)}))}var Gh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return H(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ch(e)&&_h(e.arrayValue,this.value)},e}(Bh),Qh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return H(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&_h(this.value.arrayValue,e)},e}(Bh),Yh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return H(e,t),e.prototype.matches=function(t){if(_h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!_h(this.value.arrayValue,e)},e}(Bh),Xh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return H(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return _h(e.value.arrayValue,t)}))},e}(Bh),Jh=function(t,e){this.position=t,this.before=e};function $h(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ih(t)})).join(",")}var Zh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function tl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function el(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?nh.H(nh.ft(s.referenceValue),n.key):bh(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function nl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!mh(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function il(t,e,n,r,i,o,s,a){return new rl(t,e,n,r,i,o,s,a)}function ol(t){return new rl(t)}function sl(t){return!dh(t.limit)&&"F"===t.limitType}function al(t){return!dh(t.limit)&&"L"===t.limitType}function ul(t){return t.xt.length>0?t.xt[0].field:null}function cl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function hl(t){return null!==t.collectionGroup}function ll(t){var e=Dc(t);if(null===e.Nt){e.Nt=[];var n=cl(e),r=ul(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Zh(n)),e.Nt.push(new Zh(eh.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Zh(eh.ht(),u))}}}return e.Nt}function fl(t){var e=Dc(t);if(!e.$t)if("F"===e.limitType)e.$t=Uh(e.path,e.collectionGroup,ll(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ll(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Zh(o.field,s))}var a=e.endAt?new Jh(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Jh(e.startAt.position,!e.startAt.before):null;e.$t=Uh(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function pl(t,e,n){return new rl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dl(t,e){return Vh(fl(t),fl(e))&&t.limitType===e.limitType}function vl(t){return jh(fl(t))+"|lt:"+t.limitType}function gl(t){return"Query(target="+(e=fl(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+Ih(e.value);var e})).join(", ")+"]"),dh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.rt()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+$h(e.startAt)),e.endAt&&(n+=", endAt: "+$h(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function yl(t,e){return n=t,i=(r=e).key.path,(null!==n.collectionGroup?r.key.dt(n.collectionGroup)&&n.path.nt(i):nh.wt(n.path)?n.path.isEqual(i):n.path.st(i))&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!el(t.startAt,ll(t),e)||t.endAt&&el(t.endAt,ll(t),e))}(t,e);var n,r,i}function ml(t){return function(e,n){for(var r=!1,i=0,o=ll(t);i<o.length;i++){var s=o[i],a=_l(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function _l(t,e,n){var r,i,o,s,a=t.field.ut()?nh.H(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?bh(o,s):Oc());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Oc()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bl=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Jc.min()),void 0===o&&(o=Jc.min()),void 0===s&&(s=jc.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function Il(t){return{integerValue:""+t}}function El(t,e){return gh(e)?Il(e):wl(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tl=function(){this.qt=void 0};function Sl(t,e,n){return t instanceof kl?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Al?Pl(t,e):t instanceof Ol?Rl(t,e):function(t,e){var n=Nl(t,e),r=xl(n)+xl(t.Ut);return Sh(n)&&Sh(t.Ut)?Il(r):wl(t.Qt,r)}(t,e);var r,i,o}function Cl(t,e,n){return t instanceof Al?Pl(t,e):t instanceof Ol?Rl(t,e):n}function Nl(t,e){return t instanceof Dl?Sh(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e}(Tl),Al=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return H(e,t),e}(Tl);function Pl(t,e){for(var n=Ll(e),r=function(t){n.some((function(e){return mh(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ol=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return H(e,t),e}(Tl);function Rl(t,e){for(var n=Ll(e),r=function(t){n=n.filter((function(e){return!mh(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Dl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return H(e,t),e}(Tl);function xl(t){return ch(t.integerValue||t.doubleValue)}function Ll(t){return Ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ml=function(t,e){this.field=t,this.transform=e},Fl=function(t,e){this.version=t,this.transformResults=e},Ul=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function jl(t,e){return void 0!==t.updateTime?e instanceof xh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof xh}var Vl=function(){};function ql(t,e,n){return t instanceof Kl?function(t,e,n){var r=t.value;if(n.transformResults){var i=Yl(t.fieldTransforms,e,n.transformResults);r=Jl(t.fieldTransforms,r,i)}return new xh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Gl?function(t,e,n){if(!jl(t.jt,e))return new Mh(t.key,n.version);var r=Ql(t,e,n.transformResults?Yl(t.fieldTransforms,e,n.transformResults):[]);return new xh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):(r=n,new Lh(t.key,r.version,{hasCommittedMutations:!0}));var r}function Bl(t,e,n){return t instanceof Kl?function(t,e,n){if(!jl(t.jt,e))return e;var r=t.value,i=Xl(t.fieldTransforms,n,e);r=Jl(t.fieldTransforms,r,i);var o=Wl(e);return new xh(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Gl?function(t,e,n){if(!jl(t.jt,e))return e;var r=Wl(e),i=Ql(t,e,Xl(t.fieldTransforms,n,e));return new xh(t.key,r,i,{Vt:!0})}(t,e,n):(i=e,jl((r=t).jt,i)?new Lh(r.key,Jc.min()):i);var r,i}function Hl(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof xh?e.field(o.field):void 0,a=Nl(o.transform,s||null);null!=a&&(n=null==n?(new Oh).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function zl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Fc(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Al&&o instanceof Al||i instanceof Ol&&o instanceof Ol?Fc(i.elements,o.elements,mh):i instanceof Dl&&o instanceof Dl?mh(i.Ut,o.Ut):i instanceof kl&&o instanceof kl);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function Wl(t){return t instanceof xh?t.version:Jc.min()}var Kl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return H(e,t),e}(Vl),Gl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return H(e,t),e}(Vl);function Ql(t,e,n){var r,i,o,s;return i=t,o=r=e instanceof xh?e.data():Ph.empty(),s=new Oh(o),i.Gt.fields.forEach((function(t){if(!t.et()){var e=i.data.field(t);null!==e?s.set(t,e):s.delete(t)}})),r=s.Pt(),Jl(t.fieldTransforms,r,n)}function Yl(t,e,n){var r=[];Rc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof xh&&(a=e.field(o.field)),r.push(Cl(s,a,n[i]))}return r}function Xl(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof xh&&(u=n.field(s.field)),r.push(Sl(a,u,e))}return r}function Jl(t,e,n){for(var r=new Oh(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var $l,Zl,tf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return H(e,t),e}(Vl),ef=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return H(e,t),e}(Vl),nf=function(t){this.count=t};function rf(t){switch(t){case Vc.OK:return Oc();case Vc.CANCELLED:case Vc.UNKNOWN:case Vc.DEADLINE_EXCEEDED:case Vc.RESOURCE_EXHAUSTED:case Vc.INTERNAL:case Vc.UNAVAILABLE:case Vc.UNAUTHENTICATED:return!1;case Vc.INVALID_ARGUMENT:case Vc.NOT_FOUND:case Vc.ALREADY_EXISTS:case Vc.PERMISSION_DENIED:case Vc.FAILED_PRECONDITION:case Vc.ABORTED:case Vc.OUT_OF_RANGE:case Vc.UNIMPLEMENTED:case Vc.DATA_LOSS:return!0;default:return Oc()}}function of(t){if(void 0===t)return kc("GRPC error has no .code"),Vc.UNKNOWN;switch(t){case $l.OK:return Vc.OK;case $l.CANCELLED:return Vc.CANCELLED;case $l.UNKNOWN:return Vc.UNKNOWN;case $l.DEADLINE_EXCEEDED:return Vc.DEADLINE_EXCEEDED;case $l.RESOURCE_EXHAUSTED:return Vc.RESOURCE_EXHAUSTED;case $l.INTERNAL:return Vc.INTERNAL;case $l.UNAVAILABLE:return Vc.UNAVAILABLE;case $l.UNAUTHENTICATED:return Vc.UNAUTHENTICATED;case $l.INVALID_ARGUMENT:return Vc.INVALID_ARGUMENT;case $l.NOT_FOUND:return Vc.NOT_FOUND;case $l.ALREADY_EXISTS:return Vc.ALREADY_EXISTS;case $l.PERMISSION_DENIED:return Vc.PERMISSION_DENIED;case $l.FAILED_PRECONDITION:return Vc.FAILED_PRECONDITION;case $l.ABORTED:return Vc.ABORTED;case $l.OUT_OF_RANGE:return Vc.OUT_OF_RANGE;case $l.UNIMPLEMENTED:return Vc.UNIMPLEMENTED;case $l.DATA_LOSS:return Vc.DATA_LOSS;default:return Oc()}}(Zl=$l||($l={}))[Zl.OK=0]="OK",Zl[Zl.CANCELLED=1]="CANCELLED",Zl[Zl.UNKNOWN=2]="UNKNOWN",Zl[Zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zl[Zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zl[Zl.NOT_FOUND=5]="NOT_FOUND",Zl[Zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zl[Zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zl[Zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zl[Zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zl[Zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zl[Zl.ABORTED=10]="ABORTED",Zl[Zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zl[Zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zl[Zl.INTERNAL=13]="INTERNAL",Zl[Zl.UNAVAILABLE=14]="UNAVAILABLE",Zl[Zl.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sf=function(){function t(t,e){this.H=t,this.root=e||uf.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,uf.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,uf.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new af(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new af(this.root,t,this.H,!1)},t.prototype.ne=function(){return new af(this.root,null,this.H,!0)},t.prototype.se=function(t){return new af(this.root,t,this.H,!0)},t}(),af=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),uf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Oc();if(this.right.le())throw Oc();var t=this.left.Ie();if(t!==this.right.Ie())throw Oc();return t+(this.le()?0:1)},t}();uf.EMPTY=null,uf.RED=!0,uf.Ht=!1,uf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Oc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Oc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Oc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Oc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Oc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new uf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cf=function(){function t(t){this.H=t,this.data=new sf(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new hf(this.data.te())},t.prototype.ee=function(t){return new hf(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),hf=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),lf=new sf(nh.H);function ff(){return lf}function pf(){return ff()}var df=new sf(nh.H);function vf(){return df}var gf=new sf(nh.H);function yf(){return gf}var mf=new cf(nh.H);function _f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=mf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var bf=new cf(Mc);function wf(){return bf}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var If=function(){function t(t){this.H=t?function(e,n){return t(e,n)||nh.H(e.key,n.key)}:function(t,e){return nh.H(t.key,e.key)},this.ge=vf(),this.Ve=new sf(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Ef=function(){function t(){this.be=new sf(nh.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Oc():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),Tf=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,If.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&dl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Sf=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Cf.Le(e,n)),new t(Jc.min(),r,wf(),ff(),_f())},t}(),Cf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(jc.T,n,_f(),_f(),_f())},t}(),Nf=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},kf=function(t,e){this.targetId=t,this.je=e},Af=function(t,e,n,r){void 0===n&&(n=jc.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Pf=function(){function t(){this.Ge=0,this.ze=Df(),this.He=jc.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=_f(),e=_f(),n=_f();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Oc()}})),new Cf(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Df()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),Of=function(){function t(t){this.un=t,this.hn=new Map,this.ln=ff(),this._n=Rf(),this.fn=new cf(Mc)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof xh?this.wn(r,t.We):t.We instanceof Lh&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Oc()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(qh(i))if(0===n){var o=new nh(i.path);this.En(e,o,new Lh(o,Jc.min()))}else Rc(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&qh(o.target)){var s=new nh(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Lh(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=_f();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Sf(t,n,this.fn,this.ln,r);return this.ln=ff(),this._n=Rf(),this.fn=new cf(Mc),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Pf,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new cf(Mc),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Nc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Pf),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){return new sf(nh.H)}function Df(){return new sf(nh.H)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xf={asc:"ASCENDING",desc:"DESCENDING"},Lf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mf=function(t,e){this.t=t,this.Bt=e};function Ff(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uf(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function jf(t,e){return Ff(t,e.j())}function Vf(t){return Rc(!!t),Jc.K((e=uh(t),new Xc(e.seconds,e.nanos)));var e}function qf(t,e){return(n=t,new Zc(["projects",n.projectId,"databases",n.database])).child("documents").child(e).rt();var n}function Bf(t){var e=Zc.ot(t);return Rc(fp(e)),e}function Hf(t,e){return qf(t.t,e.path)}function zf(t,e){var n=Bf(e);if(n.get(1)!==t.t.projectId)throw new qc(Vc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new qc(Vc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new nh(Qf(n))}function Wf(t,e){return qf(t.t,e)}function Kf(t){var e=Bf(t);return 4===e.length?Zc.ct():Qf(e)}function Gf(t){return new Zc(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Qf(t){return Rc(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Yf(t,e,n){return{name:Hf(t,e),fields:n.proto.mapValue.fields}}function Xf(t,e,n){var r=zf(t,e.name),i=Vf(e.updateTime),o=new Ph({mapValue:{fields:e.fields}});return new xh(r,i,o,{hasCommittedMutations:!!n})}function Jf(t,e){var n,r,i;if(e instanceof Kl)n={update:Yf(t,e.key,e.value)};else if(e instanceof tf)n={delete:Hf(t,e.key)};else if(e instanceof Gl)n={update:Yf(t,e.key,e.data),updateMask:lp(e.Gt)};else{if(!(e instanceof ef))return Oc();n={verify:Hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof kl)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Al)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Ol)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Dl)return{fieldPath:e.field.rt(),increment:n.Ut};throw Oc()}(0,t)}))),e.jt.Wt||(n.currentDocument=(r=t,void 0!==(i=e.jt).updateTime?{updateTime:jf(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Oc())),n}function $f(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Ul.updateTime(Vf(n.updateTime)):void 0!==n.exists?Ul.exists(n.exists):Ul.Kt():Ul.Kt(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Rc("REQUEST_TIME"===e.setToServerValue),n=new kl;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Al(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ol(i)}else"increment"in e?n=new Dl(t,e.increment):Oc();var o=eh.lt(e.fieldPath);return new Ml(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=zf(t,e.update.name),s=new Ph({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new sh(e.map((function(t){return eh.lt(t)})))}(e.updateMask);return new Gl(o,s,a,r,i)}return new Kl(o,s,r,i)}if(e.delete){var u=zf(t,e.delete);return new tf(u,r)}if(e.verify){var c=zf(t,e.verify);return new ef(c,r)}return Oc()}function Zf(t,e){return{documents:[Wf(t,e.path)]}}function tp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Wf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Wf(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(kh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NAN"}};if(Nh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(kh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NAN"}};if(Nh(t.value))return{unaryFilter:{field:ap(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ap(t.field),op:sp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:ap((e=t).field),direction:op(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.Bt||dh(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=rp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=rp(e.endAt)),n}function ep(t){var e=Kf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=np(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Zh(up((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,h=null;n.limit&&(u=n.limit,h=dh(c="object"==typeof u?u.value:u)?null:c);var l=null;n.startAt&&(l=ip(n.startAt));var f=null;return n.endAt&&(f=ip(n.endAt)),il(e,i,a,s,h,"F",l,f)}function np(t){return t?void 0!==t.unaryFilter?[hp(t)]:void 0!==t.fieldFilter?[cp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return np(t)})).reduce((function(t,e){return t.concat(e)})):Oc():[]}function rp(t){return{before:t.before,values:t.position}}function ip(t){var e=!!t.before,n=t.values||[];return new Jh(n,e)}function op(t){return xf[t]}function sp(t){return Lf[t]}function ap(t){return{fieldPath:t.rt()}}function up(t){return eh.lt(t.fieldPath)}function cp(t){return Bh.create(up(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Oc()}}(t.fieldFilter.op),t.fieldFilter.value)}function hp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=up(t.unaryFilter.field);return Bh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=up(t.unaryFilter.field);return Bh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=up(t.unaryFilter.field);return Bh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=up(t.unaryFilter.field);return Bh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Oc()}}function lp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function fp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},dp=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Oc(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),vp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new pp,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new mp(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Ep(e.target.error);n.Bn.reject(new mp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new mp(n,o)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Nc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new bp(e)},t}(),gp=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(at())&&kc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Nc("SimpleDb","Removing database:",t),wp(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=at(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return W(this,void 0,void 0,(function(){var e,n=this;return K(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Nc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new mp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new qc(Vc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new mp(t,n))},i.onupgradeneeded=function(t){Nc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){Nc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o,s,a,u;return K(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return K(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=l.sent(),e=vp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),dp.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Nc("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),yp=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return wp(this.Zn.delete())},t}(),mp=function(t){function e(e,n){var r=this;return(r=t.call(this,Vc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return H(e,t),e}(qc);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return"IndexedDbTransactionError"===t.name}var bp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Nc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Nc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),wp(n)},t.prototype.add=function(t){return Nc("SimpleDb","ADD",this.store.name,t,t),wp(this.store.add(t))},t.prototype.get=function(t){var e=this;return wp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Nc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Nc("SimpleDb","DELETE",this.store.name,t),wp(this.store.delete(t))},t.prototype.count=function(){return Nc("SimpleDb","COUNT",this.store.name),wp(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){Nc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new dp((function(n,r){e.onerror=function(t){var e=Ep(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new dp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new yp(i),s=e(i.primaryKey,i.value,o);if(s instanceof dp){var a=s.catch((function(t){return o.done(),dp.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return dp.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function wp(t){return new dp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ep(t.target.error);n(e)}}))}var Ip=!1;function Ep(t){var e=gp.Qn(at());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new qc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ip||(Ip=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tp=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new pp,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new qc(Vc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Sp(t,e){if(kc("AsyncQueue",e+": "+t),_p(t))return new qc(Vc.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Np=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Pp(e)),e=Ap(t.get(n),e);return Pp(e)}function Ap(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Pp(t){return t+""}function Op(t){var e=t.length;if(Rc(e>=2),2===e)return Rc(""===t.charAt(0)&&""===t.charAt(1)),Zc.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Oc(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Oc()}o=s+2}return new Zc(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rp=function(t,e){this.seconds=t,this.nanoseconds=e},Dp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Dp.store="owner",Dp.key="owner";var xp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};xp.store="mutationQueues",xp.keyPath="userId";var Lp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Lp.store="mutations",Lp.keyPath="batchId",Lp.userMutationsIndex="userMutationsIndex",Lp.userMutationsKeyPath=["userId","batchId"];var Mp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,kp(e)]},t.key=function(t,e,n){return[t,kp(e),n]},t}();Mp.store="documentMutations",Mp.PLACEHOLDER=new Mp;var Fp=function(t,e){this.path=t,this.readTime=e},Up=function(t,e){this.path=t,this.version=e},jp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};jp.store="remoteDocuments",jp.readTimeIndex="readTimeIndex",jp.readTimeIndexPath="readTime",jp.collectionReadTimeIndex="collectionReadTimeIndex",jp.collectionReadTimeIndexPath=["parentPath","readTime"];var Vp=function(t){this.byteSize=t};Vp.store="remoteDocumentGlobal",Vp.key="remoteDocumentGlobalKey";var qp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};qp.store="targets",qp.keyPath="targetId",qp.queryTargetsIndexName="queryTargetsIndex",qp.queryTargetsKeyPath=["canonicalId","targetId"];var Bp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Bp.store="targetDocuments",Bp.keyPath=["targetId","path"],Bp.documentTargetsIndex="documentTargetsIndex",Bp.documentTargetsKeyPath=["path","targetId"];var Hp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Hp.key="targetGlobalKey",Hp.store="targetGlobal";var zp=function(t,e){this.collectionId=t,this.parent=e};zp.store="collectionParents",zp.keyPath=["collectionId","parent"];var Wp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Wp.store="clientMetadata",Wp.keyPath="clientId";var Kp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Kp.store="bundles",Kp.keyPath="bundleId";var Gp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Gp.store="namedQueries",Gp.keyPath="name";var Qp=X(X(X(X([xp.store,Lp.store,Mp.store,jp.store,qp.store,Dp.store,Hp.store,Bp.store],[Wp.store]),[Vp.store]),[zp.store]),[Kp.store,Gp.store]),Yp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return H(e,t),e}(Np);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){var n=Dc(t);return gp.zn(n.ps,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jp=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ql(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Bl(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Bl(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),_f())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Fc(this.mutations,t.mutations,(function(t,e){return zl(t,e)}))&&Fc(this.baseMutations,t.baseMutations,(function(t,e){return zl(t,e)}))},t}(),$p=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Rc(e.mutations.length===r.length);for(var i=yf(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Zp=function(t){this.Fs=t};function td(t,e){if(e.document)return Xf(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=nh.Et(e.noDocument.path),r=od(e.noDocument.readTime);return new Lh(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=nh.Et(e.unknownDocument.path);return r=od(e.unknownDocument.version),new Mh(i,r)}return Oc()}function ed(t,e,n){var r,i,o=nd(n),s=e.key.path.X().it();if(e instanceof xh){var a={name:Hf(r=t.Fs,(i=e).key),fields:i.bt().mapValue.fields,updateTime:Ff(r,i.version.j())},u=e.hasCommittedMutations;return new jp(null,null,a,u,o,s)}if(e instanceof Lh){var c=e.key.path.it(),h=id(e.version);return u=e.hasCommittedMutations,new jp(null,new Fp(c,h),null,u,o,s)}if(e instanceof Mh){var l=e.key.path.it(),f=id(e.version);return new jp(new Up(l,f),null,null,!0,o,s)}return Oc()}function nd(t){var e=t.j();return[e.seconds,e.nanoseconds]}function rd(t){var e=new Xc(t[0],t[1]);return Jc.K(e)}function id(t){var e=t.j();return new Rp(e.seconds,e.nanoseconds)}function od(t){var e=new Xc(t.seconds,t.nanoseconds);return Jc.K(e)}function sd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return $f(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return $f(t.Fs,e)})),a=Xc.fromMillis(e.localWriteTimeMs);return new Jp(e.batchId,a,n,s)}function ad(t){var e,n,r=od(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?od(t.lastLimboFreeSnapshotVersion):Jc.min();return void 0!==t.query.documents?(Rc(1===(n=t.query).documents.length),e=fl(ol(Kf(n.documents[0])))):e=fl(ep(t.query)),new bl(e,t.targetId,0,t.lastListenSequenceNumber,r,i,jc.fromBase64String(t.resumeToken))}function ud(t,e){var n,r=id(e.Ot),i=id(e.lastLimboFreeSnapshotVersion);n=qh(e.target)?Zf(t.Fs,e.target):tp(t.Fs,e.target);var o=e.resumeToken.toBase64();return new qp(e.targetId,jh(e.target),r,o,e.sequenceNumber,i,n)}function cd(t){var e=ep({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?pl(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hd=function(){function t(){}return t.prototype.Os=function(t,e){return ld(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:od(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return ld(t).put({bundleId:(n=e).id,createTime:id(Vf(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return fd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:cd(e.bundledQuery),readTime:od(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return fd(t).put({name:(n=e).name,readTime:id(Vf(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function ld(t){return Xp(t,Kp.store)}function fd(t){return Xp(t,Gp.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pd=function(){function t(){this.Bs=new dd}return t.prototype.qs=function(t,e){return this.Bs.add(e),dp.resolve()},t.prototype.Us=function(t,e){return dp.resolve(this.Bs.getEntries(e))},t}(),dd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new cf(Zc.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new cf(Zc.H)).it()},t}(),vd=function(){function t(){this.Qs=new dd}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:kp(i)};return gd(t).put(o)}return dp.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Uc(e),""],!1,!0);return gd(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Op(o.parent))}return n}))},t}();function gd(t){return Xp(t,zp.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yd={Ks:!1,Ws:0,js:0,Gs:0},md=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){if(t.code!==Vc.FAILED_PRECONDITION||t.message!==Cp)throw t;return Nc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */md.Xs=10,md.Zs=1e3,md.ti=new md(41943040,md.Xs,md.Zs),md.ei=new md(-1,0,0);var bd=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ih(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return oh(this.ii)},t}(),wd=function(){function t(){this.ri=new bd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Jc.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?dp.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t,e,n){var r=t.store(Lp.store),i=t.store(Mp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Rc(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Mp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return dp.Mn(o).next((function(){return c}))}function Ed(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oc();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Td=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Rc(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cd(t).hs({index:Lp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=Nd(t),s=Cd(t);return s.add({}).next((function(a){Rc("number"==typeof a);for(var u=new Jp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Jf(t.Fs,e)})),i=n.mutations.map((function(e){return Jf(t.Fs,e)}));return new Lp(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],l=new cf((function(t,e){return Mc(t.rt(),e.rt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Mp.key(i.userId,d.key.path,a);l=l.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,Mp.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),dp.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return Cd(t).get(e).next((function(t){return t?(Rc(t.userId===n.userId),sd(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?dp.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Cd(t).hs({index:Lp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Rc(e.batchId>=r),o=sd(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Cd(t).hs({index:Lp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cd(t).rs(Lp.userMutationsIndex,n).next((function(t){return t.map((function(t){return sd(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=Mp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Nd(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Op(u);if(a===n.userId&&e.path.isEqual(h))return Cd(t).get(c).next((function(t){if(!t)throw Oc();Rc(t.userId===n.userId),o.push(sd(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new cf(Mc),i=[];return e.forEach((function(e){var o=Mp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Nd(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Op(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),dp.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=Mp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new cf(Mc);return Nd(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Op(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Cd(t).get(e).next((function(t){if(null===t)throw Oc();Rc(t.userId===n.userId),r.push(sd(n.Qt,t))})))})),dp.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return Id(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),dp.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return dp.resolve();var r=IDBKeyRange.lowerBound(Mp.prefixForUser(e.userId)),i=[];return Nd(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Op(t[1]);i.push(o)}else r.done()})).next((function(){Rc(0===i.length)}))}))},t.prototype.Fi=function(t,e){return Sd(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return kd(t).get(this.userId).next((function(t){return t||new xp(e.userId,-1,"")}))},t}();function Sd(t,e,n){var r=Mp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Nd(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Cd(t){return Xp(t,Lp.store)}function Nd(t){return Xp(t,Mp.store)}function kd(t){return Xp(t,xp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ad=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Pd=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new Ad(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return Jc.K(new Xc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return Od(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return Rc(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Od(t).hs((function(s,a){var u=ad(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return dp.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return Od(t).hs((function(t,n){var r=ad(n);e(r)}))},t.prototype.qi=function(t){return Rd(t).get(Hp.key).next((function(t){return Rc(null!==t),t}))},t.prototype.Ui=function(t,e){return Rd(t).put(Hp.key,e)},t.prototype.Gi=function(t,e){return Od(t).put(ud(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=jh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Od(t).hs({range:r,index:qp.queryTargetsIndexName},(function(t,n,r){var o=ad(n);Vh(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=Dd(t);return e.forEach((function(e){var s=kp(e.path);i.push(o.put(new Bp(n,s))),i.push(r.Ti.nr(t,n,e))})),dp.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Dd(t);return dp.forEach(e,(function(e){var o=kp(e.path);return dp.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=Dd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Dd(t),i=_f();return r.hs({range:n,us:!0},(function(t,e,n){var r=Op(t[1]),o=new nh(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=kp(e.path),r=IDBKeyRange.bound([n],[Uc(n)],!1,!0),i=0;return Dd(t).hs({index:Bp.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return Od(t).get(e).next((function(t){return t?ad(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return Xp(t,qp.store)}function Rd(t){return Xp(t,Hp.store)}function Dd(t){return Xp(t,Bp.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Mc(n,i);return 0===s?Mc(r,o):s}var Ld=function(){function t(t){this.cr=t,this.buffer=new cf(xd),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Md=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Nc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return W(e,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return _p(e=n.sent())?(Nc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,_d(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Fd=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return dp.resolve(Yc.q);var r=new Ld(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Nc("LruGarbageCollector","Garbage collection skipped; disabled"),dp.resolve(yd)):this.pr(t).next((function(r){return r<n.params.zs?(Nc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),yd):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(Nc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),Cc()<=Bt.DEBUG&&Nc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),dp.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),Ud=function(){function t(t,e){this.db=t,this.lr=new Fd(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return jd(t,n)},t.prototype.ir=function(t,e,n){return jd(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return jd(t,e)},t.prototype.Cr=function(t,e){return r=e,i=!1,kd(n=t).ls((function(t){return Sd(n,t,r).next((function(t){return t&&(i=!0),dp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),Dd(t).delete([0,kp(s.path)])}))}));i.push(u)}})).next((function(){return dp.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return jd(t,e)},t.prototype.Dr=function(t,e){var n,r=Dd(t),i=Yc.q;return r.hs({index:Bp.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Yc.q&&e(new nh(Op(n)),i),i=a,n=s):i=Yc.q})).next((function(){i!==Yc.q&&e(new nh(Op(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function jd(t,e){return Dd(t).put((n=e,r=t.bs,new Bp(0,kp(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vd=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Hd(t).put(zd(e),n)},t.prototype.li=function(t,e){var n=Hd(t),r=zd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Hd(t).get(zd(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Hd(t).get(zd(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:Ed(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=pf();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=pf(),i=new sf(nh.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Ed(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return dp.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Hd(t).hs({range:r},(function(t,e,r){for(var s=nh.Et(t);o&&nh.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=vf(),o=e.path.length+1,s={};if(n.isEqual(Jc.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=nd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=jp.collectionReadTimeIndex}return Hd(t).hs(s,(function(t,n,s){if(t.length===o){var a=td(r.Qt,n);e.path.nt(a.key.path)?a instanceof xh&&yl(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new qd(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Bd(t).get(Vp.key).next((function(t){return Rc(!!t),t}))},t.prototype.kr=function(t,e){return Bd(t).put(Vp.key,e)},t.prototype.Mr=function(t){if(t){var e=td(this.Qt,t);return e instanceof Lh&&e.version.isEqual(Jc.min())?null:e}return null},t}(),qd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new bd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return H(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new cf((function(t,e){return Mc(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=ed(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Ed(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=ed(e.jr.Qt,new Lh(o,Jc.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),dp.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(wd);function Bd(t){return Xp(t,Vp.store)}function Hd(t){return Xp(t,jp.store)}function zd(t){return t.path.it()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wd=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Rc(n<r&&n>=0&&r<=11);var o=new vp("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(Dp.store),function(t){t.createObjectStore(xp.store,{keyPath:xp.keyPath}),t.createObjectStore(Lp.store,{keyPath:Lp.keyPath,autoIncrement:!0}).createIndex(Lp.userMutationsIndex,Lp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Mp.store)}(t),Kd(t),function(t){t.createObjectStore(jp.store)}(t));var s=dp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Bp.store),t.deleteObjectStore(qp.store),t.deleteObjectStore(Hp.store)}(t),Kd(t)),s=s.next((function(){return function(t){var e=t.store(Hp.store),n=new Hp(0,0,Jc.min().j(),0);return e.put(Hp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Lp.store).rs().next((function(n){t.deleteObjectStore(Lp.store),t.createObjectStore(Lp.store,{keyPath:Lp.keyPath,autoIncrement:!0}).createIndex(Lp.userMutationsIndex,Lp.userMutationsKeyPath,{unique:!0});var r=e.store(Lp.store),i=n.map((function(t){return r.put(t)}));return dp.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Wp.store,{keyPath:Wp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Vp.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(jp.store);e.createIndex(jp.readTimeIndex,jp.readTimeIndexPath,{unique:!1}),e.createIndex(jp.collectionReadTimeIndex,jp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Kp.store,{keyPath:Kp.keyPath})}(t),function(t){t.createObjectStore(Gp.store,{keyPath:Gp.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(jp.store).hs((function(t,n){e+=Ed(n)})).next((function(){var n=new Vp(e);return t.store(Vp.store).put(Vp.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(xp.store),r=t.store(Lp.store);return n.rs().next((function(n){return dp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Lp.userMutationsIndex,i).next((function(r){return dp.forEach(r,(function(r){Rc(r.userId===n.userId);var i=sd(e.Qt,r);return Id(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Bp.store),n=t.store(jp.store);return t.store(Hp.store).get(Hp.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Zc(n),s=[0,kp(o)];r.push(e.get(s).next((function(n){return n?dp.resolve():(r=o,e.put(new Bp(0,kp(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return dp.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(zp.store,{keyPath:zp.keyPath});var n=e.store(zp.store),r=new dd,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:kp(i)})}};return e.store(jp.store).hs({us:!0},(function(t,e){var n=new Zc(t);return i(n.X())})).next((function(){return e.store(Mp.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Op(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(qp.store);return n.hs((function(t,r){var i=ad(r),o=ud(e.Qt,i);return n.put(o)}))},t}();function Kd(t){t.createObjectStore(Bp.store,{keyPath:Bp.keyPath}).createIndex(Bp.documentTargetsIndex,Bp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(qp.store,{keyPath:qp.keyPath}).createIndex(qp.queryTargetsIndexName,qp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Hp.store)}var Gd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qd=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new qc(Vc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var l,f;this.Ti=new Ud(this,i),this.ho=n+"main",this.Qt=new Zp(u),this.lo=new gp(this.ho,11,new Wd(this.Qt)),this._o=new Pd(this.Ti,this.Qt),this.Ei=new vd,this.fo=(l=this.Qt,f=this.Ei,new Vd(l,f)),this.wo=new hd,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&kc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new qc(Vc.FAILED_PRECONDITION,Gd);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Yc(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return W(e,void 0,void 0,(function(){return K(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return W(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return W(e,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Xd(e).put(new Wp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(_p(e))return Nc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Nc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Yd(t).get(Dp.key).next((function(t){return dp.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Xd(t).delete(this.clientId)},t.prototype.xo=function(){return W(this,void 0,void 0,(function(){var t,e,n,r,i=this;return K(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Xp(t,Wp.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return dp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?dp.resolve(!0):Yd(t).get(Dp.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new qc(Vc.FAILED_PRECONDITION,Gd);return!1}}return!(!e.networkEnabled||!e.inForeground)||Xd(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Nc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return W(this,void 0,void 0,(function(){var t=this;return K(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Dp.store,Wp.store],(function(e){var n=new Yp(e,Yc.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Xd(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Td.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Nc("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Qp,(function(o){return i=new Yp(o,r.so?r.so.next():Yc.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw kc("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new qc(Vc.FAILED_PRECONDITION,Cp);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Yd(t).get(Dp.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new qc(Vc.FAILED_PRECONDITION,Gd)}))},t.prototype.So=function(t){var e=new Dp(this.clientId,this.allowTabSynchronization,Date.now());return Yd(t).put(Dp.key,e)},t.Kn=function(){return gp.Kn()},t.prototype.vo=function(t){var e=this,n=Yd(t);return n.get(Dp.key).next((function(t){return e.Do(t)?(Nc("IndexedDbPersistence","Releasing primary lease."),n.delete(Dp.key)):dp.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(kc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Nc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return kc("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){kc("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Yd(t){return Xp(t,Dp.store)}function Xd(t){return Xp(t,Wp.store)}function Jd(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $d=function(t,e){this.progress=t,this.Go=e},Zd=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=pf();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=ff();return i.forEach((function(t,e){e||(e=new Lh(t,Jc.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return r=e,nh.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):hl(e)?this.ec(t,e,n):this.nc(t,e,n);var r},t.prototype.tc=function(t,e){return this.Ho(t,new nh(e)).next((function(t){var e=vf();return t instanceof xh&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=vf();return this.Ei.Us(t,i).next((function(s){return dp.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new rl(u,null,a.xt.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.nc(t,c,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=Bl(u,r.get(c),o.vs);r=h instanceof xh?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){yl(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=_f(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Gl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof xh&&(c=c.zt(t,e))})),c}))},t}(),tv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=_f(),i=_f(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ev=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.xt.length||1===i.xt.length&&i.xt[0].field.ut())||n.isEqual(Jc.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(i){var s=o.hc(e,i);return(sl(e)||al(e))&&o.lc(e.limitType,s,r,n)?o.uc(t,e):(Cc()<=Bt.DEBUG&&Nc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gl(e)),o.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new cf(ml(t));return e.forEach((function(e,r){r instanceof xh&&yl(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Cc()<=Bt.DEBUG&&Nc("QueryEngine","Using full collection scan to execute query:",gl(e)),this.ac.Kr(t,e,Jc.min())},t}(),nv=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new sf(Mc),this.dc=new bd((function(t){return jh(t)}),Vh),this.wc=Jc.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Zd(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e,n,r){return new nv(t,e,n,r)}function iv(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o;return K(this,(function(s){switch(s.label){case 0:return n=Dc(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Zd(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=_f(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function ov(t,e){var n=Dc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,h=e.batch.keys(),l=n.Ec.Nr({Wr:!0});return(r=n,i=t,o=e,s=l,a=o.batch,u=a.keys(),c=dp.resolve(),u.forEach((function(t){c=c.next((function(){return s._i(i,t)})).next((function(e){var n=e,r=o.$s.get(t);Rc(null!==r),(!n||n.version._(r)<0)&&(n=a.Ss(t,n,o))&&s.ai(n,o.Ns)}))})),c.next((function(){return r.zo.Ci(i,a)}))).next((function(){return l.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,h)}))}))}function sv(t){var e=Dc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function av(t,e){var n=Dc(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a,u,c,h=i.get(o);if(h){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var l=e.resumeToken;if(l.l()>0){var f=h.Mt(l,r).kt(t.bs);i=i.zt(o,f),a=h,c=e,Rc((u=f).resumeToken.l()>0),(0===a.resumeToken.l()||u.Ot.W()-a.Ot.W()>=3e8||c.qe.size+c.Ue.size+c.Qe.size>0)&&s.push(n._o.Hi(t,f))}}}));var a=ff();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(uv(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(Jc.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return dp.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function uv(t,e,n,r,i){var o=_f();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ff();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Lh&&s.version.isEqual(Jc.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):Nc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function cv(t,e){var n=Dc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function hv(t,e){var n=Dc(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,dp.resolve(r)):n._o.Bi(t).next((function(i){return r=new bl(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function lv(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(a){switch(a.label){case 0:r=Dc(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!_p(s=a.sent()))throw s;return Nc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function fv(t,e,n){var r=Dc(t),i=Jc.min(),o=_f();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=fl(e),c=Dc(s),h=c.dc.get(u),void 0!==h?dp.resolve(c.fc.get(h)):c._o.tr(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:Jc.min(),n?o:_f())})).next((function(t){return{documents:t,Rc:o}}));var s,a,u,c,h}))}function pv(t,e){var n=Dc(t),r=Dc(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function dv(t){var e=Dc(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.Ec,r=t,i=e.wc,o=Dc(n),s=ff(),a=nd(i),u=Hd(r),c=IDBKeyRange.lowerBound(a,!0),u.hs({index:jp.readTimeIndex,range:c},(function(t,e){var n=td(o.Qt,e);s=s.zt(n.key,n),a=e.readTime})).next((function(){return{Go:s,readTime:rd(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function vv(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){return[2,(e=Dc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Hd(t),n=Jc.min(),e.hs({index:jp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=rd(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.wc=t}))]}))}))}function gv(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,p;return K(this,(function(d){switch(d.label){case 0:for(i=Dc(t),o=_f(),s=ff(),a=yf(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Pc(h.metadata.name),h.document&&(o=o.add(l)),s=s.zt(l,e.yc(h)),a=a.zt(l,e.gc(h.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,hv(i,(v=r,fl(ol(Zc.ot("__bundle__/docs/"+v)))))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return uv(t,f,s,Jc.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i._o.Yi(t,p.targetId).next((function(){return i._o.er(t,o,p.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}var v}))}))}function yv(t,e,n){return void 0===n&&(n=_f()),W(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:return[4,hv(t,fl(cd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Dc(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Vf(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(jc.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var mv=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return dp.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Vf(n.createTime)}),dp.resolve()},t.prototype.Ms=function(t,e){return dp.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,{name:(n=e).name,query:cd(n.bundledQuery),readTime:Vf(n.readTime)}),dp.resolve();var n},t}(),_v=function(){function t(){this.vc=new cf(bv.Sc),this.Dc=new cf(bv.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new bv(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new bv(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new nh(new Zc([])),r=new bv(n,t),i=new bv(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new nh(new Zc([])),n=new bv(e,t),r=new bv(e,t+1),i=_f();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new bv(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),bv=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return nh.H(t.key,e.key)||Mc(t.Mc,e.Mc)},t.Cc=function(t,e){return Mc(t.Mc,e.Mc)||nh.H(t.key,e.key)},t}(),wv=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new cf(bv.Sc)}return t.prototype.Ai=function(t){return dp.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new Jp(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new bv(u.key,i)),this.Ei.qs(t,u.key.path.X())}return dp.resolve(o)},t.prototype.Pi=function(t,e){return dp.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return dp.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return dp.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return dp.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new bv(e,0),i=new bv(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),dp.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new cf(Mc);return e.forEach((function(t){var e=new bv(t,0),i=new bv(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),dp.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;nh.wt(i)||(i=i.child(""));var o=new bv(new nh(i),0),s=new cf(Mc);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),dp.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;Rc(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return dp.forEach(e.mutations,(function(i){var o=new bv(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new bv(e,0),r=this.Bc.Re(n);return dp.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,dp.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Iv=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new sf(nh.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return dp.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=pf();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),dp.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=vf(),i=new nh(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof xh&&yl(e,c)&&(r=r.zt(c.key,c))}return dp.resolve(r)},t.prototype.jc=function(t,e){return dp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Ev(this)},t.prototype.Or=function(t){return dp.resolve(this.size)},t}(),Ev=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return H(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),dp.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(wd),Tv=function(){function t(t){this.persistence=t,this.Gc=new bd((function(t){return jh(t)}),Vh),this.lastRemoteSnapshotVersion=Jc.min(),this.highestTargetId=0,this.zc=0,this.Hc=new _v,this.targetCount=0,this.Jc=Ad.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),dp.resolve()},t.prototype.Qi=function(t){return dp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return dp.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),dp.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),dp.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new Ad(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,dp.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),dp.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,dp.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),dp.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return dp.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return dp.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),dp.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),dp.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),dp.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return dp.resolve(n)},t.prototype.Fi=function(t,e){return dp.resolve(this.Hc.Fi(e))},t}(),Sv=function(){function t(t,e){var n,r=this;this.Yc={},this.so=new Yc(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Tv(this),this.Ei=new pd,this.fo=(n=this.Ei,new Iv(n,(function(t){return r.Ti.Xc(t)}))),this.Qt=new Zp(e),this.wo=new mv(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new wv(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Nc("MemoryPersistence","Starting transaction:",t);var i=new Cv(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return dp.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),Cv=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return H(e,t),e}(Np),Nv=function(){function t(t){this.persistence=t,this.na=new _v,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Oc()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),dp.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),dp.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),dp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return dp.forEach(this.ra,(function(r){var i=nh._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return dp.Ln([function(){return dp.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e){return"firestore_clients_"+t+"_"+e}function Av(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Pv(t,e){return"firestore_targets_"+t+"_"+e}var Ov=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new qc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(kc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new qc(i.error.code,i.error.message)),o?new t(e,i.state,r):(kc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Dv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=wf(),s=0;i&&s<r.activeTargetIds.length;++s)i=gh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(kc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),xv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(kc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Lv=function(){function t(){this.activeTargetIds=wf()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Mv=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new sf(Mc),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=kv(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new Lv),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return W(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return K(this,(function(f){switch(f.label){case 0:return[4,this._a.Uo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(kv(this.persistenceKey,r)))&&(o=Dv.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Pv(this.persistenceKey,t));if(n){var r=Rv.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Pv(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Nc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Nc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Nc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Nc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void kc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return W(e,void 0,void 0,(function(){var t,e,r,i,o,s;return K(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Yc.q;if(null!=t)try{var n=JSON.parse(t);Rc("number"==typeof n),e=n}catch(r){kc("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Yc.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Ov(this.currentUser,t,e,n),i=Av(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=Av(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=Pv(this.persistenceKey,t),i=new Rv(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Dv.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ov.ca(new Hc(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Rv.ca(r,e)},t.prototype.pa=function(t){return xv.ca(t)},t.prototype.Ya=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Nc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=wf();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),Fv=function(){function t(){this.iu=new Lv,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Lv,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Uv=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),jv=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Nc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Nc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},qv=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Bv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return H(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new Ic;s.listenOnce(yc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case gc.NO_ERROR:var e=s.getResponseJson();Nc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case gc.TIMEOUT:Nc("Connection",'RPC "'+t+'" timed out'),o(new qc(Vc.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:var n=s.getStatus();if(Nc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Vc).indexOf(c)>=0?c:Vc.UNKNOWN);o(new qc(a,r.message))}else o(new qc(Vc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new qc(Vc.UNAVAILABLE,"Connection failed."));break;default:Oc()}}finally{Nc("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n,r=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new lc,o=pa(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(s.initMessageHeaders,e),ut()||lt()||at().indexOf("Electron/")>=0||((n=at()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||at().indexOf("MSAppHost/")>=0||ht()||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Nc("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,l=new qv({fu:function(t){h?Nc("Connection","Not sending because WebChannel is closed:",t):(c||(Nc("Connection","Opening WebChannel transport."),u.open(),c=!0),Nc("Connection","WebChannel sending:",t),u.send(t))},du:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,wc.EventType.OPEN,(function(){h||Nc("Connection","WebChannel transport opened.")})),f(u,wc.EventType.CLOSE,(function(){h||(h=!0,Nc("Connection","WebChannel transport closed"),l.Ru())})),f(u,wc.EventType.ERROR,(function(t){h||(h=!0,Ac("Connection","WebChannel transport errored:",t),l.Ru(new qc(Vc.UNAVAILABLE,"The operation could not be completed")))})),f(u,wc.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Rc(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Nc("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=$l[t];if(void 0!==e)return of(e)}(o),a=i.message;void 0===s&&(s=Vc.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Ru(new qc(s,a)),u.close()}else Nc("Connection","WebChannel received:",n),l.Pu(n)}})),f(o,mc.STAT_EVENT,(function(t){t.stat===_c?Nc("Connection","Detected buffering proxy"):t.stat===bc&&Nc("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Au()}),0),l},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Nc("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return Nc("RestConnection","Received: ",t),t}),(function(e){throw Ac("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=Vv[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){return"undefined"!=typeof window?window:null}function zv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){return new Mf(t,!0)}var Kv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Nc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Gv=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Kv(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Vc.RESOURCE_EXHAUSTED?(kc(e.toString()),kc("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Vc.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new qc(Vc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return W(t,void 0,void 0,(function(){return K(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return Nc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(Nc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Qv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return H(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Oc(),o=e.targetChange.targetIds||[],s=function(t,e){return t.Bt?(Rc(void 0===e||"string"==typeof e),jc.fromBase64String(e||"")):(Rc(void 0===e||e instanceof Uint8Array),jc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Vc.UNKNOWN:of(t.code);return new qc(e,t.message||"")}(u);n=new Af(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=zf(t,i.document.name),s=Vf(i.document.updateTime);var u=new Ph({mapValue:{fields:i.document.fields}}),c=(a=new xh(o,s,u,{}),i.targetIds||[]),h=i.removedTargetIds||[];n=new Nf(c,h,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=zf(t,i.document),s=i.readTime?Vf(i.readTime):Jc.min(),u=new Lh(o,s),a=i.removedTargetIds||[],n=new Nf([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=zf(t,i.document),s=i.removedTargetIds||[],n=new Nf([],s,o,null);else{if(!("filter"in e))return Oc();e.filter;var l=e.filter;l.targetId,i=l.count||0,o=new nf(i),s=l.targetId,n=new kf(s,o)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Jc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Jc.min():e.readTime?Vf(e.readTime):Jc.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e,n,r,i,o={};o.database=Gf(this.Qt),o.addTarget=(e=this.Qt,i=(n=t).target,(r=qh(i)?{documents:Zf(e,i)}:{query:tp(e,i)}).targetId=n.targetId,n.resumeToken.l()>0?r.resumeToken=Uf(e,n.resumeToken):n.Ot._(Jc.min())>0&&(r.readTime=Ff(e,n.Ot.j())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Oc()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);s&&(o.labels=s),this.th(o)},e.prototype.hh=function(t){var e={};e.database=Gf(this.Qt),e.removeTarget=t,this.th(e)},e}(Gv),Yv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return H(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Rc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(Rc(void 0!==i),r.map((function(t){return function(t,e){var n=t.updateTime?Vf(t.updateTime):Vf(e);n.isEqual(Jc.min())&&(n=Vf(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Fl(n,r)}(t,i)}))):[]),n=Vf(t.commitTime);return this.listener.dh(n,e)}var r,i;return Rc(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Gf(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Jf(e.Qt,t)}))};this.th(n)},e}(Gv),Xv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return H(e,t),e.prototype.Ih=function(){if(this.Th)throw new qc(Vc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Vc.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Vc.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),Jv=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(kc(e),this.Rh=!1):Nc("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),$v=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return W(o,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return ag(this)?(Nc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return(e=Dc(t)).Nh.add(4),[4,tg(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Zv(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new Jv(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:if(!ag(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function tg(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function eg(t,e){var n=Dc(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),sg(n)?og(n):Ig(n).Hu()&&rg(n,e))}function ng(t,e){var n=Dc(t),r=Ig(n);n.xh.delete(e),r.Hu()&&ig(n,e),0===n.xh.size&&(r.Hu()?r.Xu():ag(n)&&n.Oh.set("Unknown"))}function rg(t,e){t.kh.on(e.targetId),Ig(t).uh(e)}function ig(t,e){t.kh.on(e),Ig(t).hh(e)}function og(t){t.kh=new Of({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Ig(t).start(),t.Oh.Ph()}function sg(t){return ag(t)&&!Ig(t).zu()&&t.xh.size>0}function ag(t){return 0===Dc(t).Nh.size}function ug(t){t.kh=void 0}function cg(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){return t.xh.forEach((function(e,n){rg(t,e)})),[2]}))}))}function hg(t,e){return W(this,void 0,void 0,(function(){return K(this,(function(n){return ug(t),sg(t)?(t.Oh.Vh(e),og(t)):t.Oh.set("Unknown"),[2]}))}))}function lg(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o;return K(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof Af&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o;return K(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Nc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Nf?t.kh.dn(e):e instanceof kf?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Jc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,sv(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,(a=t,u=n,c=a.kh.Vn(u),c.$e.forEach((function(t,e){if(t.resumeToken.l()>0){var n=a.xh.get(e);n&&a.xh.set(e,n.Mt(t.resumeToken,u))}})),c.Fe.forEach((function(t){var e=a.xh.get(t);if(e){a.xh.set(t,e.Mt(jc.T,e.Ot)),ig(a,t);var n=new bl(e.target,t,1,e.sequenceNumber);rg(a,n)}})),a.Dh.Lh(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Nc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,fg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function fg(t,e,n){return W(this,void 0,void 0,(function(){var r=this;return K(this,(function(i){switch(i.label){case 0:if(!_p(e))throw e;return t.Nh.add(1),[4,tg(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return sv(t.bh)}),t._s.po((function(){return W(r,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return Nc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Zv(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function pg(t,e){return e().catch((function(n){return fg(t,n,e)}))}function dg(t){return W(this,void 0,void 0,(function(){var e,n,r,i,o;return K(this,(function(s){switch(s.label){case 0:e=Dc(t),n=Eg(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!(ag(a=e)&&a.Ch.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,cv(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Eg(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,fg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return vg(e)&&gg(e),[2]}var a}))}))}function vg(t){return ag(t)&&!Eg(t).zu()&&t.Ch.length>0}function gg(t){Eg(t).start()}function yg(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){return Eg(t).Eh(),[2]}))}))}function mg(t){return W(this,void 0,void 0,(function(){var e,n,r,i;return K(this,(function(o){for(e=Eg(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function _g(t,e,n){return W(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=$p.from(r,e,n),[4,pg(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,dg(t)];case 2:return o.sent(),[2]}}))}))}function bg(t,e){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return e&&Eg(t)._h?[4,function(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return rf(r=e.code)&&r!==Vc.ABORTED?(n=t.Ch.shift(),Eg(t).Yu(),[4,pg(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,dg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return vg(t)&&gg(t),[2]}}))}))}function wg(t,e){return W(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return n=Dc(t),e?(n.Nh.delete(2),[4,Zv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,tg(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ig(t){var e,n,r,i,o=this;return t.Uh||(t.Uh=(e=t.Sh,n=t._s,r={wu:cg.bind(null,t),Tu:hg.bind(null,t),ah:lg.bind(null,t)},(i=Dc(e)).Ih(),new Qv(n,i.Qu,i.credentials,i.Qt,r)),t.$h.push((function(e){return W(o,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return e?(t.Uh.Yu(),sg(t)?og(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:n.sent(),ug(t),n.label=3;case 3:return[2]}}))}))}))),t.Uh}function Eg(t){var e,n,r,i,o=this;return t.Qh||(t.Qh=(e=t.Sh,n=t._s,r={wu:yg.bind(null,t),Tu:bg.bind(null,t),wh:mg.bind(null,t),dh:_g.bind(null,t)},(i=Dc(e)).Ih(),new Yv(n,i.Qu,i.credentials,i.Qt,r)),t.$h.push((function(e){return W(o,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return e?(t.Qh.Yu(),[4,dg(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:n.sent(),t.Ch.length>0&&(Nc("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),n.label=4;case 4:return[2]}}))}))}))),t.Qh}var Tg=function(){this.Kh=void 0,this.listeners=[]},Sg=function(){this.queries=new bd((function(t){return vl(t)}),dl),this.onlineState="Unknown",this.Wh=new Set};function Cg(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return K(this,(function(c){switch(c.label){case 0:if(n=Dc(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Tg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Sp(a,"Initialization of query '"+gl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Pg(n),[2]}}))}))}function Ng(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s;return K(this,(function(a){return n=Dc(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function kg(t,e){for(var n=Dc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&Pg(n)}function Ag(t,e,n){var r=Dc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Pg(t){t.Wh.forEach((function(t){t.next()}))}var Og=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Tf(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Tf.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Rg=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Dg=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return zf(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Xf(this.Qt,t.document,!1):new Lh(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Vf(t)},t}(),xg=function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=Lg(t)}return t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Dg(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||_f()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return W(this,void 0,void 0,(function(){var t,e,n,r,i;return K(this,(function(o){switch(o.label){case 0:return[4,gv(this.bh,new Dg(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,yv(this.bh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $d(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mg=function(t){this.key=t},Fg=function(t){this.key=t},Ug=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=_f(),this.De=_f(),this.hl=ml(t),this.ll=new If(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Ef,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=sl(this.query)&&i.size===this.query.limit?i.last():null,c=al(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),l=e instanceof xh?e:null;l&&(l=yl(n.query,l)?l:null);var f=!!h&&n.De.has(h.key),p=!!l&&(l.Vt||n.De.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.wl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.hl(l,u)>0||c&&n.hl(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),sl(this.query)||al(this.query))for(;s.size>this.query.limit;){var h=sl(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oc()}})(n)-o(i)||r.hl(t.doc,e.doc);var n,i,o})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new Tf(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Ef,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=_f(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new Fg(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new Mg(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=_f();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Tf.Ne(this.query,this.ll,this.De,0===this.al)},t}(),jg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Vg=function(t){this.key=t,this.Pl=!1},qg=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new bd((function(t){return vl(t)}),dl),this.Sl=new Map,this.Dl=new Set,this.Cl=new sf(nh.H),this.xl=new Map,this.Nl=new _v,this.$l={},this.Fl=new Map,this.Ol=Ad.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function Bg(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return n=yy(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,hv(n.bh,fl(e))];case 2:return s=u.sent(),a=n.Vl.Fa(s.targetId),r=s.targetId,[4,Hg(n,e,r,"current"===a)];case 3:i=u.sent(),n.Ml&&eg(n.yl,s),u.label=4;case 4:return[2,i]}}))}))}function Hg(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o,s,a,u,c;return K(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o,s;return K(this,(function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,fv(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(ny(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,fv(t.bh,e,!0)];case 1:return i=h.sent(),o=new Ug(e,i.Rc),s=o.fl(i.documents),a=Cf.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),ny(t,n,u.Il),c=new jg(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function zg(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return n=Dc(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!dl(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,lv(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),ng(n.yl,r.targetId),ty(n,r.targetId)})).catch(_d)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ty(n,r.targetId),[4,lv(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Wg(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(a){switch(a.label){case 0:r=my(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.bh,c=e,l=Dc(u),f=Xc.now(),p=c.reduce((function(t,e){return t.add(e.key)}),_f()),l.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return l.Tc.Xo(t,p).next((function(e){h=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Hl(o,h.get(o.key));null!=s&&n.push(new Gl(o.key,s,Rh(s.proto.mapValue),Ul.exists(!0)))}return l.zo.Ri(t,f,n,c)}))})).then((function(t){var e=t.xs(h);return{batchId:t.batchId,ri:e}})))];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new sf(Mc)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,oy(r,i.ri)];case 3:return a.sent(),[4,dg(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Sp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,h,l,f,p}))}))}function Kg(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:n=Dc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,av(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(Rc(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Rc(r.Pl):t.Qe.size>0&&(Rc(r.Pl),r.Pl=!1))})),[4,oy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,_d(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Gg(t,e,n){var r=Dc(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Dc(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&Pg(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Qg(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s,a,u;return K(this,(function(c){switch(c.label){case 0:return(r=Dc(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new sf(nh.H)).zt(o,new Lh(o,Jc.min())),a=_f().add(o),u=new Sf(Jc.min(),new Map,new cf(Mc),s,a),[4,Kg(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),iy(r),[3,4];case 2:return[4,lv(r.bh,e,!1).then((function(){return ty(r,e,n)})).catch(_d)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Yg(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:n=Dc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ov(n.bh,e)];case 2:return i=o.sent(),Zg(n,r,null),$g(n,r),n.Vl.Na(r,"acknowledged"),[4,oy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,_d(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Xg(t,e,n){return W(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:r=Dc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.bh,a=e,u=Dc(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u.zo.Pi(t,a).next((function(n){return Rc(null!==n),e=n.keys(),u.zo.Ci(t,n)})).next((function(){return u.zo.$i(t)})).next((function(){return u.Tc.Xo(t,e)}))})))];case 2:return i=o.sent(),Zg(r,e,n),$g(r,e),r.Vl.Na(e,"rejected",n),[4,oy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,_d(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function Jg(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s;return K(this,(function(a){switch(a.label){case 0:ag((n=Dc(t)).yl)||Nc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.bh,c=Dc(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c.zo.Vi(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Sp(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function $g(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Zg(t,e,n){var r=Dc(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function ty(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||ey(t,e)}))}function ey(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(ng(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),iy(t))}function ny(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Mg?(t.Nl.nr(o.key,e),ry(t,o)):o instanceof Fg?(Nc("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||ey(t,o.key)):Oc()}}function ry(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Nc("SyncEngine","New document in limbo: "+n),t.Dl.add(r),iy(t))}function iy(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new nh(Zc.ot(e)),r=t.Ol.next();t.xl.set(r,new Vg(n)),t.Cl=t.Cl.zt(n,r),eg(t.yl,new bl(fl(ol(n.path)),r,2,Yc.q))}}function oy(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(a){switch(a.label){case 0:return r=Dc(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=tv.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return K(this,(function(l){switch(l.label){case 0:n=Dc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return dp.forEach(e,(function(e){return dp.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return dp.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!_p(r=l.sent()))throw r;return Nc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.fc.get(a),c=u.Ot,h=u.Lt(c),n.fc=n.fc.zt(a,h));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function sy(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return(n=Dc(t)).currentUser.isEqual(e)?[3,3]:(Nc("SyncEngine","User change. New user:",e.A()),[4,iv(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fl.forEach((function(t){t.forEach((function(t){t.reject(new qc(Vc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fl.clear(),n.Vl.Ua(e,r.mc,r.Ac),[4,oy(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function ay(t,e){var n=Dc(t),r=n.xl.get(e);if(r&&r.Pl)return _f().add(r.key);var i=_f(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function uy(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return[4,fv((n=Dc(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&ny(n,e.targetId,i.Il),i)]}}))}))}function cy(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){return[2,dv((e=Dc(t)).bh).then((function(t){return oy(e,t)}))]}))}))}function hy(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o;return K(this,(function(s){switch(s.label){case 0:return[4,(a=(i=Dc(t)).bh,u=e,c=Dc(a),h=Dc(c.zo),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return h.yi(t,u).next((function(e){return e?c.Tc.Xo(t,e):dp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,dg(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Zg(i,e,r||null),$g(i,e),function(t,e){Dc(Dc(t).zo).xi(e)}(i.bh,e)):Oc(),s.label=4;case 4:return[4,oy(i,o)];case 5:return s.sent(),[3,7];case 6:Nc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,h}))}))}function ly(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return K(this,(function(h){switch(h.label){case 0:return yy(n=Dc(t)),my(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,fy(n,r.it())]);case 1:return i=h.sent(),n.kl=!0,[4,wg(n.yl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],eg(n.yl,a);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):c=c.then((function(){return ty(n,e),lv(n.bh,e,!0)})),ng(n.yl,e)})),[4,c]);case 4:return h.sent(),[4,fy(n,u)];case 5:return h.sent(),(l=Dc(n)).xl.forEach((function(t,e){ng(l.yl,e)})),l.Nl.Oc(),l.xl=new Map,l.Cl=new sf(nh.H),n.kl=!1,[4,wg(n.yl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}var l}))}))}function fy(t,e,n){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return K(this,(function(g){switch(g.label){case 0:n=Dc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Sl.get(a))&&0!==c.length?[4,hv(n.bh,fl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.vl.get(f),[4,uy(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,pv(n.bh,a)];case 8:return v=g.sent(),[4,hv(n.bh,v)];case 9:return u=g.sent(),[4,Hg(n,py(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function py(t){return il(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dy(t){var e=Dc(t);return Dc(Dc(e.bh).persistence).Uo()}function vy(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o,s;return K(this,(function(a){switch(a.label){case 0:return(i=Dc(t)).kl?(Nc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,dv(i.bh)];case 3:return o=a.sent(),s=Sf.Me(e,"current"===n),[4,oy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,lv(i.bh,e,!0)];case 6:return a.sent(),ty(i,e,r),[3,8];case 7:Oc(),a.label=8;case 8:return[2]}}))}))}function gy(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return K(this,(function(p){switch(p.label){case 0:if(!(r=yy(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(Nc("SyncEngine","Adding an already active target "+s),[3,5]):[4,pv(r.bh,s)]):[3,6];case 2:return a=p.sent(),[4,hv(r.bh,a)];case 3:return u=p.sent(),[4,Hg(r,py(a),u.targetId,!1)];case 4:p.sent(),eg(r.yl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return K(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,lv(r.bh,t,!1).then((function(){ng(r.yl,t),ty(r,t)})).catch(_d)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function yy(t){var e=Dc(t);return e.yl.Dh.Lh=Kg.bind(null,e),e.yl.Dh.vn=ay.bind(null,e),e.yl.Dh.Mh=Qg.bind(null,e),e.bl.ah=kg.bind(null,e.gl),e.bl.Bl=Ag.bind(null,e.gl),e}function my(t){var e=Dc(t);return e.yl.Dh.Bh=Yg.bind(null,e),e.yl.Dh.qh=Xg.bind(null,e),e}function _y(t,e,n){var r=Dc(t);(function(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s,a,u;return K(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,(h=t.bh,l=r,f=Dc(h),p=Vf(l.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return f.wo.Os(t,l.id)})).then((function(t){return!!t&&t.createTime._(p)>=0})))];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.ql(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ul(Lg(r)),i=new xg(r,t.bh,e.Qt),[4,e.Ql()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.rl(o)]:[3,10];case 7:return(s=c.sent())&&n.Ul(s),[4,e.Ql()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,oy(t,a.Go,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Dc(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.wo.ks(t,e)}))}(t.bh,r)];case 13:return c.sent(),n.ql(a.progress),[3,15];case 14:return Ac("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Kl(u),[3,15];case 15:return[2]}var h,l,f,p}))}))})(r,e,n).then((function(){r.Vl.Wa()}))}var by=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return this.Qt=Wv(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return rv(this.persistence,new ev,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Sv(Nv.ia,this.Qt)},t.prototype.Wl=function(t){return new Fv},t.prototype.terminate=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),wy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return H(e,t),e.prototype.initialize=function(e){return W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,vv(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,my(this.Yl._a)];case 4:return n.sent(),[4,dg(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return rv(this.persistence,new ev,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new Md(e,t._s)},e.prototype.jl=function(t){var e=Jd(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?md.Ys(this.cacheSizeBytes):md.ti;return new Qd(this.synchronizeTabs,e,t.clientId,n,t._s,Hv(),zv(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new Fv},e}(by),Iy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return H(e,t),e.prototype.initialize=function(e){return W(this,void 0,void 0,(function(){var n,r=this;return K(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof Mv?(this.Vl._a={eu:hy.bind(null,n),nu:vy.bind(null,n),su:gy.bind(null,n),Uo:dy.bind(null,n),tu:cy.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return W(r,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return[4,ly(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=Hv();if(!Mv.Kn(e))throw new qc(Vc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jd(t.yu.t,t.yu.persistenceKey);return new Mv(e,t._s,n,t.clientId,t.Jl)},e}(wy),Ey=function(){function t(){}return t.prototype.initialize=function(t,e){return W(this,void 0,void 0,(function(){var n=this;return K(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return Gg(n._a,t,1)},this.yl.Dh.n_=sy.bind(null,this._a),[4,wg(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new Sg},t.prototype.Xl=function(t){var e,n,r=Wv(t.yu.t),i=(e=t.yu,new Bv(e));return n=t.credentials,new Xv(n,i,r)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return Gg(s._a,t,0)},o=jv.Kn()?new jv:new Uv,new $v(e,n,r,i,o)},t.prototype.e_=function(t,e){return n=this.bh,r=this.yl,i=this.gl,o=this.Vl,s=t.Jl,a=t.pl,u=e,c=new qg(n,r,i,o,s,a),u&&(c.kl=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=Dc(t),Nc("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,tg(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return W(this,void 0,void 0,(function(){var r;return K(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){return[2]}))}))},releaseLock:function(){}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sy=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Cy=function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new pp,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return W(this,void 0,void 0,(function(){var t,e,n,r;return K(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Rg(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return W(this,void 0,void 0,(function(){var t,e;return K(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return W(this,void 0,void 0,(function(){var t,e;return K(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Ny=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new qc(Vc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new eh(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),ky=function(t){this._methodName=t},Ay=function(t){this.d_=t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e,n){if(!n)throw new qc(Vc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Oy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qc(Vc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ry(t,e,n,r){if(!0===e&&!0===r)throw new qc(Vc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Dy(t){if(!nh.wt(t))throw new qc(Vc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function xy(t){if(nh.wt(t))throw new qc(Vc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ly(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Oc()}function My(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new qc(Vc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ly(t);throw new qc(Vc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Fy(t,e){if(e<=0)throw new qc(Vc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new qc(Vc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qc(Vc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ry("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),jy=new Map,Vy=function(){function t(t,e){this.w_="(lite)",this.E_=new Uy({}),this.T_=!1,t instanceof Tc?(this.I_=t,this.m_=new Wc):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new qc(Vc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(t.options.projectId)}(t),this.m_=new Kc(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new qc(Vc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new qc(Vc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Uy(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Wc;switch(t.type){case"gapi":var e=t.client;return Rc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new qc(Vc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=jy.get(this))&&(Nc("ComponentProvider","Removing Datastore"),jy.delete(this),t.terminate()),Promise.resolve();var t},t}(),qy=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Hy(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),By=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Hy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ol(r))||this).firestore=e,i.D_=r,i.type="collection",i}return H(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new qy(this.firestore,null,new nh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(By);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ay&&(t=t.d_),Py("collection","path",e),t instanceof Vy)return xy(n=Zc.ot.apply(Zc,X([e],r))),new Hy(t,null,n);if(!(t instanceof qy||t instanceof Hy))throw new qc(Vc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return xy(n=Zc.ot.apply(Zc,X([t.path],r)).child(Zc.ot(e))),new Hy(t.firestore,null,n)}function Wy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ay&&(t=t.d_),1===arguments.length&&(e=Lc.u()),Py("doc","path",e),t instanceof Vy)return Dy(n=Zc.ot.apply(Zc,X([e],r))),new qy(t,null,new nh(n));if(!(t instanceof qy||t instanceof Hy))throw new qc(Vc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Dy(n=t.D_.child(Zc.ot.apply(Zc,X([e],r)))),new qy(t.firestore,t instanceof Hy?t.v_:null,new nh(n))}function Ky(t,e){return t instanceof Ay&&(t=t.d_),e instanceof Ay&&(e=e.d_),(t instanceof qy||t instanceof Hy)&&(e instanceof qy||e instanceof Hy)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Gy(t,e){return t instanceof Ay&&(t=t.d_),e instanceof Ay&&(e=e.d_),t instanceof By&&e instanceof By&&t.firestore===e.firestore&&dl(t.C_,e.C_)&&t.v_===e.v_}var Qy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new qc(Vc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new qc(Vc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Mc(this.x_,t.x_)||Mc(this.N_,t.N_)},t}(),Yy=/^__.*__$/,Xy=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Gl(t,this.data,this.Gt,e,this.fieldTransforms):new Kl(t,this.data,e,this.fieldTransforms)},t}(),Jy=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Gl(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oc()}}var Zy=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return _m(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if($y(this.k_)&&Yy.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),tm=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Wv(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Zy({k_:t,methodName:e,j_:n,path:eh.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function em(t){var e=t.p_(),n=Wv(t.I_);return new tm(t.I_,!!e.ignoreUndefinedProperties,n)}function nm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);vm("Data must be an object, but it was:",s,r);var a,u,c=pm(r,s);if(o.merge)a=new sh(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=gm(e,f[l],n);if(!s.contains(p))throw new qc(Vc.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");bm(h,p)||h.push(p)}a=new sh(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new Xy(new Ph(c),a,u)}var rm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ky);function im(t,e,n){return new Zy({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var om=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.z_=function(t){return new Ml(t.path,new kl)},e.prototype.isEqual=function(t){return t instanceof e},e}(ky),sm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return H(e,t),e.prototype.z_=function(t){var e=im(this,t,!0),n=this.H_.map((function(t){return fm(t,e)})),r=new Al(n);return new Ml(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ky),am=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return H(e,t),e.prototype.z_=function(t){var e=im(this,t,!0),n=this.H_.map((function(t){return fm(t,e)})),r=new Ol(n);return new Ml(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ky),um=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return H(e,t),e.prototype.z_=function(t){var e=new Dl(t.Qt,El(t.Qt,this.J_));return new Ml(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ky);function cm(t,e,n,r){var i=t.G_(1,e,n);vm("Data must be an object, but it was:",i,r);var o=[],s=new Oh;ih(r,(function(t,r){var a=mm(e,t,n);r instanceof Ay&&(r=r.d_);var u=i.U_(a);if(r instanceof rm)o.push(a);else{var c=fm(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new sh(o);return new Jy(s.Pt(),a,i.fieldTransforms)}function hm(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[gm(e,r,n)],u=[i];if(o.length%2!=0)throw new qc(Vc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(gm(e,o[c])),u.push(o[c+1]);for(var h=[],l=new Oh,f=a.length-1;f>=0;--f)if(!bm(h,a[f])){var p=a[f],d=u[f];d instanceof Ay&&(d=d.d_);var v=s.U_(p);if(d instanceof rm)h.push(p);else{var g=fm(d,v);null!=g&&(h.push(p),l.set(p,g))}}var y=new sh(h);return new Jy(l.Pt(),y,s.fieldTransforms)}function lm(t,e,n,r){return void 0===r&&(r=!1),fm(n,t.G_(r?4:3,e))}function fm(t,e){if(t instanceof Ay&&(t=t.d_),dm(t))return vm("Unsupported field value:",e,t),pm(t,e);if(t instanceof ky)return function(t,e){if(!$y(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=fm(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Ay&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return El(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xc.fromDate(t);return{timestampValue:Ff(e.Qt,n)}}if(t instanceof Xc)return n=new Xc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ff(e.Qt,n)};if(t instanceof Qy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bc)return{bytesValue:Uf(e.Qt,t.I)};if(t instanceof qy){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:qf(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+Ly(t))}(t,e)}function pm(t,e){var n={};return oh(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):ih(t,(function(t,r){var i=fm(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function dm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xc||t instanceof Qy||t instanceof Bc||t instanceof qy||t instanceof ky)}function vm(t,e,n){if(!dm(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=Ly(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}var i}function gm(t,e,n){if(e instanceof Ay&&(e=e.d_),e instanceof Ny)return e.f_;if("string"==typeof e)return mm(t,e);throw _m("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ym=new RegExp("[~\\*/\\[\\]]");function mm(t,e,n){if(e.search(ym)>=0)throw _m("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ny.bind.apply(Ny,X([void 0],e.split("."))))).f_}catch(r){throw _m("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function _m(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new qc(Vc.INVALID_ARGUMENT,(a+=". ")+t+u)}function bm(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wm=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return W(this,void 0,void 0,(function(){var e,n=this;return K(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new qc(Vc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return n=Dc(t),r=Gf(n.Qt)+"/documents",i={documents:e.map((function(t){return Hf(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.Qt,"found"in(r=t)?function(t,e){Rc(!!e.found),e.found.name,e.found.updateTime;var n=zf(t,e.found.name),r=Vf(e.found.updateTime),i=new Ph({mapValue:{fields:e.found.fields}});return new xh(n,r,i,{})}(e,r):"missing"in r?function(t,e){Rc(!!e.missing),Rc(!!e.readTime);var n=zf(t,e.missing),r=Vf(e.readTime);return new Lh(n,r)}(e,r):Oc());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Rc(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Lh||t instanceof xh?n.sf(t):Oc()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(n){this.Z_=n}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new tf(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return W(this,void 0,void 0,(function(){var t,e=this;return K(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=nh._t(n);e.mutations.push(new ef(r,e.jt(r)))})),[4,function(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return n=Dc(t),r=Gf(n.Qt)+"/documents",i={writes:e.map((function(t){return Jf(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof xh)e=t.version;else{if(!(t instanceof Lh))throw Oc();e=Jc.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qc(Vc.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ul.updateTime(e):Ul.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Jc.min()))throw new qc(Vc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ul.updateTime(e)}return Ul.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Im=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Kv(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return W(t,void 0,void 0,(function(){var t,e,n=this;return K(this,(function(r){return t=new wm(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!dh(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.Es.reject(n),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!rf(e)}return!1},t}(),Em=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Hc.UNAUTHENTICATED,this.clientId=Lc.u(),this._f=function(){},this.C=new pp,this.credentials.v((function(t){Nc("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new qc(Vc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new pp;return this._s.Tf((function(){return W(t,void 0,void 0,(function(){var t,n;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Sp(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){return W(this,void 0,void 0,(function(){var n,r,i=this;return K(this,(function(o){switch(o.label){case 0:return t._s.Af(),Nc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return W(i,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,iv(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Sm(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Cm(t)];case 1:return n=i.sent(),Nc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return(n=Dc(t))._s.Af(),Nc("RemoteStore","RemoteStore received new credentials"),r=ag(n),n.Nh.add(3),[4,tg(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Zv(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Cm(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Nc("FirestoreClient","Using default OfflineComponentProvider"),[4,Tm(t,new by)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Nm(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Nc("FirestoreClient","Using default OnlineComponentProvider"),[4,Sm(t,new Ey)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function km(t){return Cm(t).then((function(t){return t.persistence}))}function Am(t){return Cm(t).then((function(t){return t.bh}))}function Pm(t){return Nm(t).then((function(t){return t.yl}))}function Om(t){return Nm(t).then((function(t){return t._a}))}function Rm(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Nm(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Bg.bind(null,e._a),n.Hh=zg.bind(null,e._a),n)]}}))}))}function Dm(t,e,n){var r=this;void 0===n&&(n={});var i=new pp;return t._s.Ps((function(){return W(r,void 0,void 0,(function(){var r;return K(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sy({next:function(o){e.Ps((function(){return Ng(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new qc(Vc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new qc(Vc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Og(ol(n.path),o,{includeMetadataChanges:!0,nl:!0});return Cg(t,s)},[4,Rm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function xm(t,e,n){var r=this;void 0===n&&(n={});var i=new pp;return t._s.Ps((function(){return W(r,void 0,void 0,(function(){var r;return K(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sy({next:function(n){e.Ps((function(){return Ng(t,s)})),n.fromCache&&"server"===r.source?i.reject(new qc(Vc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Og(n,o,{includeMetadataChanges:!0,nl:!0});return Cg(t,s)},[4,Rm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var Lm=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Kv(this,"async_queue_retry"),this.vf=function(){var e=zv();e&&Nc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=zv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=zv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return W(this,void 0,void 0,(function(){var t,e=this;return K(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!_p(t=n.sent()))throw t;return Nc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,kc("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Tp.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Oc()},t.prototype.Af=function(){},t.prototype.Nf=function(){return W(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Mm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Fm=function(){function t(){this.kf={},this.Mf=new pp,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},t}(),Um=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new Lm,r.w_="name"in e?e.name:"[DEFAULT]",r}return H(e,t),e.prototype.b_=function(){return this.qf||Vm(this),this.qf.terminate()},e}(Vy);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t){return t.qf||Vm(t),t.qf.df(),t.qf}function Vm(t){var e,n,r,i=t.p_(),o=(e=t.I_,n=t.w_,new Ec(e,n,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new Em(t.m_,t.Bf,o)}function qm(t,e,n){var r=this,i=new pp;return t._s.enqueue((function(){return W(r,void 0,void 0,(function(){var r;return K(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Tm(t,n)];case 1:return o.sent(),[4,Sm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===Vc.FAILED_PRECONDITION||s.code===Vc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function Bm(t){if(t.R_||t.P_)throw new qc(Vc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hm=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),yh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ch(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(hh(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Oc()}},t.prototype.Hf=function(t,e){var n=this,r={};return ih(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Qy(ch(t.latitude),ch(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=fh(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(ph(t));default:return null}},t.prototype.Qf=function(t){var e=uh(t);return new Xc(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Zc.ot(t);Rc(fp(n));var r=new Tc(n.get(1),n.get(3)),i=new nh(n.Y(5));return r.isEqual(e)||kc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),zm=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new qy(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Wm(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Km("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Wm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(zm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e){return"string"==typeof e?mm(t,e):e instanceof Ay?e.d_.f_:e.f_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){if(al(t)&&0===t.xt.length)throw new qc(Vc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qm=function(){};function Ym(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Xm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return H(e,t),e.prototype.td=function(t){var e,n,r,i=em(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new qc(Vc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){r_(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(n_(r,t,l))}a={arrayValue:{values:u}}}else a=n_(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||r_(s,o),a=lm(n,"where",s,"in"===o||"not-in"===o);var f=Bh.create(i,o,a);return function(t,e){if(e.Ct()){var n=cl(t);if(null!==n&&!n.isEqual(e.field))throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ul(t);null!==r&&i_(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new qc(Vc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new qc(Vc.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,i,t.firestore.I_,this.ed,this.nd,this.sd);return new By(t.firestore,t.v_,(e=t.C_,n=o,r=e.filters.concat([n]),new rl(e.path,e.collectionGroup,e.xt.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(Qm),Jm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return H(e,t),e.prototype.td=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zh(e,n);return function(t,e){if(null===ul(t)){var n=cl(t);null!==n&&i_(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new By(t.firestore,t.v_,(e=t.C_,n=i,r=e.xt.concat([n]),new rl(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(Qm),$m=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return H(e,t),e.prototype.td=function(t){return new By(t.firestore,t.v_,pl(t.C_,this.od,this.ad))},e}(Qm),Zm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return H(e,t),e.prototype.td=function(t){var e,n,r=e_(t,this.type,this.ud,this.hd);return new By(t.firestore,t.v_,(e=t.C_,n=r,new rl(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(Qm),t_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return H(e,t),e.prototype.td=function(t){var e,n,r=e_(t,this.type,this.ud,this.hd);return new By(t.firestore,t.v_,(e=t.C_,n=r,new rl(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(Qm);function e_(t,e,n,r){if(n[0]instanceof Ay&&(n[0]=n[0].d_),n[0]instanceof zm)return function(t,e,n,r,i){if(!r)throw new qc(Vc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ll(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Th(e,r.key));else{var c=r.field(u.field);if(lh(c))throw new qc(Vc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Jh(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=em(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new qc(Vc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!hl(t)&&-1!==c.indexOf("/"))throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Zc.ot(c));if(!nh.wt(h))throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new nh(h);a.push(Th(e,l))}else{var f=lm(n,r,c);a.push(f)}}return new Jh(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function n_(t,e,n){if(n instanceof Ay&&(n=n.d_),"string"==typeof n){if(""===n)throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hl(e)&&-1!==n.indexOf("/"))throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Zc.ot(n));if(!nh.wt(r))throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Th(t,new nh(r))}if(n instanceof qy)return Th(t,n.S_);throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ly(n)+".")}function r_(t,e){if(!Array.isArray(t)||0===t.length)throw new qc(Vc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new qc(Vc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function i_(t,e,n){if(!n.isEqual(e))throw new qc(Vc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var s_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return H(e,t),e.prototype.Wf=function(t){return new Bc(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new qy(this.firestore,null,e)},e}(Hm),a_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),u_=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return H(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new c_(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Km("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(zm),c_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(u_),h_=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new a_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new c_(n.Yf,n.Xf,r.key,r,new a_(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new qc(Vc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new c_(t.Yf,t.Xf,e.doc.key,e.doc,new a_(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new c_(t.Yf,t.Xf,e.doc.key,e.doc,new a_(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:l_(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oc()}}function f_(t,e){return t instanceof u_&&e instanceof u_?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof h_&&e instanceof h_&&t.Yf===e.Yf&&Gy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return H(e,t),e.prototype.Wf=function(t){return new Bc(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new qy(this.firestore,null,e)},e}(Hm);function d_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=My(t,qy);var o=My(t.firestore,Um),s=em(o);return e instanceof Ay&&(e=e.d_),g_(o,[("string"==typeof e||e instanceof Ny?hm(s,"updateDoc",t.S_,e,n,r):cm(s,"updateDoc",t.S_,e)).F_(t.S_,Ul.exists(!0))])}function v_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Ay&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Mm(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(Mm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof qy)c=My(t.firestore,Um),h=ol(t.S_.path),u={next:function(e){i[a]&&i[a](y_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=My(t,By);c=My(p.firestore,Um),h=p.C_;var d=new p_(c);u={next:function(t){i[a]&&i[a](new h_(c,d,p,t))},error:i[a+1],complete:i[a+2]},Gm(t.C_)}return function(t,e,n,r){var i=this,o=new Sy(r),s=new Og(e,o,n);return t._s.Ps((function(){return W(i,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=Cg,[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return W(i,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=Ng,[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(jm(c),h,l,u)}function g_(t,e){return function(t,e){var n=this,r=new pp;return t._s.Ps((function(){return W(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return n=Wg,[4,Om(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(jm(t),e)}function y_(t,e,n){var r=n.docs.get(e.S_),i=new p_(t);return new u_(t,i,e.S_,r,new a_(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m_=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=em(t)}return t.prototype.set=function(t,e,n){this.md();var r=__(t,this.Yf),i=o_(r.v_,e,n),o=nm(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Ul.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=__(t,this.Yf);return e instanceof Ay&&(e=e.d_),o="string"==typeof e||e instanceof Ny?hm(this.Id,"WriteBatch.update",s.S_,e,n,r):cm(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Ul.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=__(t,this.Yf);return this.Ed=this.Ed.concat(new tf(e.S_,Ul.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new qc(Vc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function __(t,e){if(t instanceof Ay&&(t=t.d_),t.firestore!==e)throw new qc(Vc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return H(e,t),e.prototype.get=function(e){var n=this,r=__(e,this.Yf),i=new p_(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new u_(n.Yf,i,r.S_,t.Zf,new a_(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=em(t)}return t.prototype.get=function(t){var e=this,n=__(t,this.Yf),r=new s_(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Oc();var i=t[0];if(i instanceof Lh)return new zm(e.Yf,r,n.S_,null,n.v_);if(i instanceof xh)return new zm(e.Yf,r,i.key,i,n.v_);throw Oc()}))},t.prototype.set=function(t,e,n){var r=__(t,this.Yf),i=o_(r.v_,e,n),o=nm(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=__(t,this.Yf);return e instanceof Ay&&(e=e.d_),o="string"==typeof e||e instanceof Ny?hm(this.Id,"Transaction.update",s.S_,e,n,r):cm(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=__(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(){if("undefined"==typeof Uint8Array)throw new qc(Vc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function I_(){if("undefined"==typeof atob)throw new qc(Vc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var E_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.fromBase64String=function(t){return I_(),new e(Bc.fromBase64String(t))},e.fromUint8Array=function(t){return w_(),new e(Bc.fromUint8Array(t))},e.prototype.toBase64=function(){return I_(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return w_(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Ay),T_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Bm(t=My(t,Um));var n=jm(t),r=t.p_(),i=new Ey;return qm(n,i,new wy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Bm(t=My(t,Um));var e=jm(t),n=t.p_(),r=new Ey;return qm(e,r,new Iy(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new qc(Vc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new pp;return t.Bf.Tf((function(){return W(e,void 0,void 0,(function(){var e;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return gp.Kn()?(e=t+"main",[4,gp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Jd(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),S_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Tc||(i.Pd=e),i}return H(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){var n,r,i,o;n=this.d_,r=t,i=e,"firestore.googleapis.com"!==(o=(n=My(n,Vy)).V_()).host&&o.host!==r&&Ac("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},o),{host:r+":"+i,ssl:!1}))},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return W(e,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,km(t)];case 1:return e=r.sent(),[4,Pm(t)];case 2:return n=r.sent(),[2,(e.yo(!0),i=n,o=Dc(i),o.Nh.delete(0),Zv(o))]}var i,o}))}))}))}(jm(My(this.d_,Um)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return W(e,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,km(t)];case 1:return e=r.sent(),[4,Pm(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return(e=Dc(t)).Nh.add(0),[4,tg(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(jm(My(this.d_,Um)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ry("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new pp;return t._s.Ps((function(){return W(e,void 0,void 0,(function(){var e;return K(this,(function(r){switch(r.label){case 0:return e=Jg,[4,Om(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(jm(My(this.d_,Um)))},e.prototype.onSnapshotsInSync=function(t){return e=this.d_,n=t,function(t,e){var n=this,r=new Sy(e);return t._s.Ps((function(){return W(n,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=function(t,e){Dc(t).Wh.add(e),e.next()},[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return W(n,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=function(t,e){Dc(t).Wh.delete(e)},[4,Rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(jm(e=My(e,Um)),Mm(n)?n:{next:n});var e,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new qc(Vc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new j_(this,zy(this.d_,t))}catch(e){throw O_(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new P_(this,Wy(this.d_,t))}catch(e){throw O_(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new M_(this,function(t,e){if(t=My(t,Vy),Py("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qc(Vc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new By(t,null,(n=e,new rl(Zc.ct(),n)));var n}(this.d_,t))}catch(e){throw O_(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new pp;return t._s.Ps((function(){return W(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return[4,(o=t,Nm(o).then((function(t){return t.Sh})))];case 1:return n=i.sent(),new Im(t._s,n,e,r).run(),[2]}var o}))}))})),r.promise}(jm(e=this.d_),(function(r){return function(e){return t(new N_(n,e))}(new b_(e,r))}))},e.prototype.batch=function(){var t=this;return jm(this.d_),new k_(new m_(this.d_,(function(e){return g_(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new qc(Vc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new qc(Vc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Ay),C_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return H(e,t),e.prototype.Wf=function(t){return new E_(new Bc(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return P_.yd(e,this.firestore,null)},e}(Hm);var N_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new C_(e),r}return H(e,t),e.prototype.get=function(t){var e=this,n=V_(t);return this.d_.get(n).then((function(t){return new x_(e.Yf,new u_(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=V_(t);return n?(Oy("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=V_(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,X([s,e,n],i)),this},e.prototype.delete=function(t){var e=V_(t);return this.d_.delete(e),this},e}(Ay),k_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.set=function(t,e,n){var r=V_(t);return n?(Oy("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=V_(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,X([s,e,n],i)),this},e.prototype.delete=function(t){var e=V_(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Ay),A_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return H(e,t),e.prototype.fromFirestore=function(t,e){var n=new c_(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new L_(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new C_(t),n),i.set(n,o)),o},e}(Ay);A_.Vd=new WeakMap;var P_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new C_(e),r}return H(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new qc(Vc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new qy(n.d_,r,new nh(t)))},e.yd=function(t,n,r){return new e(n,new qy(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new j_(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new j_(this.firestore,zy(this.d_,t))}catch(e){throw O_(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Ay&&(t=t.d_),t instanceof qy&&Ky(this.d_,t)},e.prototype.set=function(t,e){e=Oy("DocumentReference.set",e);try{return function(t,e,n){t=My(t,qy);var r=My(t.firestore,Um),i=o_(t.v_,e,n);return g_(r,[nm(em(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ul.Kt())])}(this.d_,t,e)}catch(n){throw O_(n,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?d_(this.d_,t):d_.apply(void 0,X([this.d_,t,e],n))}catch(i){throw O_(i,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return g_(My((t=this.d_).firestore,Um),[new tf(t.S_,Ul.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=R_(e),i=D_(e,(function(e){return new x_(t.firestore,new u_(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return v_(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=My(t,qy);var e=My(t.firestore,Um),n=jm(e),r=new p_(e);return function(t,e){var n=this,r=new pp;return t._s.Ps((function(){return W(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return W(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=Dc(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Tc.Ho(t,a)})))];case 1:return(i=o.sent())instanceof xh?n.resolve(i):i instanceof Lh?n.resolve(null):n.reject(new qc(Vc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Sp(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,Am(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new u_(e,r,t.S_,n,new a_(n instanceof xh&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=My(t,qy);var e=My(t.firestore,Um);return Dm(jm(e),t.S_,{source:"server"}).then((function(n){return y_(e,t,n)}))}(this.d_):function(t){t=My(t,qy);var e=My(t.firestore,Um);return Dm(jm(e),t.S_).then((function(n){return y_(e,t,n)}))}(this.d_)).then((function(t){return new x_(e.firestore,new u_(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(A_.gd(this.firestore,t)))},e}(Ay);function O_(t,e,n){return t.message=t.message.replace(e,n),t}function R_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Mm(r))return r}return{}}function D_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Mm(t[0])?t[0]:Mm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var x_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return H(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new P_(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return f_(this.d_,t.d_)},e}(Ay),L_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(x_),M_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new C_(e),r}return H(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ym(this.d_,(o=r,s=n,a=Km("where",i=t),new Xm(a,s,o))))}catch(i){throw O_(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ym(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Km("orderBy",t);return new Jm(r,n)}(t,n)))}catch(r){throw O_(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ym(this.d_,(Fy("limit",n=t),new $m("limit",n,"F"))))}catch(n){throw O_(n,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ym(this.d_,(Fy("limitToLast",n=t),new $m("limitToLast",n,"L"))))}catch(n){throw O_(n,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ym(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zm("startAt",t,!0)}.apply(void 0,t)))}catch(r){throw O_(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ym(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zm("startAfter",t,!1)}.apply(void 0,t)))}catch(r){throw O_(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ym(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new t_("endBefore",t,!0)}.apply(void 0,t)))}catch(r){throw O_(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ym(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new t_("endAt",t,!1)}.apply(void 0,t)))}catch(r){throw O_(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Gy(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=My(t,By);var e=My(t.firestore,Um),n=jm(e),r=new p_(e);return function(t,e){var n=this,r=new pp;return t._s.Ps((function(){return W(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,fv(t,e,!0)];case 1:return a=u.sent(),r=new Ug(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Sp(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Am(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new h_(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=My(t,By);var e=My(t.firestore,Um),n=jm(e),r=new p_(e);return xm(n,t.C_,{source:"server"}).then((function(n){return new h_(e,r,t,n)}))}(this.d_):function(t){t=My(t,By);var e=My(t.firestore,Um),n=jm(e),r=new p_(e);return Gm(t.C_),xm(n,t.C_).then((function(n){return new h_(e,r,t,n)}))}(this.d_)).then((function(t){return new U_(e.firestore,new h_(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=R_(e),i=D_(e,(function(e){return new U_(t.firestore,new h_(t.firestore.d_,t.Xf,t.d_,e._d))}));return v_(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(A_.gd(this.firestore,t)))},e}(Ay),F_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return H(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new L_(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Ay),U_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return H(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new M_(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new L_(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new F_(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new L_(n.Yf,r))}))},e.prototype.isEqual=function(t){return f_(this.d_,t.d_)},e}(Ay),j_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return H(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new P_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new P_(this.firestore,void 0===t?Wy(this.d_):Wy(this.d_,t))}catch(e){throw O_(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this.d_,n=t,r=My(e.firestore,Um),i=Wy(e),o=o_(e.v_,n),g_(r,[nm(em(e.firestore),"addDoc",i.S_,o,null!==e.v_,{}).F_(i.S_,Ul.exists(!1))]).then((function(){return i}))).then((function(t){return new P_(s.firestore,t)}))},e.prototype.isEqual=function(t){return Ky(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(A_.gd(this.firestore,t)))},e}(M_);function V_(t){return t instanceof Ay&&(t=t.d_),My(t,qy)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var q_=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Ny.bind.apply(Ny,X([void 0],e))))||this}return H(e,t),e.documentId=function(){return new e(eh.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Ay&&(t=t.d_),t instanceof Ny&&this.d_.f_.isEqual(t.f_)},e}(Ay),B_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.serverTimestamp=function(){var t=new om("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new rm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sm("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new am("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new um("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Ay);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t){return e=this.d_,n=t,r=jm(e=My(e,Um)),i=new Fm,function(t,e,n,r){var i,o,s,a=this,u=(i=n,o=Wv(e),s=function(t,e){if(t instanceof Uint8Array)return Ty(t,e);if(t instanceof ArrayBuffer)return Ty(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new Cy(s,o));t._s.Ps((function(){return W(a,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=_y,[4,Om(t)];case 1:return e.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,e.I_,n,i),i;var e,n,r,i}function z_(t){var e,n,r=this;return(e=this.d_,n=t,function(t,e){var n=this;return t._s.enqueue((function(){return W(n,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Dc(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.wo.Ms(t,e)}))},[4,Am(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(jm(e=My(e,Um)),n).then((function(t){return t?new By(e,null,t.query):null}))).then((function(t){return t?new M_(r,t):null}))}var W_,K_,G_={Firestore:S_,GeoPoint:Qy,Timestamp:Xc,Blob:E_,Transaction:N_,WriteBatch:k_,DocumentReference:P_,DocumentSnapshot:x_,Query:M_,QueryDocumentSnapshot:L_,QuerySnapshot:U_,CollectionReference:j_,FieldPath:q_,FieldValue:B_,setLogLevel:function(t){var e;e=t,Sc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(W_=fe).INTERNAL.registerComponent(new Ft("firestore",(function(t){return function(t,e){return new S_(t,new Um(t,e),new T_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},G_))),W_.registerVersion("@firebase/firestore","2.1.7"),(K_=S_).prototype.loadBundle=H_,K_.prototype.namedQuery=z_;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Q_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y_=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return H(e,t),e}(Error);var X_=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return W(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(W_){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return W(this,void 0,void 0,(function(){var t,e;return K(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var $_=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return J_(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?J_(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z_=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new $_,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new X_(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(W_){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return W(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f,p;return K(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Y_("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(a),c=u.timer,h=u.promise,[4,Promise.race([tb(c,this.postJSON(r,i,o)),h,tb(c,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new Y_("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Q_[a])return new Y_("internal","internal");r=Q_[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(W_){}return"ok"===r?null:new Y_(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new Y_("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new Y_("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function tb(t,e){return W(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){return Array.prototype.slice.call(t)}function nb(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function rb(t,e,n){var r,i=new Promise((function(i,o){nb(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function ib(t,e,n){var r=rb(t,e,n);return r.then((function(t){if(t)return new hb(t,r.request)}))}function ob(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function sb(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return rb(this[e],r,arguments)})}))}function ab(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function ub(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return ib(this[e],r,arguments)})}))}function cb(t){this._index=t}function hb(t,e){this._cursor=t,this._request=e}function lb(t){this._store=t}function fb(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function pb(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new fb(n)}function db(t){this._db=t}function vb(t,e,n){var r=rb(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new pb(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new db(t)}))}function gb(t){return rb(indexedDB,"deleteDatabase",[t])}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){var n={Functions:Z_};t.INTERNAL.registerComponent(new Ft("functions",(function(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new Z_(r,i,o,n,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(fe,fetch.bind(self)),fe.registerVersion("@firebase/functions","0.6.2"),ob(cb,"_index",["name","keyPath","multiEntry","unique"]),sb(cb,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ub(cb,"_index",IDBIndex,["openCursor","openKeyCursor"]),ob(hb,"_cursor",["direction","key","primaryKey","value"]),sb(hb,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(hb.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),nb(e._request).then((function(t){if(t)return new hb(t,e._request)}))}))})})),lb.prototype.createIndex=function(){return new cb(this._store.createIndex.apply(this._store,arguments))},lb.prototype.index=function(){return new cb(this._store.index.apply(this._store,arguments))},ob(lb,"_store",["name","keyPath","indexNames","autoIncrement"]),sb(lb,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ub(lb,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ab(lb,"_store",IDBObjectStore,["deleteIndex"]),fb.prototype.objectStore=function(){return new lb(this._tx.objectStore.apply(this._tx,arguments))},ob(fb,"_tx",["objectStoreNames","mode"]),ab(fb,"_tx",IDBTransaction,["abort"]),pb.prototype.createObjectStore=function(){return new lb(this._db.createObjectStore.apply(this._db,arguments))},ob(pb,"_db",["name","version","objectStoreNames"]),ab(pb,"_db",IDBDatabase,["deleteObjectStore","close"]),db.prototype.transaction=function(){return new fb(this._db.transaction.apply(this._db,arguments))},ob(db,"_db",["name","version","objectStoreNames"]),ab(db,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[lb,cb].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=eb(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[cb,lb].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var yb,mb=((yb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',yb["not-registered"]="Firebase Installation is not registered.",yb["installation-not-found"]="Firebase Installation not found.",yb["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',yb["app-offline"]="Could not process request. Application offline.",yb["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",yb),_b=new yt("installations","Installations",mb);function bb(t){return t instanceof gt&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Ib(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Eb(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,_b.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function Tb(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Sb(t,e){var n=e.refreshToken,r=Tb(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function Cb(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function Nb(t,e){var n=e.fid;return W(this,void 0,void 0,(function(){var e,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return e=wb(t),r=Tb(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.20"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,Cb((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return a=u.sent(),[2,{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:Ib(a.authToken)}];case 3:return[4,Eb("Create Installation",s)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ab=/^[cdef][\w-]{21}$/;function Pb(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Y(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return Ab.test(e)?e:""}catch(n){return""}}function Ob(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rb=new Map;function Db(t,e){var n=Ob(t);xb(n,e),function(t,e){var n=Mb();n&&n.postMessage({key:t,fid:e});Fb()}(n,e)}function xb(t,e){var n,r,i=Rb.get(t);if(i)try{for(var o=G(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Lb=null;function Mb(){return!Lb&&"BroadcastChannel"in self&&((Lb=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){xb(t.data.key,t.data.fid)}),Lb}function Fb(){0===Rb.size&&Lb&&(Lb.close(),Lb=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ub,jb="firebase-installations-store",Vb=null;function qb(){return Vb||(Vb=vb("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(jb)}}))),Vb}function Bb(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s;return K(this,(function(a){switch(a.label){case 0:return n=Ob(t),[4,qb()];case 1:return r=a.sent(),i=r.transaction(jb,"readwrite"),[4,(o=i.objectStore(jb)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||Db(t,e.fid),[2,e]}}))}))}function Hb(t){return W(this,void 0,void 0,(function(){var e,n,r;return K(this,(function(i){switch(i.label){case 0:return e=Ob(t),[4,qb()];case 1:return n=i.sent(),[4,(r=n.transaction(jb,"readwrite")).objectStore(jb).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function zb(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return n=Ob(t),[4,qb()];case 1:return r=u.sent(),i=r.transaction(jb,"readwrite"),[4,(o=i.objectStore(jb)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||Db(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){return W(this,void 0,void 0,(function(){var e,n,r;return K(this,(function(i){switch(i.label){case 0:return[4,zb(t,(function(n){var r=function(t){return Qb(t||{fid:Pb(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(_b.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Nb(t,e)];case 1:return n=i.sent(),[2,Bb(t,n)];case 2:return bb(r=i.sent())&&409===r.customData.serverCode?[4,Hb(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Bb(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Kb(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Kb(t){return W(this,void 0,void 0,(function(){var e,n,r,i;return K(this,(function(o){switch(o.label){case 0:return[4,Gb(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,kb(100)];case 3:return o.sent(),[4,Gb(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Wb(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Gb(t){return zb(t,(function(t){if(!t)throw _b.create("installation-not-found");return Qb(t)}))}function Qb(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Yb(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return W(this,void 0,void 0,(function(){var t,i,o,s,a,u,c;return K(this,(function(h){switch(h.label){case 0:return t=function(t,e){var n=e.fid;return wb(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=Sb(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:"w:0.4.20"}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,Cb((function(){return fetch(t,a)}))];case 1:return(u=h.sent()).ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),[2,Ib(c)];case 3:return[4,Eb("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function Xb(t,e){return void 0===e&&(e=!1),W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return[4,zb(t.appConfig,(function(r){if(!$b(r))throw _b.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return[4,Jb(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,kb(100)];case 3:return i.sent(),[4,Jb(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Xb(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw _b.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return z(z({},t),{authToken:e})}(r);return n=function(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Yb(t,e)];case 1:return n=o.sent(),i=z(z({},e),{authToken:n}),[4,Bb(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!bb(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Hb(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=z(z({},e),{authToken:{requestStatus:0}}),[4,Bb(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Jb(t){return zb(t,(function(t){if(!$b(t))throw _b.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?z(z({},t),{authToken:{requestStatus:0}}):t}))}function $b(t){return void 0!==t&&2===t.registrationStatus}function Zb(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return[4,Wb(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o;return K(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return wb(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=Sb(t,e),i={method:"DELETE",headers:r},[4,Cb((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,Eb("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ew(t,e){var n=t.appConfig;return function(t,e){Mb();var n=Ob(t),r=Rb.get(n);r||(r=new Set,Rb.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Ob(t),r=Rb.get(n);r&&(r.delete(e),0===r.size&&Rb.delete(n),Fb())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){return _b.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new Ft("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw nw("App Configuration");if(!t.name)throw nw("App Name");try{for(var r=G(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw nw(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t){return W(this,void 0,void 0,(function(){var e,n,r;return K(this,(function(i){switch(i.label){case 0:return[4,Wb(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Xb(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),W(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return[4,Zb(t.appConfig)];case 1:return n.sent(),[4,Xb(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,zb(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw _b.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw _b.create("app-offline");case 3:return[4,tw(e,n)];case 4:return r.sent(),[4,Hb(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return ew(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.20")}(fe);var rw,iw,ow=((Ub={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ub["only-available-in-window"]="This method is available in a Window context.",Ub["only-available-in-sw"]="This method is available in a service worker context.",Ub["permission-default"]="The notification permission was not granted and dismissed instead.",Ub["permission-blocked"]="The notification permission was not granted and blocked instead.",Ub["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Ub["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Ub["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Ub["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Ub["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Ub["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Ub["token-update-no-token"]="FCM returned no token when updating the user to push.",Ub["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Ub["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Ub["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Ub["invalid-vapid-key"]="The public VAPID key must be a string.",Ub["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Ub),sw=new yt("messaging","Messaging",ow),aw="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function uw(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Y(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cw(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(iw=rw||(rw={})).PUSH_RECEIVED="push-received",iw.NOTIFICATION_CLICKED="notification-clicked";function hw(t){return W(this,void 0,void 0,(function(){var e,n,r=this;return K(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,vb("fcm_token_details_db",5,(function(e){return W(r,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,r.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:uw(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:uw(o.auth),p256dh:uw(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:uw(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,gb("fcm_token_details_db")];case 4:return i.sent(),[4,gb("fcm_vapid_details_db")];case 5:return i.sent(),[4,gb("undefined")];case 6:return i.sent(),[2,lw(n)?n:null]}}))}))}function lw(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fw="firebase-messaging-store",pw=null;function dw(){return pw||(pw=vb("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(fw)}}))),pw}function vw(t){return W(this,void 0,void 0,(function(){var e,n,r;return K(this,(function(i){switch(i.label){case 0:return e=mw(t),[4,dw()];case 1:return[4,i.sent().transaction(fw).objectStore(fw).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,hw(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,gw(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function gw(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return n=mw(t),[4,dw()];case 1:return r=o.sent(),[4,(i=r.transaction(fw,"readwrite")).objectStore(fw).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function yw(t){return W(this,void 0,void 0,(function(){var e,n,r;return K(this,(function(i){switch(i.label){case 0:return e=mw(t),[4,dw()];case 1:return n=i.sent(),[4,(r=n.transaction(fw,"readwrite")).objectStore(fw).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function mw(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return[4,Ew(t)];case 1:n=u.sent(),r=Tw(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Iw(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),sw.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,sw.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw sw.create("token-subscribe-no-token");return[2,o.token]}}))}))}function bw(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return[4,Ew(t)];case 1:n=u.sent(),r=Tw(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Iw(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),sw.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,sw.create("token-update-failed",{errorInfo:a});if(!o.token)throw sw.create("token-update-no-token");return[2,o.token]}}))}))}function ww(t,e){return W(this,void 0,void 0,(function(){var n,r,i,o,s;return K(this,(function(a){switch(a.label){case 0:return[4,Ew(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Iw(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,sw.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),sw.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Iw(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Ew(t){var e=t.appConfig,n=t.installations;return W(this,void 0,void 0,(function(){var t;return K(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Tw(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==aw&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw sw.create("permission-blocked");return[4,Aw(e,n)];case 1:return r=a.sent(),[4,vw(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:uw(r.getKey("auth")),p256dh:uw(r.getKey("p256dh"))},i?[3,3]:[2,kw(t,o)];case 3:if(u=i.subscriptionOptions,h=(c=o).vapidKey===u.vapidKey,l=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,h&&l&&f&&p)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,ww(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,kw(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Nw({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,h,l,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function Cw(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return[4,vw(t)];case 1:return(n=i.sent())?[4,ww(t,n.token)]:[3,4];case 2:return i.sent(),[4,yw(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Nw(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o;return K(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,bw(e,t)];case 1:return r=s.sent(),i=z(z({},t),{token:r,createTime:Date.now()}),[4,gw(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,Cw(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function kw(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return[4,_w(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,gw(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Aw(t,e){return W(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cw(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pw(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rw=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw sw.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return W(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,vw(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:aw,r.label=2;case 2:return[2,Sw(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Cw(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw sw.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw sw.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw sw.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw sw.create("only-available-in-window")},t.prototype.onMessage=function(){throw sw.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw sw.create("only-available-in-window")},t.prototype.onPush=function(t){return W(this,void 0,void 0,(function(){var e,n,r,i;return K(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,Mw()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Lw(n,e)]:(r=!1,e.notification?[4,Fw(Dw(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Ow(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return W(this,void 0,void 0,(function(){var r;return K(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Cw(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,vw(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Cw(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Sw(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:aw)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return W(this,void 0,void 0,(function(){var r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Pw(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,xw(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,Ow(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=rw.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function Dw(t){var e,n=z({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function xw(t){return W(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return K(this,(function(u){switch(u.label){case 0:return[4,Mw()];case 1:e=u.sent();try{for(n=G(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Lw(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=rw.PUSH_RECEIVED;try{for(var i=G(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Mw(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Fw(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Uw=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===rw.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Pw(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw sw.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Sw(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=aw),[2]}))}))},t.prototype.updateSwReg=function(t){return W(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw sw.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return W(this,void 0,void 0,(function(){var t,e;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),sw.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Cw(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return W(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?sw.create("permission-blocked"):sw.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw sw.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw sw.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw sw.create("invalid-sw-registration");if(this.swRegistration)throw sw.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw sw.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw sw.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return W(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case rw.NOTIFICATION_CLICKED:return"notification_open";case rw.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function jw(t){return sw.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vw={isSupported:qw};function qw(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}fe.INTERNAL.registerComponent(new Ft("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw jw("App Configuration Object");if(!t.name)throw jw("App Name");var r=t.options;try{for(var i=G(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw jw(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!qw())throw sw.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Rw(n):new Uw(n)}),"PUBLIC").setServiceProps(Vw));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Bw=function(t){function e(n,r){var i=t.call(this,Hw(n),"Firebase Storage: "+r+" ("+Hw(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return H(e,t),e.prototype._codeEquals=function(t){return Hw(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(gt);function Hw(t){return"storage/"+t}function zw(){return new Bw("unknown","An unknown error occurred, please check the error payload for server response.")}function Ww(){return new Bw("canceled","User canceled the upload/download.")}function Kw(){return new Bw("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Gw(t){return new Bw("invalid-argument",t)}function Qw(){return new Bw("app-deleted","The Firebase app was deleted.")}function Yw(t){return new Bw("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xw(t,e){return new Bw("invalid-format","String does not match format '"+t+"': "+e)}function Jw(t){throw new Bw("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $w={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Zw=function(t,e){this.data=t,this.contentType=e||null};function tI(t,e){switch(t){case $w.RAW:return new Zw(eI(e));case $w.BASE64:case $w.BASE64URL:return new Zw(nI(t,e));case $w.DATA_URL:return new Zw((n=new rI(e)).base64?nI($w.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(W_){throw Xw($w.DATA_URL,"Malformed data URL.")}return eI(e)}(n.rest),function(t){return new rI(t).contentType}(e))}var n;throw zw()}function eI(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function nI(t,e){switch(t){case $w.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Xw(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $w.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Xw(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(W_){throw Xw(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var rI=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Xw($w.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var iI,oI,sI={STATE_CHANGED:"state_changed"},aI={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function uI(t){switch(t){case"running":case"pausing":case"canceling":return aI.RUNNING;case"paused":return aI.PAUSED;case"success":return aI.SUCCESS;case"canceled":return aI.CANCELED;case"error":default:return aI.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(oI=iI||(iI={}))[oI.NO_ERROR=0]="NO_ERROR",oI[oI.NETWORK_ERROR=1]="NETWORK_ERROR",oI[oI.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cI=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=iI.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=iI.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=iI.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Jw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Jw("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Jw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(W_){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Jw("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),hI=function(){function t(){}return t.prototype.createXhrIo=function(){return new cI},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){return"string"==typeof t||t instanceof String}function fI(t){return pI()&&t instanceof Blob}function pI(){return"undefined"!=typeof Blob}function dI(t,e,n,r){if(r<e)throw Gw("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Gw("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function gI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=vI();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(pI())return new Blob(t);throw new Bw("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yI=function(){function t(t,e){var n=0,r="";fI(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(fI(this.data_)){var r=this.data_,i=(s=e,a=n,(o=r).webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null);return null===i?null:new t(i)}var o,s,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(pI()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(gI.apply(null,r))}var i=e.map((function(t){return lI(t)?tI($w.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),mI=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(W_){return new t(e,"")}if(""===n.path)return n;throw new Bw("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(e);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),n=new t(l,f),c.postModify(n);break}}if(null==n)throw function(t){return new Bw("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _I(t){var e,n;try{e=JSON.parse(t)}catch(W_){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){return"https://firebasestorage.googleapis.com/v0"+t}function II(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t,e){return e}var TI=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||EI},SI=null;function CI(){if(SI)return SI;var t=[];t.push(new TI("bucket")),t.push(new TI("generation")),t.push(new TI("metageneration")),t.push(new TI("name","fullPath",!0));var e=new TI("name");e.xform=function(t,e){return function(t){return!lI(t)||t.length<2?t:bI(t)}(e)},t.push(e);var n=new TI("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new TI("timeCreated")),t.push(new TI("updated")),t.push(new TI("md5Hash",null,!0)),t.push(new TI("cacheControl",null,!0)),t.push(new TI("contentDisposition",null,!0)),t.push(new TI("contentEncoding",null,!0)),t.push(new TI("contentLanguage",null,!0)),t.push(new TI("contentType",null,!0)),t.push(new TI("metadata","customMetadata",!0)),SI=t}function NI(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new mI(n,r);return e._makeStorageReference(i)}})}(r,t),r}function kI(t,e,n){var r=_I(e);return null===r?null:NI(t,r,n)}function AI(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e,n){var r=_I(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new mI(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];a=t._makeStorageReference(new mI(e,h.name)),r.items.push(a)}return r}(t,e,r)}var OI=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){if(!t)throw zw()}function DI(t,e){return function(n,r){var i=kI(t,r,e);return RI(null!==i),i}}function xI(t,e){return function(n,r){var i=kI(t,r,e);return RI(null!==i),function(t,e){var n=_I(e);if(null===n)return null;if(!lI(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return wI("/b/"+i(n)+"/o/"+i(r))+II({alt:"media",token:e})}))[0]}(i,r)}}function LI(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Bw("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Bw("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Bw("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function MI(t){var e=LI(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Bw("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function FI(t,e,n){var r=wI(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new OI(r,"GET",DI(t,n),i);return o.errorHandler=MI(e),o}function UI(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=wI(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new OI(s,"GET",function(t,e){return function(n,r){var i=PI(t,e,r);return RI(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=LI(e),u}function jI(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var VI=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function qI(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(W_){RI(!1)}return RI(!!n&&-1!==(e||["active"]).indexOf(n)),n}function BI(t,e,n,r,i,o,s,a){var u=new VI(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Bw("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,f);if(null===d)throw Kw();var v=e.maxUploadRetryTime,g=new OI(n,"POST",(function(t,n){var i,s=qI(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?DI(e,o)(t,n):null,new VI(a,c,"final"===s,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=a||null,g.errorHandler=LI(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HI=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WI=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=CI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=jI(e,r,i),a={name:s.fullPath},u=wI(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=AI(s,n),l=t.maxUploadRetryTime,f=new OI(u,"POST",(function(t){var e;qI(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(W_){RI(!1)}return RI(lI(e)),e}),l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=LI(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new OI(n,"POST",(function(t){var e=qI(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(W_){RI(!1)}n||RI(!1);var i=Number(n);return RI(!isNaN(i)),new VI(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=LI(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new VI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=BI(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(W_){return t._error=W_,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=FI(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=jI(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+AI(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=yI.getBlob(c,r,h);if(null===l)throw Kw();var f={name:u.fullPath},p=wI(o),d=t.maxUploadRetryTime,v=new OI(p,"POST",DI(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=LI(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Ww(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=uI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new HI(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(uI(this._state)){case aI.SUCCESS:zI(this._resolve.bind(null,this.snapshot))();break;case aI.CANCELED:case aI.ERROR:zI(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(uI(this._state)){case aI.RUNNING:case aI.PAUSED:t.next&&zI(t.next.bind(t,this.snapshot))();break;case aI.SUCCESS:t.complete&&zI(t.complete.bind(t))();break;case aI.CANCELED:case aI.ERROR:t.error&&zI(t.error.bind(t,this._error))();break;default:t.error&&zI(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),KI=function(){function t(t,e){this._service=t,this._location=e instanceof mI?e:mI.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new mI(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return bI(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new mI(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Yw(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){var e={prefixes:[],items:[]};return QI(t,e).then((function(){return e}))}function QI(t,e,n){return W(this,void 0,void 0,(function(){var r,i,o;return K(this,(function(s){switch(s.label){case 0:return[4,YI(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,QI(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function YI(t,e){return W(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&dI("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=UI(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function XI(t,e){return W(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=wI(e.fullServerUrl()),o=AI(n,r),s=t.maxOperationRetryTime,a=new OI(i,"PATCH",DI(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=MI(e),a}(t.storage,t._location,e,CI()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}function JI(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=wI(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new OI(r,"GET",xI(t,n),i);return o.errorHandler=MI(e),o}(t.storage,t._location,CI()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Bw("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function $I(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=wI(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new OI(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=MI(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}function ZI(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new mI(t._location.bucket,n);return new KI(t.storage,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tE=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),eE=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new tE(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new tE(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new tE(t,i,i._ref))}:{next:e.next?function(t){return e.next(new tE(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),nE=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new rE(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new rE(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),rE=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(ZI(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new eE(function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new WI(t,new yI(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=$w.RAW),this._throwIfRoot("putString");var r=tI(e,t),i=z({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new eE(new WI(this._delegate,new yI(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return GI(this._delegate).then((function(e){return new nE(e,t.storage)}))},t.prototype.list=function(t){var e=this;return YI(this._delegate,t).then((function(t){return new nE(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return W(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=FI(t.storage,t._location,CI()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return XI(this._delegate,t)},t.prototype.getDownloadURL=function(){return JI(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),$I(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Yw(t)},t}(),iE=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oE=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(W_){o(W_)}else null!==s?((r=zw()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?Qw():Ww()):o(r=new Bw("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new sE(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,a())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,X([null,t],e));else{var i;a()||o?c.call.apply(c,X([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new sE(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===iI.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new sE(s,n))}else{var a=n.getErrorCode()===iI.ABORT;e(!1,new sE(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),sE=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function aE(t){return/^[A-Za-z]+:\/\//.test(t)}function uE(t,e){if(t instanceof hE){var n=t;if(null==n._bucket)throw new Bw("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new KI(n,n._bucket);return null!=e?uE(r,e):r}if(void 0!==e){if(e.includes(".."))throw Gw('`path` param cannot contain ".."');return ZI(t,e)}return t}function cE(t,e){if(e&&aE(e)){if(t instanceof hE)return new KI(t,e);throw Gw("To use ref(service, url), the first argument must be a Storage instance.")}return uE(t,e)}var hE=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mI.makeFromBucketSpec(r):(o=this.app.options,null==(s=null==o?void 0:o.storageBucket)?null:mI.makeFromBucketSpec(s))}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){dI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){dI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return W(this,void 0,void 0,(function(){var t,e;return K(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new KI(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new iE(Qw());var r=function(t,e,n,r,i){var o=II(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new oE(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),lE=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(aE(t))throw Gw("ref() expected a child path but got a URL, use refFromURL instead.");return new rE(cE(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!aE(t))throw Gw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mI.makeFromUrl(t)}catch(W_){throw Gw("refFromUrl() expected a valid full URL but got an invalid one.")}return new rE(cE(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new lE(n,new hE(n,r,new hI,e,fe.SDK_VERSION))}!function(t){var e={TaskState:aI,TaskEvent:sI,StringFormat:$w,Storage:hE,Reference:rE};t.INTERNAL.registerComponent(new Ft("storage",fE,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.3")}(fe);var pE,dE,vE,gE=((pE={})["trace started"]="Trace {$traceName} was started before.",pE["trace stopped"]="Trace {$traceName} is not running.",pE["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",pE["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",pE["no window"]="Window is not available.",pE["no app id"]="App id is not available.",pE["no project id"]="Project id is not available.",pE["no api key"]="Api key is not available.",pE["invalid cc log"]="Attempted to queue invalid cc event",pE["FB not default"]="Performance can only start when Firebase app instance is the default one.",pE["RC response not ok"]="RC response is not ok",pE["invalid attribute name"]="Attribute name {$attributeName} is invalid.",pE["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",pE["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",pE["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",pE),yE=new yt("performance","Performance",gE),mE=new Xt("Performance");mE.logLevel=Bt.INFO;var _E,bE=function(){function t(t){if(this.window=t,!t)throw yE.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!pt()||(mE.info("IndexedDB is not supported by current browswer"),!1):(mE.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===dE&&(dE=new t(vE)),dE},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wE(t,e){var n=t.length-e.length;if(n<0||n>1)throw yE.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IE,EE,TE,SE=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=wE("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=wE("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw yE.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw yE.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw yE.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===_E&&(_E=new t),_E},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return IE}(TE=EE||(EE={}))[TE.UNKNOWN=0]="UNKNOWN",TE[TE.VISIBLE=1]="VISIBLE",TE[TE.HIDDEN=2]="HIDDEN";var NE=["firebase_","google_","ga_"],kE=new RegExp("^[a-zA-Z]\\w*$");function AE(){switch(bE.getInstance().document.visibilityState){case"visible":return EE.VISIBLE;case"hidden":return EE.HIDDEN;default:return EE.UNKNOWN}}function PE(){var t=bE.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var OE=!0;function RE(t){var e=function(){var t=bE.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return e?(DE(e),Promise.resolve()):function(t){return(e=SE.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+SE.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+SE.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:SE.getInstance().getAppId(),app_version:"0.4.6",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw yE.create("RC response not ok")}))})).catch((function(){mE.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(DE).then((function(t){return function(t){var e=bE.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*SE.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function DE(t){if(!t)return t;var e=SE.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=OE,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=xE(e.tracesSamplingRate),e.logNetworkAfterSampling=xE(e.networkRequestsSamplingRate),t}function xE(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LE,ME=1;function FE(){var t;return ME=2,LE=LE||(t=bE.getInstance().document,new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))).then((function(){return(t=SE.getInstance().installationsService.getId()).then((function(t){IE=t})),t;var t})).then((function(t){return RE(t)})).then((function(){return UE()}),(function(){return UE()}))}function UE(){ME=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jE,VE=3,qE=[],BE=!1;function HE(t){setTimeout((function(){var t,e;if(0!==VE)return qE.length?(t=qE.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=SE.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||mE.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(qE=X(e,qE),mE.info("Retry transport request later.")),VE=3,HE(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:SE.getInstance().logSource,log_event:e},t).catch((function(){qE=X(t,qE),VE--,mE.info("Tries left: "+VE+"."),HE(1e4)}))):HE(1e4)}),t)}function zE(t){if(!t.eventTime||!t.message)throw yE.create("invalid cc log");qE=X(qE,[t])}function WE(t,e){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jE||(n=QE,jE=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];zE({message:n.apply(void 0,t),eventTime:Date.now()})}),jE(t,e)}function KE(t){var e=SE.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&bE.getInstance().requiredApisAvailable()&&(t.isAuto&&AE()!==EE.VISIBLE||(3===ME?GE(t):FE().then((function(){return GE(t)}),(function(){return GE(t)}))))}function GE(t){if(CE()){var e=SE.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return WE(t,1)}),0)}}function QE(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:YE(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:YE(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function YE(){return{google_app_id:SE.getInstance().getAppId(),app_instance_id:CE(),web_app_info:{sdk_version:"0.4.6",page_url:bE.getInstance().getUrl(),service_worker_status:(t=bE.getInstance().navigator,"serviceWorker"in t?t.serviceWorker.controller?2:3:1),visibility_state:AE(),effective_connection_type:PE()},application_process_state:0};var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XE=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var JE=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=bE.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw yE.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw yE.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),KE(this)},t.prototype.record=function(t,e,n){if(t<=0)throw yE.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw yE.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=z({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}KE(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&XE.indexOf(i)>-1)&&i.startsWith("_"))throw yE.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&mE.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||NE.some((function(t){return n.startsWith(t)}))||!n.match(kE)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw yE.create("invalid attribute name",{attributeName:t});if(!i)throw yE.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return z({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=bE.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),s=Math.floor(1e3*bE.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}KE(o)}},t.createUserTimingTrace=function(e){KE(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){var e=t;if(e&&void 0!==e.responseStart){var n=bE.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=SE.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return WE(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){CE()&&(setTimeout((function(){return function(){var t=bE.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){JE.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),JE.createOobTrace(e,n,t))}))}else JE.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=bE.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){$E(r[n])}t.setupObserver("resource",$E)}()}),0),setTimeout((function(){return function(){for(var t=bE.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){tT(r[n])}t.setupObserver("measure",tT)}()}),0))}function tT(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&JE.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eT=function(){function t(t){this.app=t,bE.getInstance().requiredApisAvailable()&&dt().then((function(t){t&&(BE||(HE(5500),BE=!0),FE().then(ZE,ZE))})).catch((function(t){mE.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new JE(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return SE.getInstance().instrumentationEnabled},set:function(t){SE.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return SE.getInstance().dataCollectionEnabled},set:function(t){SE.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw yE.create("FB not default");if("undefined"==typeof window)throw yE.create("no window");var n;return n=window,vE=n,SE.getInstance().firebaseAppInstance=t,SE.getInstance().installationsService=e,new eT(t)};t.INTERNAL.registerComponent(new Ft("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.6")}(fe);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var nT,rT,iT,oT,sT="https://www.googletagmanager.com/gtag/js";(rT=nT||(nT={})).EVENT="event",rT.SET="set",rT.CONFIG="config",(oT=iT||(iT={})).ADD_SHIPPING_INFO="add_shipping_info",oT.ADD_PAYMENT_INFO="add_payment_info",oT.ADD_TO_CART="add_to_cart",oT.ADD_TO_WISHLIST="add_to_wishlist",oT.BEGIN_CHECKOUT="begin_checkout",oT.CHECKOUT_PROGRESS="checkout_progress",oT.EXCEPTION="exception",oT.GENERATE_LEAD="generate_lead",oT.LOGIN="login",oT.PAGE_VIEW="page_view",oT.PURCHASE="purchase",oT.REFUND="refund",oT.REMOVE_FROM_CART="remove_from_cart",oT.SCREEN_VIEW="screen_view",oT.SEARCH="search",oT.SELECT_CONTENT="select_content",oT.SELECT_ITEM="select_item",oT.SELECT_PROMOTION="select_promotion",oT.SET_CHECKOUT_OPTION="set_checkout_option",oT.SHARE="share",oT.SIGN_UP="sign_up",oT.TIMING_COMPLETE="timing_complete",oT.VIEW_CART="view_cart",oT.VIEW_ITEM="view_item",oT.VIEW_ITEM_LIST="view_item_list",oT.VIEW_PROMOTION="view_promotion",oT.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aT,uT=new Xt("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e,n,r,i,o){return W(this,void 0,void 0,(function(){var s,a,u,c;return K(this,(function(h){switch(h.label){case 0:s=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),uT.error(c),[3,8];case 8:return t(nT.CONFIG,i,o),[2]}}))}))}function hT(t,e,n,r,i){return W(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f;return K(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=s;c<h.length&&(l=h[c],"break"!==u(l));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(nT.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),uT.error(f),[3,5];case 5:return[2]}}))}))}function lT(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return W(this,void 0,void 0,(function(){var a;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==nT.EVENT?[3,2]:[4,hT(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==nT.CONFIG?[3,4]:[4,cT(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(nT.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),uT.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var fT=((aT={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",aT["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",aT["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",aT["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",aT["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",aT["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",aT["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",aT["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',aT["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',aT),pT=new yt("analytics","Analytics",fT),dT=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function vT(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function gT(t){var e;return W(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return K(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:vT(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw pT.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function yT(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=dT),W(this,void 0,void 0,(function(){var e,s,a,u,c,h,l;return K(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,mT(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return uT.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,gT(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof gt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return uT.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return h=503===Number(c.customData.httpStatus)?Mt(o,r.intervalMillis,30):Mt(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),uT.debug("Calling attemptFetch again in "+h+" millis"),[2,yT(t,l,n,r)];case 7:return[2]}}))}))}function mT(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(pT.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var _T=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t,e,n,r,i,o){return W(this,void 0,void 0,(function(){var s,a,u,c,h,l,f;return K(this,(function(p){switch(p.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=dT),W(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return K(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw pT.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw pT.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new _T,setTimeout((function(){return W(c,void 0,void 0,(function(){return K(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,yT({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&uT.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return uT.error(t)})),e.push(s),a=function(){return W(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return pt()?[3,1]:(uT.warn(pT.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,dt()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),uT.warn(pT.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],h=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(sT))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(t,e){var n=document.createElement("script");n.src=sT+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,l=f,null!=h&&(l.firebase_id=h),i(nT.CONFIG,c.measurementId,l),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wT,IT,ET={},TT=[],ST={},CT="dataLayer",NT="gtag",kT=!1;function AT(t){if(kT)throw pT.create("already-initialized");t.dataLayerName&&(CT=t.dataLayerName),t.gtagName&&(NT=t.gtagName)}function PT(t,e){!function(){var t=[];if(ht()&&t.push("This is a browser extension environment."),vt()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=pT.create("invalid-analytics-context",{errorInfo:e});uT.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw pT.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw pT.create("no-api-key");uT.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ET[i])throw pT.create("already-exists",{id:i});if(!kT){n=CT,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=lT(ET,TT,ST,CT,NT),s=o.wrappedGtag,a=o.gtagCore;IT=s,wT=a,kT=!0}return ET[i]=bT(t,TT,ST,e,wT,CT),{app:t,logEvent:function(t,e,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return W(this,void 0,void 0,(function(){var o,s;return K(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(nT.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=z(z({},r),{send_to:o}),t(nT.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(IT,ET[i],t,e,n).catch((function(t){return uT.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return W(this,void 0,void 0,(function(){var i;return K(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(nT.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(nT.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(IT,ET[i],t,e).catch((function(t){return uT.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return W(this,void 0,void 0,(function(){var i;return K(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(nT.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(nT.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(IT,ET[i],t,e).catch((function(t){return uT.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return W(this,void 0,void 0,(function(){var i,o,s,a,u;return K(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(nT.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(nT.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(IT,ET[i],t,e).catch((function(t){return uT.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return W(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(ET[i],t).catch((function(t){return uT.error(t)}))},INTERNAL:{delete:function(){return delete ET[i],Promise.resolve()}}}}function OT(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:if(ht())return[2,!1];if(!vt())return[2,!1];if(!pt())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,dt()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new Ft("analytics",(function(t){return PT(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:AT,EventName:iT,isSupported:OT})),t.INTERNAL.registerComponent(new Ft("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(W_){throw pT.create("interop-component-reg-failed",{reason:W_})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.4")}(fe);var RT,DT=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return W(this,void 0,void 0,(function(){var e,n,r,i,o;return K(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),xT=((RT={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",RT["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",RT["registration-api-key"]="Undefined API key. Check Firebase app initialization.",RT["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",RT["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",RT["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",RT["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",RT["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",RT["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",RT["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',RT["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',RT["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",RT["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",RT),LT=new yt("remoteconfig","Remote Config",xT);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var MT=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return W(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,g,y,m,_;return K(this,(function(b){switch(b.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=b.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),b.label=2;case 2:return b.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return b.sent(),[4,c];case 4:return l=b.sent(),[3,6];case 5:throw f=b.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),LT.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,b.label=7;case 7:return b.trys.push([7,9,,10]),[4,l.json()];case 8:return m=b.sent(),[3,10];case 9:throw _=b.sent(),LT.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=m.entries,y=m.state,b.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw LT.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),FT=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),UT=["1","true","t","yes","y","on"],jT=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&UT.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),VT=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Bt.DEBUG;break;case"silent":this._logger.logLevel=Bt.SILENT;break;default:this._logger.logLevel=Bt.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return W(this,void 0,void 0,(function(){var t,e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return W(this,void 0,void 0,(function(){var t,e,n,r=this;return K(this,(function(i){switch(i.label){case 0:t=new FT,setTimeout((function(){return W(r,void 0,void 0,(function(){return K(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof gt&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return W(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(z(z({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new jT("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new jT("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new jT("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e){var n=t.target.error||void 0;return LT.create(e,{originalErrorMessage:n&&n.message})}var BT=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(qT(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return W(this,void 0,void 0,(function(){var e,n=this;return K(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(qT(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(W_){i(LT.create("storage-get",{originalErrorMessage:W_&&W_.message}))}}))]}}))}))},t.prototype.set=function(t,e){return W(this,void 0,void 0,(function(){var n,r=this;return K(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(qT(t,"storage-set"))},u.onsuccess=function(){i()}}catch(W_){o(LT.create("storage-set",{originalErrorMessage:W_&&W_.message}))}}))]}}))}))},t.prototype.delete=function(t){return W(this,void 0,void 0,(function(){var e,n=this;return K(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(qT(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(W_){i(LT.create("storage-delete",{originalErrorMessage:W_&&W_.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),HT=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return W(this,void 0,void 0,(function(){var t,e,n,r,i,o;return K(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zT(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(LT.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var WT,KT=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return W(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return W(this,void 0,void 0,(function(){var e,i,o;return K(this,(function(s){switch(s.label){case 0:return[4,zT(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof gt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Mt(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),GT="@firebase/remote-config";(WT=fe).INTERNAL.registerComponent(new Ft("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw LT.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw LT.create("registration-project-id");if(!s)throw LT.create("registration-api-key");if(!a)throw LT.create("registration-app-id");e=e||"firebase";var u=new BT(a,n.name,e),c=new HT(u),h=new Xt(GT);h.logLevel=Bt.ERROR;var l=new MT(r,WT.SDK_VERSION,e,o,s,a),f=new KT(l,u),p=new DT(f,u,c,h),d=new VT(n,p,c,u,h);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),WT.registerVersion(GT,"0.1.31");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
fe.registerVersion("firebase","8.2.9","app");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),fe.registerVersion("firebase","8.2.9");const QT=fe.initializeApp({apiKey:"AIzaSyD8ItvSf7UAV4vPjXEbNyi8-qz7AXH7Zq0",authDomain:"port-of-sheets.firebaseapp.com",projectId:"port-of-sheets",storageBucket:"port-of-sheets.appspot.com",messagingSenderId:"990411761191",appId:"1:990411761191:web:14b7cd1af9c7283c5ad002",measurementId:"G-YBHGPPVH5Z"});fe.getCurrentUser=()=>new Promise(((t,e)=>{const n=fe.auth().onAuthStateChanged((e=>{n(),t(e)}),e)})),fe.auth();const YT=QT.firestore(),XT=YT.collection("Clients"),JT=YT.collection("Insights"),$T=YT.collection("Contact"),ZT=async t=>{(await fe.storage().refFromURL(t)).delete().then((function(){console.log("Asset deleted")})).catch((t=>{console.log(t)}))},tS=(t,e)=>XT.doc(t).set(e),eS=async()=>(await XT.get()).docs.map((t=>[t.data(),t.id])),nS=async()=>(await XT.where("display_on_main","==",!0).get()).docs.map((t=>[t.data(),t.id])),rS=async()=>(await XT.where("type","array-contains","Consulting").get()).docs.map((t=>[t.data(),t.id])),iS=async()=>(await XT.where("type","array-contains","Training & Workshops").get()).docs.map((t=>[t.data(),t.id])),oS=async()=>(await XT.where("discipline","array-contains","Government Agency").get()).docs.map((t=>[t.data(),t.id])),sS=async()=>(await XT.where("discipline","array-contains","Banking and Finance").get()).docs.map((t=>[t.data(),t.id])),aS=async()=>(await XT.where("discipline","array-contains","Education").get()).docs.map((t=>[t.data(),t.id])),uS=async t=>(await XT.where("discipline","array-contains",t).get()).docs.map((t=>[t.data(),t.id])),cS=async t=>(await XT.where("type","array-contains",t).get()).docs.map((t=>[t.data(),t.id])),hS=async t=>{const e=await XT.doc(t).get();return e.exists?e.data():null},lS=t=>XT.doc(t).delete(),fS=(t,e)=>XT.doc(t).update(e),pS=()=>{const e=p([]);return XT.onSnapshot((n=>{e.value=n.docs.map((e=>t({id:e.id},e.data())))})),d(close),e},dS=(t,e)=>JT.doc(t).set(e),vS=async()=>(await JT.get()).docs.map((t=>[t.data(),t.id])),gS=async()=>(await JT.where("contentType","==","Video").get()).docs.map((t=>[t.data(),t.id])),yS=async()=>(await JT.where("contentType","==","Article").get()).docs.map((t=>[t.data(),t.id])),mS=async t=>{const e=await JT.doc(t).get();return e.exists?e.data():null},_S=t=>JT.doc(t).delete(),bS=(t,e)=>JT.doc(t).update(e),wS=()=>{const e=p([]);return JT.onSnapshot((n=>{e.value=n.docs.map((e=>t({id:e.id},e.data())))})),d(close),e},IS=()=>{const e=p([]);return $T.onSnapshot((n=>{e.value=n.docs.map((e=>t({id:e.id},e.data())))})),d(close),e};let ES=v(D),TS=g({history:y(),routes:q});TS.beforeEach((async(t,e,n)=>{t.matched.some((t=>t.meta.requiresAuth))&&!(await fe.getCurrentUser())?n("login"):n()})),ES.use(TS),ES.use(m),ES.mount("#app"),_.init({once:!1});export{_S as A,IS as B,$T as a,eS as b,XT as c,rS as d,iS as e,fe as f,nS as g,oS as h,sS as i,aS as j,cS as k,uS as l,hS as m,vS as n,gS as o,yS as p,mS as q,YT as r,pS as s,tS as t,fS as u,ZT as v,lS as w,bS as x,wS as y,dS as z};
